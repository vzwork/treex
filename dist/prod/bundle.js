/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={4444:(e,t,n)=>{"use strict";n.d(t,{$s:()=>Y,BH:()=>d,DO:()=>P,DV:()=>D,GJ:()=>O,L:()=>l,LL:()=>C,Mn:()=>b,Pz:()=>x,Rd:()=>S,UI:()=>L,US:()=>o,Yr:()=>w,ZR:()=>k,b$:()=>g,cI:()=>I,d:()=>y,dS:()=>K,eu:()=>E,g5:()=>i,gK:()=>H,gQ:()=>B,h$:()=>a,hl:()=>_,hu:()=>r,k$:()=>Q,m9:()=>Z,ne:()=>q,p$:()=>c,pd:()=>V,r3:()=>A,ru:()=>m,tV:()=>u,uI:()=>p,ug:()=>G,vZ:()=>F,w1:()=>v,w9:()=>R,xO:()=>U,xb:()=>M,z$:()=>f,zd:()=>j});const r=function(e,t){if(!e)throw i(t)},i=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,u=i>>2,c=(3&i)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw Error();const l=i<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},a=function(e){const t=s(e);return o.encodeByteArray(t,!0)},l=function(e){return a(e).replace(/\./g,"")},u=function(e){try{return o.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(e){return h(void 0,e)}function h(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=h(e[n],t[n]));return e}class d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function m(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function g(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){return f().indexOf("Electron/")>=0}function v(){const e=f();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function b(){return f().indexOf("MSAppHost/")>=0}function w(){return!1}function _(){return"object"==typeof indexedDB}function E(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}function S(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}class k extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,k.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,C.prototype.create)}}class C{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(T,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new k(r,o,n)}}const T=/\{\$([^}]+)}/g;function I(e){return JSON.parse(e)}function x(e){return JSON.stringify(e)}const N=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=I(u(s[0])||""),n=I(u(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}},P=function(e){const t=N(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},R=function(e){const t=N(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},O=function(e){const t=N(e).claims;return"object"==typeof t&&!0===t.admin};function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function M(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function L(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function F(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(z(n)&&z(s)){if(!F(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function z(e){return null!==e&&"object"==typeof e}function U(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function j(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function V(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class B{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=4294967295&(t<<1|t>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],u=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):e<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const t=(s<<5|s>>>27)+r+u+i+n[e]&4294967295;u=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let r=24;r>=0;r-=8)e[n]=this.chain_[t]>>r&255,++n;return e}}function q(e,t){const n=new $(e,t);return n.subscribe.bind(n)}class ${constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=W),void 0===r.error&&(r.error=W),void 0===r.complete&&(r.complete=W);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function W(){}function H(e,t){return`${e} failed: ${t} argument `}const K=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);if(s>=55296&&s<=56319){const t=s-55296;i++,r(i<e.length,"Surrogate pair missing trail surrogate."),s=65536+(t<<10)+(e.charCodeAt(i)-56320)}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},G=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},Q=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))};function Y(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function Z(e){return e&&e._delegate?e._delegate:e}},3202:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,"body.reflex-col-resize {\n  cursor: col-resize; }\n\nbody.reflex-row-resize {\n  cursor: row-resize; }\n\n.reflex-container {\n  justify-content: flex-start;\n  /* align items in Main Axis */\n  align-items: stretch;\n  /* align items in Cross Axis */\n  align-content: stretch;\n  /* OLD - iOS 6-, Safari 3.1-6 */\n  /* OLD - Firefox 19- (buggy but mostly works) */\n  /* TWEENER - IE 10 */\n  /* NEW - Chrome */\n  display: flex;\n  position: relative;\n  height: 100%;\n  width: 100%; }\n\n.reflex-container.horizontal {\n  flex-direction: column;\n  min-height: 1px; }\n\n.reflex-container.vertical {\n  flex-direction: row;\n  min-width: 1px; }\n\n.reflex-container > .reflex-element {\n  position: relative;\n  overflow: auto;\n  height: 100%;\n  width: 100%; }\n\n.reflex-container.reflex-resizing > .reflex-element {\n  pointer-events: none;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none; }\n\n.reflex-container > .reflex-element > .reflex-size-aware {\n  height: 100%;\n  width: 100%; }\n\n.reflex-container > .reflex-splitter {\n  background-color: #eeeeee;\n  z-index: 100; }\n\n.reflex-container > .reflex-splitter.active,\n.reflex-container > .reflex-splitter:hover {\n  background-color: #c6c6c6;\n  transition: all 1s ease; }\n\n.horizontal > .reflex-splitter {\n  border-bottom: 1px solid #c6c6c6;\n  border-top: 1px solid #c6c6c6;\n  cursor: row-resize;\n  width: 100%;\n  height: 2px; }\n\n.reflex-element.horizontal .reflex-handle {\n  cursor: row-resize;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none; }\n\n.reflex-container.horizontal > .reflex-splitter:hover,\n.reflex-container.horizontal > .reflex-splitter.active {\n  border-bottom: 1px solid #eeeeee;\n  border-top: 1px solid #eeeeee; }\n\n.reflex-container.vertical > .reflex-splitter {\n  border-right: 1px solid #c6c6c6;\n  border-left: 1px solid #c6c6c6;\n  cursor: col-resize;\n  height: 100%;\n  width: 2px; }\n\n.reflex-element.vertical .reflex-handle {\n  cursor: col-resize;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none; }\n\n.reflex-container.vertical > .reflex-splitter:hover,\n.reflex-container.vertical > .reflex-splitter.active {\n  border-right: 1px solid #eeeeee;\n  border-left: 1px solid #eeeeee; }\n\n.reflex-container > .reflex-splitter.reflex-thin {\n  box-sizing: border-box;\n  -moz-background-clip: padding;\n  -webkit-background-clip: padding;\n  background-clip: padding-box;\n  opacity: 0.2;\n  z-index: 100; }\n\n.reflex-container > .reflex-splitter.reflex-thin.active\n.reflex-container > .reflex-splitter.reflex-thin:hover {\n  transition: all 1.5s ease;\n  opacity: 0.5; }\n\n.reflex-container.horizontal > .reflex-splitter.reflex-thin {\n  border-bottom: 8px solid rgba(255, 255, 255, 0);\n  border-top: 8px solid rgba(255, 255, 255, 0);\n  height: 17px !important;\n  cursor: row-resize;\n  margin: -8px 0;\n  width: 100%; }\n\n.reflex-container.horizontal > .reflex-splitter.reflex-thin.active,\n.reflex-container.horizontal > .reflex-splitter.reflex-thin:hover {\n  border-bottom: 8px solid #e4e4e4;\n  border-top: 8px solid #e4e4e4; }\n\n.reflex-container.vertical > .reflex-splitter.reflex-thin {\n  border-right: 8px solid rgba(255, 255, 255, 0);\n  border-left: 8px solid rgba(255, 255, 255, 0);\n  width: 17px !important;\n  cursor: col-resize;\n  margin: 0 -8px;\n  height: 100%; }\n\n.reflex-container.vertical > .reflex-splitter.reflex-thin.active,\n.reflex-container.vertical > .reflex-splitter.reflex-thin:hover {\n  border-right: 8px solid #e4e4e4;\n  border-left: 8px solid #e4e4e4; }",""]);const a=o},9087:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap);"]),o.push([e.id,'html,\nbody {\n  font-family: "Comfortaa";\n  background: black;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n}\n\na {\n  text-decoration: none;\n}\n\n.btn {\n  background: white;\n  color: #000;\n  border: 1px #000 solid;\n  border-radius: 0.5rem;\n  padding: 0.3rem;\n  margin: 0.2rem;\n}\n\n.btn:hover {\n  color: green;\n  border-color: green;\n}\n\n.container {\n  width: 1280px;\n}',""]);const a=o},5232:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".info {\n  width: 100vw;\n  height: 70vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.explanation {\n  background: #ccc;\n  padding: 1rem;\n  border-radius: 0.5rem;\n}",""]);const a=o},5727:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".navbar {\n  position: absolute;\n  z-index: 1;\n  width: 100vw;\n  height: 40px;\n  background: #aaa;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n}\n\n.navbarContent {\n  display: flex;\n  justify-content: space-between;\n  font-size: 1.2rem;\n}\n\n.navbar a {\n  background: white;\n  color: #000;\n  border: 1px #000 solid;\n  border-radius: 0.5rem;\n  padding: 0.3rem;\n  margin: 0.2rem;\n}\n\n.navbar a:hover {\n  color: green;\n  border: 1px green solid;\n}",""]);const a=o},3473:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".dashboard {\n  background: white;\n  position: relative;\n  padding: 0.5rem;\n}\n\n.name {\n  display: flex;\n  justify-content: space-between;\n  background: green;\n  font-size: 1.6rem;\n}\n\n.userName {\n  background: red;\n}\n\n.userStatus {\n  display: flex;\n  justify-content: end;\n}\n\n.userStatusButtons {\n  display: flex;\n}\n\n.userStatusButton {\n  background: #aaa;\n  width: max-content;\n  margin: 0.1rem;\n  padding: 0.3rem;\n  border-radius: 5px;\n}",""]);const a=o},8:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".deleteAccount {\n    position: fixed;\n    top: 0;\n    left: 0;\n}\n\n.closeDeleteAccountButton {\n    background: rgb(0, 0, 0, 0.7);\n    position: absolute;\n    z-index: 2;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n}\n\n.deleteAccountContent {\n    font-size: 0.8rem;\n    background: #ddd;\n    position: relative;\n    z-index: 3;\n    width: 320px;\n    left: calc(50vw - 177px);\n    height: 160px;\n    top: 10vh;\n    padding: 1rem;\n    border-radius: 1rem;\n}\n\n.deleteAccountContent .header {\n    font-size: 1.3rem;\n    text-align: center;\n    padding: 0.7rem;\n}\n\n.deleteAccountContent input {\n    width: 308px;\n    padding: 5px;\n    margin-bottom: 0.6rem;\n    font-size: 1rem;\n}\n\n.deleteAccountContent .deleteAccountButton {\n    width: 322px;\n    padding: 9px;\n    height: 40px;\n    margin: 0.5rem 0;\n    font-size: 1rem;\n    border: none;\n    cursor: pointer;\n    color: white;\n    background: brown;\n}",""]);const a=o},1933:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".editDashboard {\n    position: fixed;\n    left: 0;\n    top: 0;\n    width: 100vw;\n    height: calc(100vh - 40px);\n}\n\n.closeEditDashboardButton {\n    background: rgb(0, 0, 0, 0.7);\n    position: fixed;\n    z-index: 2;\n    left: 0;\n    top: 0;\n    width: 100vw;\n    height: calc(100vh);\n}\n\n.editDashboardContent {\n    background: #ddd;\n    position: fixed;\n    z-index: 3;\n    width: 320px;\n    left: calc(50vw - 177px);\n    height: 280px;\n    top: 10vh;\n    padding: 1rem;\n    border-radius: 1rem;\n}\n\n.editDashboardContent .header {\n    font-size: 1.3rem;\n    text-align: center;\n    padding: 1rem;\n}\n\n.editDashboardContent input {\n    width: 300px;\n    padding: 9px;\n    margin: 0.5rem 0;\n    font-size: 1rem;\n}\n\n.saveChangesButton {\n    width: 322px;\n    padding: 9px;\n    height: 40px;\n    margin: 0.5rem 0;\n    font-size: 1rem;\n    border: none;\n    cursor: pointer;\n    color: white;\n    background: #333;\n}",""]);const a=o},6584:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,'.recentNode {\n  background: #ddd;\n  font-family: "Comfortaa";\n  font-size: 1.3rem;\n  margin: 3px;\n  padding: 0px 10px;\n  border-radius: 10px;\n  border: 1px solid white;\n}\n\n.recentNode:hover {\n  border: 1px solid black;\n}\n\n.base {\n  background: rgb(138, 186, 142);\n}',""]);const a=o},3869:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".recentNodes {\n    margin-top: 0.5rem;\n    height: 60px;\n    padding: 0.5rem;\n    border-radius: 0.5rem;\n    background: mediumaquamarine;\n    \n}\n\n.recentNodes-Nodes {\n    position: absolute;\n    width: 90%;\n    display: flex;\n    overflow: scroll;\n    -ms-scroll-style: none;\n    scrollbar-width: none;\n}\n\n.recentNodes-Nodes::-webkit-scrollbar {\n    display: none;\n  }",""]);const a=o},1659:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,'.guest .navigation {\n    position: absolute;\n    left: calc(50vw - 170px);\n    top: 100px;\n    display: flex;\n    flex-direction: column;\n    width: 340px;\n    height: 220px;\n    background: #ddd;\n    align-items: center;\n    border-radius: 1rem;\n}\n\n.heading {\n    font-size: 1.3rem;\n    padding: 1rem;\n}\n\n.navigation .userStatusButton {\n    font-family: "Comfortaa";\n    font-weight: 100;\n    width: 322px;\n    padding: 9px;\n    height: 40px;\n    margin: 0.5rem 0;\n    font-size: 1.1rem;\n    border: none;\n    border-radius: 1rem;\n    cursor: pointer;\n    color: white;\n    background: rgb(11, 101, 18);\n}',""]);const a=o},6599:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".login {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n\n.closeLoginButton {\n    background: rgb(0, 0, 0, 0.7);\n    position: absolute;\n    z-index: 2;\n    left:0;\n    width: 100vw;\n    height: calc(100vh - 40px);\n}\n\n.loginContent {\n    font-size: 0.8rem;\n    background: #ddd;\n    position: relative;\n    z-index: 3;\n    width: 320px;\n    left: calc(50vw - 177px);\n    height: 280px;\n    top: 10vh;\n    padding: 1rem;\n    border-radius: 1rem;\n}\n\n.loginContent .header {\n    font-size: 1.3rem;\n    text-align: center;\n    padding: 1rem;\n}\n\n.loginContent input {\n    width: 300px;\n    padding: 5px;\n    margin-bottom: 0.6rem;\n    font-size: 1rem;\n}\n\n.loginContent .loginButton {\n    width: 322px;\n    padding: 9px;\n    height: 40px;\n    margin: 0.5rem 0;\n    font-size: 1rem;\n    border: none;\n    cursor: pointer;\n    color: white;\n}\n\n.loginContent .loginEmail {\n    background: rgb(20, 138, 29);\n}\n\n.loginContent .loginGoogle {\n    background: rgb(0, 14, 210);\n}",""]);const a=o},653:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".register {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n\n.closeRegisterButton {\n    background: rgb(0, 0, 0, 0.7);\n    position: absolute;\n    z-index: 2;\n    left:0;\n    width: 100vw;\n    height: calc(100vh - 40px);\n}\n\n.registerContent {\n    font-size: 0.8rem;\n    background: #ddd;\n    position: relative;\n    z-index: 3;\n    width: 320px;\n    left: calc(50vw - 177px);\n    height: 380px;\n    top: 10vh;\n    padding: 1rem;\n    border-radius: 1rem;\n}\n\n.registerContent .header {\n    font-size: 1.3rem;\n    text-align: center;\n    padding: 0.7rem;\n}\n\n.registerContent input {\n    width: 308px;\n    padding: 5px;\n    margin-bottom: 0.6rem;\n    font-size: 1rem;\n}\n\n.registerContent .registerButton {\n    width: 322px;\n    padding: 9px;\n    height: 40px;\n    margin: 0.5rem 0;\n    font-size: 1rem;\n    border: none;\n    cursor: pointer;\n    color: white;\n}\n\n.registerContent .registerEmail {\n    background: rgb(20, 138, 29);\n}\n\n.registerContent .registerGoogle {\n    background: rgb(0, 14, 210);\n}\n",""]);const a=o},4586:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".resetPassword {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n\n.closeResetPasswordButton {\n    background: rgb(0, 0, 0, 0.7);\n    position: absolute;\n    z-index: 2;\n    left:0;\n    width: 100vw;\n    height: calc(100vh - 40px);\n}\n\n.resetPasswordContent {\n    background: #ddd;\n    position: relative;\n    z-index: 3;\n    width: 320px;\n    left: calc(50vw - 177px);\n    height: 220px;\n    top: 10vh;\n    padding: 1rem;\n    border-radius: 1rem;\n    font-size: 0.8rem;\n}\n\n.resetPasswordContent .header {\n    font-size: 1.3rem;\n    text-align: center;\n    padding: 2rem;\n}\n\n.resetPasswordContent input {\n    width: 300px;\n    padding: 9px;\n    margin-bottom: 0.6rem;\n    font-size: 1rem;\n}\n\n.resetPasswordContent .resetPasswordButton {\n    width: 322px;\n    padding: 9px;\n    height: 40px;\n    margin: 0.5rem 0;\n    font-size: 1rem;\n    border: none;\n    cursor: pointer;\n    color: white;\n    background: #333;\n}",""]);const a=o},5843:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".profile {\n  position: absolute;\n  top: 40px;\n  width: 100vw;\n  height: calc(100% - 40px);\n  background: #333;\n  display: flex;\n  justify-content: space-around;\n}",""]);const a=o},288:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".comment {\n  padding: 2px;\n  margin: 2px;\n  display: flex;\n  flex-direction: row;\n}\n\n.commentDate {\n  margin-top: 5px;\n  font-size: 10px;\n}\n\n.commentAuthor {\n  font-size: 12px;\n  margin-top: 3px;\n  margin-left: 5px;\n}\n\n.commentText {\n  margin: 0 5px;\n}",""]);const a=o},439:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".comments {\n  background: mediumaquamarine;\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.commentsOutput {\n  overflow-x: auto;\n  padding: 5px;\n}\n\n.commentsInput {\n  display: flex;\n  margin: 5px;\n  padding: 5px;\n  border-radius: 5px;\n  background: #ddd;\n}\n\n.commentsInput input {\n  border: solid 1px white;\n  margin: 1px;\n  font-size: 1rem;\n  width: calc(100% - 50px)\n}\n\n.commentsInput .sendComment {\n  border: solid 1px white;\n  margin: 1px;\n  padding: 5px;\n  background-color: mediumaquamarine;\n  cursor: pointer;\n}\n\n.comments .sendComment:hover {\n  border: solid 1px black;\n}",""]);const a=o},2168:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,"",""]);const a=o},1441:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".interaction {\n    overflow: hidden;\n    background: white;\n    height: 100%;\n}",""]);const a=o},8906:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,"\n",""]);const a=o},957:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".addNode {\n  position: absolute;\n  background: rgb(0, 0, 0, 0.7);\n  z-index: 2;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100%;\n}\n\n.addNodeCloseButton {\n  cursor: pointer;\n  width: 100%;\n  height: 100%;\n}\n\n.addNodeWindow {\n  position: absolute;\n  z-index: 3;\n  left: calc(50vw - 150px);\n  top: calc(50% - 50px);\n  width: 300px;\n  height: 100px;\n  background: #bbb;\n  border-radius: 10px;\n}\n\n.addNodeWindowExplanation {\n  padding: 5px;\n  text-align: center;\n}\n\n.addNode input {\n  width: 225px;\n  padding: 5px;\n  margin-left: 30px;\n  border-radius: 5px;\n  font-size: 1rem;\n}\n\n.addNodeControlButtons {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n}\n\n.addNodeControlButton {\n  cursor: pointer;\n  text-align: center;\n  font-size: 1.2rem;\n  margin-top: 4px;\n  padding: 5px;\n  width: 80px;\n  border-radius: 10px;\n}\n\n.addNodeCancelButton {\n  background: rgb(235, 76, 76);\n}\n\n.addNodeSaveButton {\n  background: rgb(109, 172, 130);\n}",""]);const a=o},7541:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".deleteNode {\n  position: absolute;\n  background: rgb(0, 0, 0, 0.7);\n  z-index: 2;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100%;\n}\n\n.deleteNodeCloseButton {\n  cursor: pointer;\n  width: 100%;\n  height: 100%;\n}\n\n.deleteNodeWindow {\n  position: absolute;\n  z-index: 3;\n  left: calc(50vw - 150px);\n  top: calc(50% - 50px);\n  width: 300px;\n  height: 100px;\n  background: #bbb;\n  border-radius: 10px;\n}\n\n.deleteNodeWindowExplanation {\n  padding: 5px;\n  text-align: center;\n}\n\n.deleteNode input {\n  width: 225px;\n  padding: 5px;\n  margin-left: 30px;\n  border-radius: 5px;\n  font-size: 1rem;\n}\n\n.deleteNodeControlButtons {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n}\n\n.deleteNodeControlButton {\n  cursor: pointer;\n  text-align: center;\n  font-size: 1.2rem;\n  margin-top: 4px;\n  padding: 5px;\n  width: 80px;\n  border-radius: 10px;\n}\n\n.deleteNodeCancelButton {\n  background: rgb(235, 76, 76);\n}\n\n.deleteNodeDeleteButton {\n  background: rgb(164, 172, 109);\n}",""]);const a=o},4054:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".editTree {\n  background: #aaa;\n  border: 1px solid white;\n  width: 40px;\n  height: 100%;\n}\n\n.editTree-button {\n  height: 40px;\n  font-size: 2.5rem;\n  margin: 0px;\n  padding: 0px;\n}\n\n.editTree-button:hover {\n  color: green;\n  cursor: pointer;\n}",""]);const a=o},3070:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".navigation {\n    background: #aaa;\n    height: 100%;\n    overflow: hidden;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n}\n\n.navigation-shelves {\n    width: calc(100vw - 40px)\n}",""]);const a=o},8971:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".search {\n  position: absolute;\n  background: rgb(0, 0, 0, 0.7);\n  z-index: 2;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100%;\n}\n\n.searchCloseButton {\n  cursor: pointer;\n  width: 100%;\n  height: 100%;\n}\n\n.searchWindow {\n  position: absolute;\n  z-index: 3;\n  left: calc(50vw - 150px);\n  top: 10px;\n  width: 300px;\n  height: 90%;\n  background: #bbb;\n  border-radius: 10px;\n}\n\n.searchInput {\n  display: flex;\n}\n\n.searchInput input {\n  margin: 5px;\n  width: 200px;\n  font-size: 1rem;\n  padding: 2px;\n}\n\n.searchInput .searchControlButton {\n  margin: 5px;\n  padding: 4px;\n  width: 60px;\n  text-align: center;\n  background: mediumaquamarine;\n  border-radius: 5px;\n  border: solid 1px white;\n  cursor: pointer;\n}\n\n.searchInput .searchControlButton:hover {\n  border: solid 1px black;\n}\n\n.searchOutput {\n  position: absolute;\n  overflow-y: auto;\n  overflow-x: hidden;\n  width: 100%;\n  height: calc(100% - 50px);\n}\n",""]);const a=o},4513:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".searchResult {\n  padding: 0 5px;\n  font-size: 1.2rem;\n  display: flex;\n  border-bottom: solid 1px #eee;\n}\n\n.parentNodes {\n  font-size: 1rem;\n  height: min-content;\n  display: flex;\n}\n\n.parentNodes > * {\n  background: #ddd!important;\n}\n\n.searchNode {\n  background: white;\n  border-radius: 4px;\n  border: solid 1px mediumaquamarine;\n  padding: 2px;\n  margin: 2px;\n  cursor: pointer;\n}\n\n.searchNode:hover {\n  border: solid 1px black;\n}",""]);const a=o},1243:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,'.node {\n  font-family: "Comfortaa";\n  font-size: 1.3rem;\n  margin: 3px;\n  padding: 0px 10px;\n  border-radius: 10px;\n  border: 1px solid white;\n}\n\n.node:hover {\n  border: 1px solid black;\n}\n\n.base {\n  background: rgb(138, 186, 142);\n}',""]);const a=o},4191:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".shelf {\n  height: 39px;\n  width: 100vw;\n  display: flex;\n  flex-direction: row;\n  -ms-scroll-style: none;\n  scrollbar-width: none;\n  overflow-x: scroll;\n  border-top: 1px solid white;\n}\n\n.shelf::-webkit-scrollbar {\n  display: none;\n}",""]);const a=o},9429:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".tree{\n    margin-top: 40px;\n    position: fixed;\n    width: 100vw;\n    height: calc(100vh - 40px);\n}\n\n.reflex-splitter {\n    height: 10px!important;\n    \n}\n.reflex-splitter:hover {\n    background: rgb(134, 218, 134)!important;\n    transition: 0.6s!important;\n}",""]);const a=o},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);r&&o[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},8081:e=>{"use strict";e.exports=function(e){return e[1]}},7937:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CustomProvider:()=>K,ReCaptchaEnterpriseProvider:()=>H,ReCaptchaV3Provider:()=>W,getToken:()=>X,initializeAppCheck:()=>Y,onTokenChanged:()=>J,setTokenAutoRefreshEnabled:()=>Z});var r=n(389),i=n(8463),s=n(4444),o=n(3333);const a=new Map,l={activated:!1,tokenObservers:[]},u={initialized:!1,enabled:!1};function c(e){return a.get(e)||l}function h(e,t){a.set(e,t)}function d(){return u}const f="https://content-firebaseappcheck.googleapis.com/v1";class p{constructor(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((()=>{}))}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new s.BH,await(t=this.getNextRun(e),new Promise((e=>{setTimeout(e,t)}))),this.pending.resolve(),await this.pending.promise,this.pending=new s.BH,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch((()=>{}))}catch(e){this.retryPolicy(e)?this.process(!1).catch((()=>{})):this.stop()}var t}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const m=new s.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function g(e=!1){var t;return e?null===(t=self.grecaptcha)||void 0===t?void 0:t.enterprise:self.grecaptcha}function y(e){if(!c(e).activated)throw m.create("use-before-activation",{appName:e.name})}function v(e){const t=Math.round(e/1e3),n=Math.floor(t/86400),r=Math.floor((t-3600*n*24)/3600),i=Math.floor((t-3600*n*24-3600*r)/60),s=t-3600*n*24-3600*r-60*i;let o="";return n&&(o+=b(n)+"d:"),r&&(o+=b(r)+"h:"),o+=b(i)+"m:"+b(s)+"s",o}function b(e){return 0===e?"00":e>=10?e.toString():"0"+e}async function w({url:e,body:t},n){var r,i;const s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&(s["X-Firebase-Client"]=e)}const a={method:"POST",body:JSON.stringify(t),headers:s};let l,u;try{l=await fetch(e,a)}catch(e){throw m.create("fetch-network-error",{originalErrorMessage:null===(r=e)||void 0===r?void 0:r.message})}if(200!==l.status)throw m.create("fetch-status-error",{httpStatus:l.status});try{u=await l.json()}catch(e){throw m.create("fetch-parse-error",{originalErrorMessage:null===(i=e)||void 0===i?void 0:i.message})}const c=u.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw m.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});const h=1e3*Number(c[1]),d=Date.now();return{token:u.token,expireTimeMillis:d+h,issuedAtTimeMillis:d}}const _="firebase-app-check-store",E="debug-token";let S=null;function k(){return S||(S=new Promise(((e,t)=>{var n;try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{var n;t(m.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=e=>{const t=e.target.result;0===e.oldVersion&&t.createObjectStore(_,{keyPath:"compositeKey"})}}catch(e){t(m.create("storage-open",{originalErrorMessage:null===(n=e)||void 0===n?void 0:n.message}))}})),S)}async function C(e,t){const n=(await k()).transaction(_,"readwrite"),r=n.objectStore(_).put({compositeKey:e,value:t});return new Promise(((e,t)=>{r.onsuccess=t=>{e()},n.onerror=e=>{var n;t(m.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))}async function T(e){const t=(await k()).transaction(_,"readonly"),n=t.objectStore(_).get(e);return new Promise(((e,r)=>{n.onsuccess=t=>{const n=t.target.result;e(n?n.value:void 0)},t.onerror=e=>{var t;r(m.create("storage-get",{originalErrorMessage:null===(t=e.target.error)||void 0===t?void 0:t.message}))}}))}function I(e){return`${e.options.appId}-${e.name}`}const x=new o.Yd("@firebase/app-check");function N(e,t){return(0,s.hl)()?function(e,t){return C(I(e),t)}(e,t).catch((e=>{x.warn(`Failed to write token to IndexedDB. Error: ${e}`)})):Promise.resolve()}function P(){return d().enabled}async function R(){const e=d();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}const O={error:"UNKNOWN_ERROR"};async function A(e,t=!1){const n=e.app;y(n);const r=c(n);let i,o=r.token;if(!o){const e=await r.cachedTokenPromise;e&&z(e)&&(o=e)}if(!t&&o&&z(o))return{token:o.token};let a,l=!1;if(P()){r.exchangeTokenPromise||(r.exchangeTokenPromise=w(function(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${f}/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}(n,await R()),e.heartbeatServiceProvider).then((e=>(r.exchangeTokenPromise=void 0,e))),l=!0);const t=await r.exchangeTokenPromise;return await N(n,t),h(n,Object.assign(Object.assign({},r),{token:t})),{token:t.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then((e=>(r.exchangeTokenPromise=void 0,e))),l=!0),o=await r.exchangeTokenPromise}catch(e){"appCheck/throttled"===e.code?x.warn(e.message):x.error(e),i=e}return o?(a={token:o.token},h(n,Object.assign(Object.assign({},r),{token:o})),await N(n,o)):a=function(e){return{token:(t=O,s.US.encodeString(JSON.stringify(t),!1)),error:e};var t}(i),l&&F(n,a),a}function D(e,t,n,r){const{app:i}=e,s=c(i),o={next:n,error:r,type:t};if(h(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&z(s.token)){const t=s.token;Promise.resolve().then((()=>{n({token:t.token}),L(e)})).catch((()=>{}))}s.cachedTokenPromise.then((()=>L(e)))}function M(e,t){const n=c(e),r=n.tokenObservers.filter((e=>e.next!==t));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),h(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function L(e){const{app:t}=e,n=c(t);let r=n.tokenRefresher;r||(r=function(e){const{app:t}=e;return new p((async()=>{let n;if(n=c(t).token?await A(e,!0):await A(e),n.error)throw n.error}),(()=>!0),(()=>{const e=c(t);if(e.token){let t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;const n=e.token.expireTimeMillis-3e5;return t=Math.min(t,n),Math.max(0,t-Date.now())}return 0}),3e4,96e4)}(e),h(t,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function F(e,t){const n=c(e).tokenObservers;for(const e of n)try{"EXTERNAL"===e.type&&null!=t.error?e.error(t.error):e.next(t)}catch(e){}}function z(e){return e.expireTimeMillis-Date.now()>0}class U{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=c(this.app);for(const t of e)M(this.app,t.next);return Promise.resolve()}}function j(e,t){const n=c(e),r=new s.BH;h(e,Object.assign(Object.assign({},n),{reCAPTCHAState:{initialized:r}}));const i=q(e),o=g(!1);return o?B(e,t,o,i,r):function(n){const s=document.createElement("script");s.src="https://www.google.com/recaptcha/api.js",s.onload=()=>{const n=g(!1);if(!n)throw new Error("no recaptcha");B(e,t,n,i,r)},document.head.appendChild(s)}(),r.promise}function V(e,t){const n=c(e),r=new s.BH;h(e,Object.assign(Object.assign({},n),{reCAPTCHAState:{initialized:r}}));const i=q(e),o=g(!0);return o?B(e,t,o,i,r):function(n){const s=document.createElement("script");s.src="https://www.google.com/recaptcha/enterprise.js",s.onload=()=>{const n=g(!0);if(!n)throw new Error("no recaptcha");B(e,t,n,i,r)},document.head.appendChild(s)}(),r.promise}function B(e,t,n,r,i){n.ready((()=>{!function(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible"}),s=c(e);h(e,Object.assign(Object.assign({},s),{reCAPTCHAState:Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}))}(e,t,n,r),i.resolve(n)}))}function q(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function $(e){y(e);const t=c(e).reCAPTCHAState,n=await t.initialized.promise;return new Promise(((t,r)=>{const i=c(e).reCAPTCHAState;n.ready((()=>{t(n.execute(i.widgetId,{action:"fire_app_check"}))}))}))}class W{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,t;Q(this._throttleData);const n=await $(this._app).catch((e=>{throw m.create("recaptcha-error")}));let r;try{r=await w(function(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${f}/projects/${n}/apps/${r}:exchangeRecaptchaV3Token?key=${i}`,body:{recaptcha_v3_token:t}}}(this._app,n),this._heartbeatServiceProvider)}catch(n){throw(null===(e=n.code)||void 0===e?void 0:e.includes("fetch-status-error"))?(this._throttleData=G(Number(null===(t=n.customData)||void 0===t?void 0:t.httpStatus),this._throttleData),m.create("throttled",{time:v(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):n}return this._throttleData=null,r}initialize(e){this._app=e,this._heartbeatServiceProvider=(0,r.qX)(e,"heartbeat"),j(e,this._siteKey).catch((()=>{}))}isEqual(e){return e instanceof W&&this._siteKey===e._siteKey}}class H{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,t;Q(this._throttleData);const n=await $(this._app).catch((e=>{throw m.create("recaptcha-error")}));let r;try{r=await w(function(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${f}/projects/${n}/apps/${r}:exchangeRecaptchaEnterpriseToken?key=${i}`,body:{recaptcha_enterprise_token:t}}}(this._app,n),this._heartbeatServiceProvider)}catch(n){throw(null===(e=n.code)||void 0===e?void 0:e.includes("fetch-status-error"))?(this._throttleData=G(Number(null===(t=n.customData)||void 0===t?void 0:t.httpStatus),this._throttleData),m.create("throttled",{time:v(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):n}return this._throttleData=null,r}initialize(e){this._app=e,this._heartbeatServiceProvider=(0,r.qX)(e,"heartbeat"),V(e,this._siteKey).catch((()=>{}))}isEqual(e){return e instanceof H&&this._siteKey===e._siteKey}}class K{constructor(e){this._customProviderOptions=e}async getToken(){const e=await this._customProviderOptions.getToken(),t=(0,s.DO)(e.token),n=null!==t&&t<Date.now()&&t>0?1e3*t:Date.now();return Object.assign(Object.assign({},e),{issuedAtTimeMillis:n})}initialize(e){this._app=e}isEqual(e){return e instanceof K&&this._customProviderOptions.getToken.toString()===e._customProviderOptions.getToken.toString()}}function G(e,t){if(404===e||403===e)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:e};{const n=t?t.backoffCount:0,r=(0,s.$s)(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function Q(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw m.create("throttled",{time:v(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}function Y(e=(0,r.Mq)(),t){e=(0,s.m9)(e);const n=(0,r.qX)(e,"app-check");if(d().initialized||function(){const e=(0,s.Rd)(),t=d();if(t.initialized=!0,"string"!=typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==e.FIREBASE_APPCHECK_DEBUG_TOKEN)return;t.enabled=!0;const n=new s.BH;t.token=n,"string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(async function(){let e;try{e=await T(E)}catch(e){}if(e)return e;{const e=(0,s.k$)();return(t=e,C(E,t)).catch((e=>x.warn(`Failed to persist debug token to IndexedDB. Error: ${e}`))),e}var t}())}(),P()&&R().then((e=>console.log(`App Check debug token: ${e}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`))),n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(i.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&i.provider.isEqual(t.provider))return r;throw m.create("already-initialized",{appName:e.name})}const i=n.initialize({options:t});return function(e,t,n){const r=c(e),i=Object.assign(Object.assign({},r),{activated:!0});i.provider=t,i.cachedTokenPromise=async function(e){if((0,s.hl)()){let t;try{t=await function(e){return T(I(e))}(e)}catch(e){x.warn(`Failed to read token from IndexedDB. Error: ${e}`)}return t}}(e).then((t=>(t&&z(t)&&(h(e,Object.assign(Object.assign({},c(e)),{token:t})),F(e,{token:t.token})),t))),i.isTokenAutoRefreshEnabled=void 0===n?e.automaticDataCollectionEnabled:n,h(e,i),i.provider.initialize(e)}(e,t.provider,t.isTokenAutoRefreshEnabled),c(e).isTokenAutoRefreshEnabled&&D(i,"INTERNAL",(()=>{})),i}function Z(e,t){const n=e.app,r=c(n);r.tokenRefresher&&(!0===t?r.tokenRefresher.start():r.tokenRefresher.stop()),h(n,Object.assign(Object.assign({},r),{isTokenAutoRefreshEnabled:t}))}async function X(e,t){const n=await A(e,t);if(n.error)throw n.error;return{token:n.token}}function J(e,t,n,r){let i=()=>{},s=()=>{};return i=null!=t.next?t.next.bind(t):t,null!=t.error?s=t.error.bind(t):n&&(s=n),D(e,"EXTERNAL",i,s),()=>M(e.app,i)}const ee="app-check-internal";(0,r.Xd)(new i.wA("app-check",(e=>{return t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),new U(t,n);var t,n}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider(ee).initialize()}))),(0,r.Xd)(new i.wA(ee,(e=>{return t=e.getProvider("app-check").getImmediate(),{getToken:e=>A(t,e),addTokenListener:e=>D(t,"INTERNAL",e),removeTokenListener:e=>M(t.app,e)};var t}),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,r.KN)("@firebase/app-check","0.5.12")},8679:(e,t,n)=>{"use strict";var r=n(9864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=c(n);h&&(o=o.concat(h(n)));for(var a=l(t),m=l(n),g=0;g<o.length;++g){var y=o[g];if(!(s[y]||r&&r[y]||m&&m[y]||a&&a[y])){var v=d(n,y);try{u(t,y,v)}catch(e){}}}}return t}},3096:(e,t,n)=>{var r="Expected a function",i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,h=u||c||Function("return this")(),d=Object.prototype.toString,f=Math.max,p=Math.min,m=function(){return h.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=o.test(e);return n||a.test(e)?l(e.slice(2),n?2:8):s.test(e)?NaN:+e}e.exports=function(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError(r);return g(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),function(e,t,n){var i,s,o,a,l,u,c=0,h=!1,d=!1,v=!0;if("function"!=typeof e)throw new TypeError(r);function b(t){var n=i,r=s;return i=s=void 0,c=t,a=e.apply(r,n)}function w(e){return c=e,l=setTimeout(E,t),h?b(e):a}function _(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-c>=o}function E(){var e=m();if(_(e))return S(e);l=setTimeout(E,function(e){var n=t-(e-u);return d?p(n,o-(e-c)):n}(e))}function S(e){return l=void 0,v&&i?b(e):(i=s=void 0,a)}function k(){var e=m(),n=_(e);if(i=arguments,s=this,u=e,n){if(void 0===l)return w(u);if(d)return l=setTimeout(E,t),b(u)}return void 0===l&&(l=setTimeout(E,t)),a}return t=y(t)||0,g(n)&&(h=!!n.leading,o=(d="maxWait"in n)?f(y(n.maxWait)||0,t):o,v="trailing"in n?!!n.trailing:v),k.cancel=function(){void 0!==l&&clearTimeout(l),c=0,i=u=s=l=void 0},k.flush=function(){return void 0===l?a:S(m())},k}(e,t,{leading:i,maxWait:t,trailing:s})}},2703:(e,t,n)=>{"use strict";var r=n(414);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4448:(e,t,n)=>{"use strict";var r=n(7294),i=n(3840);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function M(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,F=Object.assign;function z(e){if(void 0===L)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function j(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function V(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return j(e.type,!1);case 11:return j(e.type.render,!1);case 1:return j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case C:return"Profiler";case k:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return B(e(t))}catch(e){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Z(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function se(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,ke=null;function Ce(e){if(e=bi(e)){if("function"!=typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function Te(e){Se?ke?ke.push(e):ke=[e]:Se=e}function Ie(){if(Se){var e=Se,t=ke;if(ke=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Pe=!1;function Re(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return xe(e,t,n)}finally{Pe=!1,(null!==Se||null!==ke)&&(Ne(),Ie())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var Ae=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ce){Ae=!1}function Me(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var Le=!1,Fe=null,ze=!1,Ue=null,je={onError:function(e){Le=!0,Fe=e}};function Ve(e,t,n,r,i,s,o,a,l){Le=!1,Fe=null,Me.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function $e(e){if(Be(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return $e(i),e;if(o===r)return $e(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Ze=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null,ot=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2,ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!=(s&=o)&&(r=ht(s))}else 0!=(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!=(4194240&s)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0==(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var _t,Et,St,kt,Ct,Tt=!1,It=[],xt=null,Nt=null,Pt=null,Rt=new Map,Ot=new Map,At=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&null!==(t=bi(t))&&Et(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){zt(e)&&n.delete(t)}function jt(){Tt=!1,null!==xt&&zt(xt)&&(xt=null),null!==Nt&&zt(Nt)&&(Nt=null),null!==Pt&&zt(Pt)&&(Pt=null),Rt.forEach(Ut),Ot.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return Vt(t,e)}if(0<It.length){Vt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Vt(xt,e),null!==Nt&&Vt(Nt,e),null!==Pt&&Vt(Pt,e),Rt.forEach(t),Ot.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)Ft(n),null===n.blockedOn&&At.shift()}var qt=w.ReactCurrentBatchConfig,$t=!0;function Wt(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Ht(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Kt(e,t,n,r){if($t){var i=Qt(e,t,n,r);if(null===i)$r(e,t,r,Gt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Lt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Lt(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=Lt(Pt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Lt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,Lt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&_t(s),null===(s=Qt(e,t,n,r))&&$r(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else $r(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=vi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Xt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Xt,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),hn=F({},un,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(F({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return kn}var Tn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=sn(Tn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=sn(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(Rn),An=[9,13,27,32],Dn=c&&"CompositionEvent"in window,Mn=null;c&&"documentMode"in document&&(Mn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Mn,Fn=c&&(!Dn||Mn&&8<Mn&&11>=Mn),zn=String.fromCharCode(32),Un=!1;function jn(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1,qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=Hr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Kn=null;function Gn(e){zr(e,0)}function Qn(e){if(K(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Zn=!1;if(c){var Xn;if(c){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"==typeof er.oninput}Xn=Jn}else Xn=!1;Zn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Kn=Hn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Wn(t,Kn,e,_e(e)),Re(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(ar(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==G(r)||(r="selectionStart"in(r=gr)&&fr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},kr={};function Cr(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Sr[e]=n[t];return e}c&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Tr=Cr("animationend"),Ir=Cr("animationiteration"),xr=Cr("animationstart"),Nr=Cr("transitionend"),Pr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Pr.set(e,t),l(t,[e])}for(var Ar=0;Ar<Rr.length;Ar++){var Dr=Rr[Ar];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Tr,"onAnimationEnd"),Or(Ir,"onAnimationIteration"),Or(xr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Nr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,u){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(s(198));var c=Fe;Le=!1,Fe=null,ze||(ze=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,u),s=l}}}if(ze)throw e=Ue,ze=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Ht;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function $r(e,t,n,r,i){var s=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=_e(n),o=[];e:{var a=Pr.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Tr:case Ir:case xr:l=yn;break;case Nr:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var c=0!=(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&null!=(m=Oe(p,d))&&c.push(Wr(p,m,f))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(u=n.relatedTarget||n.fromElement)||!vi(u)&&!u[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?vi(u):null)&&(u!==(h=Be(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wi(l),f=null==u?a:wi(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Kr(f))p++;for(f=0,m=d;m;m=Kr(m))f++;for(;0<p-f;)c=Kr(c),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Kr(c),d=Kr(d)}c=null}else c=null;null!==l&&Gr(o,a,l,c,!1),null!==u&&null!==h&&Gr(o,h,u,c,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if($n(a))if(Zn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":($n(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Xt="value"in(Zt=i)?Zt.value:Zt.textContent,Bn=!0)),0<(y=Hr(r,b)).length&&(b=new wn(b,e,null,n,i),o.push({event:b,listeners:y}),(v||null!==(v=Vn(n)))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,zn);case"textInput":return(e=t.data)===zn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&jn(e,t)?(e=en(),Jt=Xt=Zt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v)}zr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Oe(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Oe(n,s))&&o.unshift(Wr(n,l,a)):i||null!=(l=Oe(n,s))&&o.push(Wr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Zr(e){return("string"==typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(s(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,si="function"==typeof Promise?Promise:void 0,oi="function"==typeof queueMicrotask?queueMicrotask:void 0!==si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ei=[],Si=-1;function ki(e){return{current:e}}function Ci(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function Ti(e,t){Si++,Ei[Si]=e.current,e.current=t}var Ii={},xi=ki(Ii),Ni=ki(!1),Pi=Ii;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!=e.childContextTypes}function Ai(){Ci(Ni),Ci(xi)}function Di(e,t,n){if(xi.current!==Ii)throw Error(s(168));Ti(xi,t),Ti(Ni,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Pi=xi.current,Ti(xi,e),Ti(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ci(Ni),Ci(xi),Ti(xi,e)):Ci(Ni),Ti(Ni,n)}var zi=null,Ui=!1,ji=!1;function Vi(e){null===zi?zi=[e]:zi.push(e)}function Bi(){if(!ji&&null!==zi){ji=!0;var e=0,t=bt;try{var n=zi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zi=null,Ui=!1}catch(t){throw null!==zi&&(zi=zi.slice(e+1)),Ke(Je,Bi),t}finally{bt=t,ji=!1}}return null}var qi=[],$i=0,Wi=null,Hi=0,Ki=[],Gi=0,Qi=null,Yi=1,Zi="";function Xi(e,t){qi[$i++]=Hi,qi[$i++]=Wi,Wi=e,Hi=t}function Ji(e,t,n){Ki[Gi++]=Yi,Ki[Gi++]=Zi,Ki[Gi++]=Qi,Qi=e;var r=Yi;e=Zi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Zi=s+e}else Yi=1<<s|n<<i|r,Zi=e}function es(e){null!==e.return&&(Xi(e,1),Ji(e,1,0))}function ts(e){for(;e===Wi;)Wi=qi[--$i],qi[$i]=null,Hi=qi[--$i],qi[$i]=null;for(;e===Qi;)Qi=Ki[--Gi],Ki[Gi]=null,Zi=Ki[--Gi],Ki[Gi]=null,Yi=Ki[--Gi],Ki[Gi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Ru(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ru(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function us(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ui(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ui(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ui(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ui(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=ki(null),vs=null,bs=null,ws=null;function _s(){ws=bs=vs=null}function Es(e){var t=ys.current;Ci(ys),e._currentValue=t}function Ss(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ks(e,t){vs=e,ws=bs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Cs(e){var t=e._currentValue;if(ws!==e)if(e={context:e,memoizedValue:t,next:null},null===bs){if(null===vs)throw Error(s(308));bs=e,vs.dependencies={lanes:0,firstContext:e}}else bs=bs.next=e;return t}var Ts=null;function Is(e){null===Ts?Ts=[e]:Ts.push(e)}function xs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Is(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ps=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function As(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ds(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&xl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Is(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Ms(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ls(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;Ps=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&(a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l)}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=m.payload)?p.call(f,h,d):p))break e;h=F({},h,d);break e;case 2:Ps=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ll|=o,e.lanes=o,e.memoizedState=h}}function zs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(s(191,i));i.call(r)}}}var Us=(new r.Component).refs;function js(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Vs={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),s=As(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(nu(t,e,i,r),Ms(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),s=As(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(nu(t,e,i,r),Ms(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=As(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Ds(e,i,r))&&(nu(t,e,r,n),Ms(t,e,r))}};function Bs(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&lr(n,r)&&lr(i,s))}function qs(e,t,n){var r=!1,i=Ii,s=t.contextType;return"object"==typeof s&&null!==s?s=Cs(s):(i=Oi(t)?Pi:xi.current,s=(r=null!=(r=t.contextTypes))?Ri(e,i):Ii),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function $s(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vs.enqueueReplaceState(t,t.state,null)}function Ws(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Us,Rs(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=Cs(s):(s=Oi(t)?Pi:xi.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(js(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Vs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function Hs(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Us&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ks(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gs(e){return(0,e._init)(e._payload)}function Qs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Au(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===O&&Gs(s)===t.type)?((r=i(t,n.props)).ref=Hs(e,t,n),r.return=e,r):((r=Du(n.type,n.key,n.props,null,e.mode,r)).ref=Hs(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Fu(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Du(t.type,t.key,t.props,null,e.mode,n)).ref=Hs(e,null,t),n.return=e,n;case E:return(t=zu(t,e.mode,n)).return=e,t;case O:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mu(t,e.mode,n,null)).return=e,t;Ks(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?u(e,t,n,r):null;case E:return n.key===i?c(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:h(e,t,n,r,null);Ks(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return h(t,e=e.get(n)||null,r,i,null);Ks(t,r)}return null}function m(i,s,a,l){for(var u=null,c=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===c?u=h:c.sibling=h,c=h);return is&&Xi(i,m),u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),u}function g(i,a,l,u){var c=M(l);if("function"!=typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===h?c=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),is&&Xi(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return is&&Xi(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),c}return function e(r,s,o,l){if("object"==typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===S){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===O&&Gs(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=Hs(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===S?((s=Mu(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Du(o.type,o.key,o.props,null,r.mode,l)).ref=Hs(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=zu(o,r.mode,l)).return=r,r=s}return a(r);case O:return e(r,s,(c=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(M(o))return g(r,s,o,l);Ks(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Fu(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Ys=Qs(!0),Zs=Qs(!1),Xs={},Js=ki(Xs),eo=ki(Xs),to=ki(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Js,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Js),Ti(Js,t)}function io(){Ci(Js),Ci(eo),Ci(to)}function so(e){no(to.current);var t=no(Js.current),n=le(t,e.type);t!==n&&(Ti(eo,e),Ti(Js,n))}function oo(e){eo.current===e&&(Ci(Js),Ci(eo))}var ao=ki(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,mo=null,go=null,yo=null,vo=!1,bo=!1,wo=0,_o=0;function Eo(){throw Error(s(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function ko(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),bo){o=0;do{if(bo=!1,wo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=ua,e=n(r,i)}while(bo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,yo=go=mo=null,vo=!1,t)throw Error(s(300));return e}function Co(){var e=0!==wo;return wo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function Io(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function xo(e,t){return"function"==typeof t?t(e):t}function No(e){var t=Io(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((po&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,mo.lanes|=h,Ll|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Ll|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=Io(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Oo(e,t){var n=mo,r=Io(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,$o(Mo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Do.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!=(30&po)||Ao(n,t,i)}return i}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Fo(e)}function Mo(e,t,n){return n((function(){Lo(t)&&Fo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(e){return!0}}function Fo(e){var t=Ns(e,1);null!==t&&nu(t,e,1,-1)}function zo(e){var t=To();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return Io().memoizedState}function Vo(e,t,n,r){var i=To();mo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=Io();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=Uo(t,n,s,r))}mo.flags|=e,i.memoizedState=Uo(1|t,n,s,r)}function qo(e,t){return Vo(8390656,8,e,t)}function $o(e,t){return Bo(2048,8,e,t)}function Wo(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Ko(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!=n?n.concat([e]):null,Bo(4,4,Ko.bind(null,t,e),n)}function Qo(){}function Yo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0==(21&po)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Ll|=n,e.baseState=!0),t)}function Jo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{bt=n,fo.transition=r}}function ea(){return Io().memoizedState}function ta(e,t,n){var r=tu(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e)?ia(t,n):null!==(n=xs(e,t,n,r))&&(nu(n,e,r,eu()),sa(n,t,r))}function na(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Is(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=xs(e,t,i,r))&&(nu(n,e,r,i=eu()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){bo=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:Cs,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},aa={readContext:Cs,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Cs,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Vo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:zo,useDebugValue:Qo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=zo(!1),t=e[0];return e=Jo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=To();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!=(30&po)||Ao(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Mo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Nl.identifierPrefix;if(is){var n=Zi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Cs,useCallback:Yo,useContext:Cs,useEffect:$o,useImperativeHandle:Go,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Zo,useReducer:No,useRef:jo,useState:function(){return No(xo)},useDebugValue:Qo,useDeferredValue:function(e){return Xo(Io(),go.memoizedState,e)},useTransition:function(){return[No(xo)[0],Io().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Oo,useId:ea,unstable_isNewReconciler:!1},ua={readContext:Cs,useCallback:Yo,useContext:Cs,useEffect:$o,useImperativeHandle:Go,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Zo,useReducer:Po,useRef:jo,useState:function(){return Po(xo)},useDebugValue:Qo,useDeferredValue:function(e){var t=Io();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[Po(xo)[0],Io().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Oo,useId:ea,unstable_isNewReconciler:!1};function ca(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var fa="function"==typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=As(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$l||($l=!0,Wl=r),da(0,t)},n}function ma(e,t,n){(n=As(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!=typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cu.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=As(-1,1)).tag=2,Ds(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ba=w.ReactCurrentOwner,wa=!1;function _a(e,t,n,r){t.child=null===e?Zs(t,null,n,r):Ys(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return ks(t,i),r=ko(e,t,n,r,s,i),n=Co(),null===e||wa?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$a(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Ou(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Du(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ka(e,t,s,r,i))}if(s=e.child,0==(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return $a(e,t,i)}return t.flags|=1,(e=Au(s,r)).ref=t.ref,e.return=t,t.child=e}function ka(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=s,0==(e.lanes&i))return t.lanes=e.lanes,$a(e,t,i);0!=(131072&e.flags)&&(wa=!0)}}return Ia(e,t,n,r,i)}function Ca(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Al,Ol),Ol|=n;else{if(0==(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Al,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Al,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Al,Ol),Ol|=r;return _a(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ia(e,t,n,r,i){var s=Oi(n)?Pi:xi.current;return s=Ri(t,s),ks(t,i),n=ko(e,t,n,r,s,i),r=Co(),null===e||wa?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$a(e,t,i))}function xa(e,t,n,r,i){if(Oi(n)){var s=!0;Li(t)}else s=!1;if(ks(t,i),null===t.stateNode)qa(e,t),qs(t,n,r),Ws(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;u="object"==typeof u&&null!==u?Cs(u):Ri(t,u=Oi(n)?Pi:xi.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||l!==u)&&$s(t,o,r,u),Ps=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ni.current||Ps?("function"==typeof c&&(js(t,n,c,r),l=t.memoizedState),(a=Ps||Bs(t,n,a,r,d,l,u))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Os(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:gs(t.type,a),o.props=u,h=t.pendingProps,d=o.context,l="object"==typeof(l=n.contextType)&&null!==l?Cs(l):Ri(t,l=Oi(n)?Pi:xi.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==h||d!==l)&&$s(t,o,r,l),Ps=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||Ps?("function"==typeof f&&(js(t,n,f,r),p=t.memoizedState),(u=Ps||Bs(t,n,u,r,d,p,l)||!1)?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){Ta(e,t);var o=0!=(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),$a(e,t,s);r=t.stateNode,ba.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ys(t,e.child,null,s),t.child=Ys(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Ra(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Oa,Aa,Da,Ma={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!=(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(ao,1&o),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0==(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Lu(l,i,0,null),e=Mu(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(n),t.memoizedState=Ma,e):za(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Lu({mode:"visible",children:r.children},i,0,null),(o=Mu(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!=(1&t.mode)&&Ys(t,e.child,null,a),t.child.memoizedState=La(a),t.memoizedState=Ma,o);if(0==(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!=(a&e.childLanes),wa||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),nu(r,e,i,-1))}return mu(),Ua(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Iu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ui(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Gi++]=Yi,Ki[Gi++]=Zi,Ki[Gi++]=Qi,Yi=e.id,Zi=e.overflow,Qi=t),(t=za(t,r.children)).flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0==(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Au(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Au(r,a):(a=Mu(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?La(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Au(a,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function za(e,t){return(t=Lu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&ps(r),Ys(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ja(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ss(e.return,t,n)}function Va(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!=(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ja(e,n,t);else if(19===e.tag)ja(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ao,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,s);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $a(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Au(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Au(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Oi(t.type)&&Ai(),Ha(t),null;case 3:return r=t.stateNode,io(),Ci(Ni),Ci(xi),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==ss&&(ou(ss),ss=null))),Ha(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Aa(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=no(Js.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!=(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"==typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",u]):"number"==typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":H(r),J(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Oa(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ve(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"==typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"==typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ur("scroll",e):null!=c&&b(e,o,c,l))}switch(n){case"input":H(e),J(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)Da(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Js.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!=(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ci(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!=(1&t.mode)&&0==(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(ou(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ao.current)?0===Dl&&(Dl=3):mu())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return io(),null===e&&Br(t.stateNode.containerInfo),Ha(t),null;case 10:return Es(t.type._context),Ha(t),null;case 19:if(Ci(ao),null===(o=t.memoizedState))return Ha(t),null;if(r=0!=(128&t.flags),null===(l=o.rendering))if(r)Wa(o,!1);else{if(0!==Dl||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Wa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Ze()>Bl&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ha(t),null}else 2*Ze()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,n=ao.current,Ti(ao,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&Ol)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ga(e,t){switch(ts(t),t.tag){case 1:return Oi(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ci(Ni),Ci(xi),co(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ci(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(ao),null;case 4:return io(),null;case 10:return Es(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Aa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Js.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Jr)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!=typeof u&&"number"!=typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Ur("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Ya=!1,Za="function"==typeof WeakSet?WeakSet:Set,Xa=null;function Ja(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){ku(e,t,n)}else n.current=null}function el(e,t,n){try{n()}catch(n){ku(e,t,n)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"==typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:Ya||Ja(n,t);case 6:var r=cl,i=hl;cl=null,dl(e,t,n),hl=i,null!==(cl=r)&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=hl,cl=n.stateNode.containerInfo,hl=!0,dl(e,t,n),cl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ya&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!=(2&s)||0!=(4&s))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ya&&(Ja(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){ku(n,t,e)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,dl(e,t,n),Ya=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach((function(t){var r=xu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===cl)throw Error(s(160));fl(o,a,i),cl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(e){ku(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(t){ku(e,e.return,t)}try{nl(5,e,e.return)}catch(t){ku(e,e.return,t)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Ja(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Ja(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(t){ku(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Z(i,o),be(l,a);var c=be(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,c)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(t){ku(e,e.return,t)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(t){ku(e,e.return,t)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(t){ku(e,e.return,t)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Ze())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(c=Ya)||h,ml(t,e),Ya=c):ml(t,e),yl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!=(1&e.mode))for(Xa=e,h=e.child;null!==h;){for(d=Xa=h;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Ja(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){ku(r,n,e)}}break;case 5:Ja(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,Xa=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=null!=(u=d.memoizedProps.style)&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",a))}catch(t){ku(e,e.return,t)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(t){ku(e,e.return,t)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(t){ku(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xa=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!=(1&e.mode);null!==Xa;){var i=Xa,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Qa;var u=Ya;if(Qa=o,(Ya=l)&&!u)for(Xa=i;null!==Xa;)l=(o=Xa).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,Xa=l):El(i);for(;null!==s;)Xa=s,bl(s,t,n),s=s.sibling;Xa=i,Qa=a,Ya=u}wl(e)}else 0!=(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xa=s):wl(e)}}function wl(e){for(;null!==Xa;){var t=Xa;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&zs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Ya||512&t.flags&&il(t)}catch(e){ku(t,t.return,e)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function _l(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function El(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(e){ku(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){ku(t,i,e)}}var s=t.return;try{il(t)}catch(e){ku(t,s,e)}break;case 5:var o=t.return;try{il(t)}catch(e){ku(t,o,e)}}}catch(e){ku(t,t.return,e)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Sl,kl=Math.ceil,Cl=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,Il=w.ReactCurrentBatchConfig,xl=0,Nl=null,Pl=null,Rl=0,Ol=0,Al=ki(0),Dl=0,Ml=null,Ll=0,Fl=0,zl=0,Ul=null,jl=null,Vl=0,Bl=1/0,ql=null,$l=!1,Wl=null,Hl=null,Kl=!1,Gl=null,Ql=0,Yl=0,Zl=null,Xl=-1,Jl=0;function eu(){return 0!=(6&xl)?Ze():-1!==Xl?Xl:Xl=Ze()}function tu(e){return 0==(1&e.mode)?1:0!=(2&xl)&&0!==Rl?Rl&-Rl:null!==ms.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nu(e,t,n,r){if(50<Yl)throw Yl=0,Zl=null,Error(s(185));yt(e,n,r),0!=(2&xl)&&e===Nl||(e===Nl&&(0==(2&xl)&&(Fl|=n),4===Dl&&au(e,Rl)),ru(e,r),1===n&&0===xl&&0==(1&t.mode)&&(Bl=Ze()+500,Ui&&Bi()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!=(a&n)&&0==(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nl?Rl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Ui=!0,Vi(e)}(lu.bind(null,e)):Vi(lu.bind(null,e)),oi((function(){0==(6&xl)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nu(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Xl=-1,Jl=0,0!=(6&xl))throw Error(s(327));var n=e.callbackNode;if(Eu()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Rl:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var i=xl;xl|=2;var o=pu();for(Nl===e&&Rl===t||(ql=null,Bl=Ze()+500,du(e,t));;)try{vu();break}catch(t){fu(e,t)}_s(),Cl.current=o,xl=i,null!==Pl?t=0:(Nl=null,Rl=0,t=Dl)}if(0!==t){if(2===t&&0!==(i=pt(e))&&(r=i,t=su(e,i)),1===t)throw n=Ml,du(e,0),au(e,r),ru(e,Ze()),n;if(6===t)au(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gu(e,r))&&0!==(o=pt(e))&&(r=o,t=su(e,o)),1===t))throw n=Ml,du(e,0),au(e,r),ru(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_u(e,jl,ql);break;case 3:if(au(e,r),(130023424&r)===r&&10<(t=Vl+500-Ze())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_u.bind(null,e,jl,ql),t);break}_u(e,jl,ql);break;case 4:if(au(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ri(_u.bind(null,e,jl,ql),r);break}_u(e,jl,ql);break;default:throw Error(s(329))}}}return ru(e,Ze()),e.callbackNode===n?iu.bind(null,e):null}function su(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=gu(e,t))&&(t=jl,jl=n,null!==t&&ou(t)),e}function ou(e){null===jl?jl=e:jl.push.apply(jl,e)}function au(e,t){for(t&=~zl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!=(6&xl))throw Error(s(327));Eu();var t=dt(e,0);if(0==(1&t))return ru(e,Ze()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=su(e,r))}if(1===n)throw n=Ml,du(e,0),au(e,t),ru(e,Ze()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_u(e,jl,ql),ru(e,Ze()),null}function uu(e,t){var n=xl;xl|=1;try{return e(t)}finally{0===(xl=n)&&(Bl=Ze()+500,Ui&&Bi())}}function cu(e){null!==Gl&&0===Gl.tag&&0==(6&xl)&&Eu();var t=xl;xl|=1;var n=Il.transition,r=bt;try{if(Il.transition=null,bt=1,e)return e()}finally{bt=r,Il.transition=n,0==(6&(xl=t))&&Bi()}}function hu(){Ol=Al.current,Ci(Al)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ai();break;case 3:io(),Ci(Ni),Ci(xi),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ci(ao);break;case 10:Es(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Nl=e,Pl=e=Au(e.current,null),Rl=Ol=t,Dl=0,Ml=null,zl=Fl=Ll=0,jl=Ul=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ts=null}return e}function fu(e,t){for(;;){var n=Pl;try{if(_s(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=go=mo=null,bo=!1,wo=0,Tl.current=null,null===n||null===n.return){Dl=1,Ml=t,Pl=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Rl,l.flags|=32768,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u,h=l,d=h.tag;if(0==(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0==(1&t)){ga(o,c,t),mu();break e}u=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),ps(ca(u,l));break e}}o=u=ca(u,l),4!==Dl&&(Dl=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,pa(0,u,t));break e;case 1:l=u;var v=o.type,b=o.stateNode;if(0==(128&o.flags)&&("function"==typeof v.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===Hl||!Hl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}wu(n)}catch(e){t=e,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function pu(){var e=Cl.current;return Cl.current=oa,null===e?oa:e}function mu(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Nl||0==(268435455&Ll)&&0==(268435455&Fl)||au(Nl,Rl)}function gu(e,t){var n=xl;xl|=2;var r=pu();for(Nl===e&&Rl===t||(ql=null,du(e,t));;)try{yu();break}catch(t){fu(e,t)}if(_s(),xl=n,Cl.current=r,null!==Pl)throw Error(s(261));return Nl=null,Rl=0,Dl}function yu(){for(;null!==Pl;)bu(Pl)}function vu(){for(;null!==Pl&&!Qe();)bu(Pl)}function bu(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?wu(e):Pl=t,Tl.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Ka(n,t,Ol)))return void(Pl=n)}else{if(null!==(n=Ga(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Dl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Dl&&(Dl=5)}function _u(e,t,n){var r=bt,i=Il.transition;try{Il.transition=null,bt=1,function(e,t,n,r){do{Eu()}while(null!==Gl);if(0!=(6&xl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Pl=Nl=null,Rl=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Kl||(Kl=!0,Nu(tt,(function(){return Eu(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=Il.transition,Il.transition=null;var a=bt;bt=1;var l=xl;xl|=4,Tl.current=null,function(e,t){if(ei=$t,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=a),f===o&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},$t=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(e){ku(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),$t=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ye(),xl=l,bt=a,Il.transition=o}else e.current=n;if(Kl&&(Kl=!1,Gl=e,Ql=i),0===(o=e.pendingLanes)&&(Hl=null),function(e){if(st&&"function"==typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),ru(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if($l)throw $l=!1,e=Wl,Wl=null,e;0!=(1&Ql)&&0!==e.tag&&Eu(),0!=(1&(o=e.pendingLanes))?e===Zl?Yl++:(Yl=0,Zl=e):Yl=0,Bi()}(e,t,n,r)}finally{Il.transition=i,bt=r}return null}function Eu(){if(null!==Gl){var e=wt(Ql),t=Il.transition,n=bt;try{if(Il.transition=null,bt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Ql=0,0!=(6&xl))throw Error(s(331));var i=xl;for(xl|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!=(16&Xa.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Xa=c;null!==Xa;){var h=Xa;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Xa=d;else for(;null!==Xa;){var f=(h=Xa).sibling,p=h.return;if(sl(h),h===c){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xa=o}}if(0!=(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!=(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Xa=v;break e}Xa=o.return}}var b=e.current;for(Xa=b;null!==Xa;){var w=(a=Xa).child;if(0!=(2064&a.subtreeFlags)&&null!==w)w.return=a,Xa=w;else e:for(a=b;null!==Xa;){if(0!=(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(e){ku(l,l.return,e)}if(l===a){Xa=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Xa=_;break e}Xa=l.return}}if(xl=i,Bi(),st&&"function"==typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{bt=n,Il.transition=t}}return!1}function Su(e,t,n){e=Ds(e,t=pa(0,t=ca(n,t),1),1),t=eu(),null!==e&&(yt(e,1,t),ru(e,t))}function ku(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=Ds(t,e=ma(t,e=ca(n,e),1),1),e=eu(),null!==t&&(yt(t,1,e),ru(t,e));break}}t=t.return}}function Cu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Rl&n)===n&&(4===Dl||3===Dl&&(130023424&Rl)===Rl&&500>Ze()-Vl?du(e,0):zl|=n),ru(e,t)}function Tu(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ct,0==(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Ns(e,t))&&(yt(e,t,n),ru(e,n))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tu(e,n)}function xu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tu(e,n)}function Nu(e,t){return Ke(e,t)}function Pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ru(e,t,n,r){return new Pu(e,t,n,r)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Au(e,t){var n=e.alternate;return null===n?((n=Ru(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Du(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Ou(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case S:return Mu(n.children,i,o,t);case k:a=8,i|=8;break;case C:return(e=Ru(12,n,t,2|i)).elementType=C,e.lanes=o,e;case N:return(e=Ru(13,n,t,i)).elementType=N,e.lanes=o,e;case P:return(e=Ru(19,n,t,i)).elementType=P,e.lanes=o,e;case A:return Lu(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case I:a=9;break e;case x:a=11;break e;case R:a=14;break e;case O:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ru(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mu(e,t,n,r){return(e=Ru(7,e,r,t)).lanes=n,e}function Lu(e,t,n,r){return(e=Ru(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Fu(e,t,n){return(e=Ru(6,e,null,t)).lanes=n,e}function zu(e,t,n){return(t=Ru(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ju(e,t,n,r,i,s,o,a,l){return e=new Uu(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ru(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function Vu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bu(e){if(!e)return Ii;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Mi(e,n,t)}return t}function qu(e,t,n,r,i,s,o,a,l){return(e=ju(n,r,!0,e,0,s,0,a,l)).context=Bu(null),n=e.current,(s=As(r=eu(),i=tu(n))).callback=null!=t?t:null,Ds(n,s,i),e.current.lanes=i,yt(e,i,r),ru(e,r),e}function $u(e,t,n,r){var i=t.current,s=eu(),o=tu(i);return n=Bu(n),null===t.context?t.context=n:t.pendingContext=n,(t=As(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ds(i,t,o))&&(nu(e,i,o,s),Ms(e,i,o)),o}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ku(e,t){Hu(e,t),(e=e.alternate)&&Hu(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wa=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),fs();break;case 5:so(t);break;case 1:Oi(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ao,1&ao.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Fa(e,t,n):(Ti(ao,1&ao.current),null!==(e=$a(e,t,n))?e.sibling:null);Ti(ao,1&ao.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return $a(e,t,n)}(e,t,n);wa=0!=(131072&e.flags)}else wa=!1,is&&0!=(1048576&t.flags)&&Ji(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Ri(t,xi.current);ks(t,n),i=ko(null,t,r,e,i,n);var o=Co();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Rs(t),i.updater=Vs,t.stateNode=i,i._reactInternals=t,Ws(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Ou(e)?1:0;if(null!=e){if((e=e.$$typeof)===x)return 11;if(e===R)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ia(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Pa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Os(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ui(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Zs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=$a(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&us(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ta(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&us(t),null;case 13:return Fa(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ys(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=$a(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=As(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ss(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ss(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ks(t,n),r=r(i=Cs(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Sa(e,t,r,i=gs(r.type,i),n);case 15:return ka(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),qa(e,t),t.tag=1,Oi(r)?(e=!0,Li(t)):e=!1,ks(t,n),qs(t,r,i),Ws(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return Ca(e,t,n)}throw Error(s(156,t.tag))};var Gu="function"==typeof reportError?reportError:function(e){console.error(e)};function Qu(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function ec(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"==typeof i){var a=i;i=function(){var e=Wu(o);a.call(e)}}$u(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=Wu(o);s.call(e)}}var o=qu(t,r,e,0,null,!1,0,"",Ju);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),cu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var a=r;r=function(){var e=Wu(l);a.call(e)}}var l=ju(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),cu((function(){$u(t,l,n,r)})),l}(n,t,e,i,r);return Wu(o)}Yu.prototype.render=Qu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));$u(e,t,null,null)},Yu.prototype.unmount=Qu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){$u(null,e,null,null)})),t[pi]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ru(t,Ze()),0==(6&xl)&&(Bl=Ze()+500,Bi()))}break;case 13:cu((function(){var t=Ns(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),Ku(e,1)}},Et=function(e){if(13===e.tag){var t=Ns(e,134217728);null!==t&&nu(t,e,134217728,eu()),Ku(e,134217728)}},St=function(e){if(13===e.tag){var t=tu(e),n=Ns(e,t);null!==n&&nu(n,e,t,eu()),Ku(e,t)}},kt=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));K(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=uu,Ne=cu;var tc={usingClientEntryPoint:!1,Events:[bi,wi,_i,Te,Ie,uu]},nc={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),st=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zu(t))throw Error(s(200));return Vu(e,t,null,n)},t.createRoot=function(e,t){if(!Zu(e))throw Error(s(299));var n=!1,r="",i=Gu;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=ju(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Xu(t))throw Error(s(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Gu;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qu(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yu(t)},t.render=function(e,t,n){if(!Xu(t))throw Error(s(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(s(40));return!!e._reactRootContainer&&(cu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},745:(e,t,n)=>{"use strict";var r=n(3935);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},3935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(4448)},9921:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case u:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function E(e){return _(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return E(e)||_(e)===c},t.isConcurrentMode=E,t.isContextConsumer=function(e){return _(e)===u},t.isContextProvider=function(e){return _(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===s},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===d||e.$$typeof===v||e.$$typeof===b||e.$$typeof===w||e.$$typeof===y)},t.typeOf=_},9864:(e,t,n)=>{"use strict";e.exports=n(9921)},8359:(e,t)=>{"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen");Symbol.for("react.module.reference")},2973:(e,t,n)=>{"use strict";n(8359)},4727:()=>{Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;for(var i,s,o=0|t,a=Math.max(o>=0?o:r-Math.abs(o),0);a<r;){if((i=n[a])===(s=e)||"number"==typeof i&&"number"==typeof s&&isNaN(i)&&isNaN(s))return!0;a++}return!1}}),Math.sign||(Math.sign=function(e){return(e>0)-(e<0)||+e})},2408:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function x(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+x(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var u=0;u<e.length;u++){var c=s+x(a=e[u],u);l+=N(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,c=s+x(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},A={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:A,ReactCurrentOwner:S};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)E.call(t,u)&&!k.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},7294:(e,t,n)=>{"use strict";e.exports=n(2408)},3488:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=function(e){var t=(0,i.default)(e);return{getItem:function(e){return new Promise((function(n,r){n(t.getItem(e))}))},setItem:function(e,n){return new Promise((function(r,i){r(t.setItem(e,n))}))},removeItem:function(e){return new Promise((function(n,r){n(t.removeItem(e))}))}}};var r,i=(r=n(7290))&&r.__esModule?r:{default:r}},7290:(e,t)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(){}t.__esModule=!0,t.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"==typeof self?"undefined":n(self))||!(e in self))return!1;try{var t=self[e],r="redux-persist ".concat(e," test");t.setItem(r,"test"),t.getItem(r),t.removeItem(r)}catch(e){return!1}return!0}(t)?self[t]:i};var i={getItem:r,setItem:r,removeItem:r}},6734:(e,t,n)=>{"use strict";var r;t.Z=void 0;var i=(0,((r=n(3488))&&r.__esModule?r:{default:r}).default)("local");t.Z=i},53:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function _(e){if(g=!1,w(e),!m)if(null!==r(u))m=!0,A(E);else{var t=r(c);null!==t&&D(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{for(w(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"==typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?d.callback=a:d===r(u)&&i(u),w(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&D(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,C=null,T=-1,I=5,x=-1;function N(){return!(t.unstable_now()-x<I)}function P(){if(null!==C){var e=t.unstable_now();x=e;var n=!0;try{n=C(!0,e)}finally{n?S():(k=!1,C=null)}}else k=!1}if("function"==typeof b)S=function(){b(P)};else if("undefined"!=typeof MessageChannel){var R=new MessageChannel,O=R.port2;R.port1.onmessage=P,S=function(){O.postMessage(null)}}else S=function(){y(P,0)};function A(e){C=e,k||(k=!0,S())}function D(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,A(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(v(T),T=-1):g=!0,D(_,s-o))):(e.sortIndex=a,n(u,e),m||p||(m=!0,A(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},3840:(e,t,n)=>{"use strict";e.exports=n(53)},3379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},o=[],a=0;a<e.length;a++){var l=e[a],u=r.base?l[0]+r.base:l[0],c=s[u]||0,h="".concat(u," ").concat(c);s[u]=c+1;var d=n(h),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(f);else{var p=i(f,r);r.byIndex=a,t.splice(a,0,{identifier:h,updater:p,references:1})}o.push(h)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var s=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=n(s[o]);t[a].references--}for(var l=r(e,i),u=0;u<s.length;u++){var c=n(s[u]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}s=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},3250:(e,t,n)=>{"use strict";var r=n(7294),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=r.useState,o=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return a((function(){i.value=n,i.getSnapshot=t,u(i)&&c({inst:i})}),[e,n,t]),o((function(){return u(i)&&c({inst:i}),e((function(){u(i)&&c({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},139:(e,t,n)=>{"use strict";var r=n(7294),i=n(1688),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useSyncExternalStore,a=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=u((function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return a=t}return a=e}if(t=a,s(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,a=n)}var o,a,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,n,r,i]);var f=o(e,h[0],h[1]);return l((function(){d.hasValue=!0,d.value=f}),[f]),c(f),f}},1688:(e,t,n)=>{"use strict";e.exports=n(3250)},2798:(e,t,n)=>{"use strict";e.exports=n(139)},7061:(e,t,n)=>{var r=n(8698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,s=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,s=Object.create(i.prototype),o=new T(r||[]);return s._invoke=function(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=S(o,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=d(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,o),s}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var f={};function p(){}function m(){}function g(){}var y={};c(y,a,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(I([])));b&&b!==n&&s.call(b,a)&&(y=b);var w=g.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,o,a,l){var u=d(e[i],e,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==r(h)&&s.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,l)}))}l(u.arg)}var i;this._invoke=function(e,r){function s(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(s,s):s()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(s.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:x}}function x(){return{value:void 0,done:!0}}return m.prototype=g,c(w,"constructor",g),c(g,"constructor",m),m.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},_(E.prototype),c(E.prototype,l,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var o=new E(h(e,n,r,i),s);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(w),c(w,u,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=s.call(i,"catchLoc"),l=s.call(i,"finallyLoc");if(a&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},8698:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4687:(e,t,n)=>{var r=n(7061)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},389:(e,t,n)=>{"use strict";n.d(t,{Jn:()=>D,qX:()=>R,Xd:()=>P,Mq:()=>L,ZF:()=>M,KN:()=>F});var r=n(8463),i=n(3333),s=n(4444);let o,a;const l=new WeakMap,u=new WeakMap,c=new WeakMap,h=new WeakMap,d=new WeakMap;let f={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(g(this),e),m(l.get(this))}:function(...e){return m(t.apply(g(this),e))}:function(e,...n){const r=t.call(g(this),e,...n);return c.set(r,e.sort?e.sort():[e]),m(r)}:(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));u.set(e,t)}(e),n=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,f):e);var t,n}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(m(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&l.set(t,e)})).catch((()=>{})),d.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=p(e);return t!==e&&(h.set(e,t),d.set(t,e)),t}const g=e=>d.get(e),y=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],b=new Map;function w(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(b.get(t))return b.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=v.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!y.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return b.set(t,s),s}var _;_=f,f={..._,get:(e,t,n)=>w(e,t)||_.get(e,t,n),has:(e,t)=>!!w(e,t)||_.has(e,t)};class E{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const S="@firebase/app",k="0.7.29",C=new i.Yd("@firebase/app"),T={[S]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},I=new Map,x=new Map;function N(e,t){try{e.container.addComponent(t)}catch(n){C.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function P(e){const t=e.name;if(x.has(t))return C.debug(`There were multiple attempts to register component ${t}.`),!1;x.set(t,e);for(const t of I.values())N(t,e);return!0}function R(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const O=new s.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class A{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw O.create("app-deleted",{appName:this._name})}}const D="9.9.1";function M(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw O.create("bad-app-name",{appName:String(i)});const o=I.get(i);if(o){if((0,s.vZ)(e,o.options)&&(0,s.vZ)(n,o.config))return o;throw O.create("duplicate-app",{appName:i})}const a=new r.H0(i);for(const e of x.values())a.addComponent(e);const l=new A(e,n,a);return I.set(i,l),l}function L(e="[DEFAULT]"){const t=I.get(e);if(!t)throw O.create("no-app",{appName:e});return t}function F(e,t,n){var i;let s=null!==(i=T[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void C.warn(e.join(" "))}P(new r.wA(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const z="firebase-heartbeat-store";let U=null;function j(){return U||(U=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=m(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(m(o.result),e.oldVersion,e.newVersion,m(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(z)}}).catch((e=>{throw O.create("storage-open",{originalErrorMessage:e.message})}))),U}async function V(e,t){var n;try{const n=(await j()).transaction(z,"readwrite"),r=n.objectStore(z);return await r.put(t,B(e)),n.done}catch(e){throw O.create("storage-set",{originalErrorMessage:null===(n=e)||void 0===n?void 0:n.message})}}function B(e){return`${e.name}!${e.options.appId}`}class q{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new W(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=$();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=$(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),H(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),H(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=(0,s.L)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function $(){return(new Date).toISOString().substring(0,10)}class W{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.hl)()&&(0,s.eu)().then((()=>!0)).catch((()=>!1))}async read(){return await this._canUseIndexedDBPromise&&await async function(e){var t;try{return(await j()).transaction(z).objectStore(z).get(B(e))}catch(e){throw O.create("storage-get",{originalErrorMessage:null===(t=e)||void 0===t?void 0:t.message})}}(this.app)||{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return V(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return V(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function H(e){return(0,s.L)(JSON.stringify({version:2,heartbeats:e})).length}P(new r.wA("platform-logger",(e=>new E(e)),"PRIVATE")),P(new r.wA("heartbeat",(e=>new q(e)),"PRIVATE")),F(S,k,""),F(S,k,"esm2017"),F("fire-js","")},8463:(e,t,n)=>{"use strict";n.d(t,{H0:()=>a,wA:()=>i});var r=n(4444);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===s?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},3333:(e,t,n)=>{"use strict";n.d(t,{Yd:()=>u,in:()=>i});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class u{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,(()=>{"use strict";var e=n(7294),t=n(745);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var h,d=n(3379),f=n.n(d),p=n(7795),m=n.n(p),g=n(569),y=n.n(g),v=n(3565),b=n.n(v),w=n(9216),_=n.n(w),E=n(4589),S=n.n(E),k=n(9087),C={};function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)}C.styleTagTransform=S(),C.setAttributes=b(),C.insert=y().bind(null,"head"),C.domAPI=m(),C.insertStyleElement=_(),f()(k.Z,C),k.Z&&k.Z.locals&&k.Z.locals,function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(h||(h={}));var I="beforeunload";function x(e){e.preventDefault(),e.returnValue=""}function N(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function P(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,s=e.hash,o=void 0===s?"":s;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function R(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}const O=(0,e.createContext)(null),A=(0,e.createContext)(null),D=(0,e.createContext)({outlet:null,matches:[]});function M(e,t){if(!e)throw new Error(t)}function L(e,t,n){void 0===n&&(n="/");let r=$(("string"==typeof t?R(t):t).pathname||"/",n);if(null==r)return null;let i=F(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let e=0;null==s&&e<i.length;++e)s=V(i[e],r);return s}function F(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach(((e,i)=>{let s={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(s.relativePath.startsWith(r)||M(!1),s.relativePath=s.relativePath.slice(r.length));let o=W([r,s.relativePath]),a=n.concat(s);e.children&&e.children.length>0&&(!0===e.index&&M(!1),F(e.children,t,a,o)),(null!=e.path||e.index)&&t.push({path:o,score:j(o,e.index),routesMeta:a})})),t}const z=/^:\w+$/,U=e=>"*"===e;function j(e,t){let n=e.split("/"),r=n.length;return n.some(U)&&(r+=-2),t&&(r+=2),n.filter((e=>!U(e))).reduce(((e,t)=>e+(z.test(t)?3:""===t?1:10)),r)}function V(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let e=0;e<n.length;++e){let o=n[e],a=e===n.length-1,l="/"===i?t:t.slice(i.length)||"/",u=B({path:o.relativePath,caseSensitive:o.caseSensitive,end:a},l);if(!u)return null;Object.assign(r,u.params);let c=o.route;s.push({params:r,pathname:W([i,u.pathname]),pathnameBase:H(W([i,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(i=W([i,u.pathnameBase]))}return s}function B(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,((e,t)=>(r.push(t),"([^\\/]+)")));return e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{if("*"===t){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(t){return e}}(a[n]||""),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function q(e,t,n){let r,i="string"==typeof e?R(e):e,s=""===e||""===i.pathname?"/":i.pathname;if(null==s)r=n;else{let e=t.length-1;if(s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}r=e>=0?t[e]:"/"}let o=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"==typeof e?R(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:K(r),hash:G(i)}}(i,r);return s&&"/"!==s&&s.endsWith("/")&&!o.pathname.endsWith("/")&&(o.pathname+="/"),o}function $(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}const W=e=>e.join("/").replace(/\/\/+/g,"/"),H=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",G=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Q(){return null!=(0,e.useContext)(A)}function Y(){return Q()||M(!1),(0,e.useContext)(A).location}function Z(){Q()||M(!1);let{basename:t,navigator:n}=(0,e.useContext)(O),{matches:r}=(0,e.useContext)(D),{pathname:i}=Y(),s=JSON.stringify(r.map((e=>e.pathnameBase))),o=(0,e.useRef)(!1);(0,e.useEffect)((()=>{o.current=!0}));let a=(0,e.useCallback)((function(e,r){if(void 0===r&&(r={}),!o.current)return;if("number"==typeof e)return void n.go(e);let a=q(e,JSON.parse(s),i);"/"!==t&&(a.pathname=W([t,a.pathname])),(r.replace?n.replace:n.push)(a,r.state)}),[t,n,s,i]);return a}function X(t){let{matches:n}=(0,e.useContext)(D),{pathname:r}=Y(),i=JSON.stringify(n.map((e=>e.pathnameBase)));return(0,e.useMemo)((()=>q(t,JSON.parse(i),r)),[t,i,r])}function J(e){M(!1)}function ee(t){let{basename:n="/",children:r=null,location:i,navigationType:s=h.Pop,navigator:o,static:a=!1}=t;Q()&&M(!1);let l=H(n),u=(0,e.useMemo)((()=>({basename:l,navigator:o,static:a})),[l,o,a]);"string"==typeof i&&(i=R(i));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:m="default"}=i,g=(0,e.useMemo)((()=>{let e=$(c,l);return null==e?null:{pathname:e,search:d,hash:f,state:p,key:m}}),[l,c,d,f,p,m]);return null==g?null:(0,e.createElement)(O.Provider,{value:u},(0,e.createElement)(A.Provider,{children:r,value:{location:g,navigationType:s}}))}function te(t){let{children:n,location:r}=t;return function(t,n){Q()||M(!1);let{matches:r}=(0,e.useContext)(D),i=r[r.length-1],s=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;let a,l=Y();if(n){var u;let e="string"==typeof n?R(n):n;"/"===o||(null==(u=e.pathname)?void 0:u.startsWith(o))||M(!1),a=e}else a=l;let c=a.pathname||"/",h=L(t,{pathname:"/"===o?c:c.slice(o.length)||"/"});return function(t,n){return void 0===n&&(n=[]),null==t?null:t.reduceRight(((r,i,s)=>(0,e.createElement)(D.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(t.slice(0,s+1))}})),null)}(h&&h.map((e=>Object.assign({},e,{params:Object.assign({},s,e.params),pathname:W([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:W([o,e.pathnameBase])}))),r)}(ne(n),r)}function ne(t){let n=[];return e.Children.forEach(t,(t=>{if(!(0,e.isValidElement)(t))return;if(t.type===e.Fragment)return void n.push.apply(n,ne(t.props.children));t.type!==J&&M(!1);let r={caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path};t.props.children&&(r.children=ne(t.props.children)),n.push(r)})),n}function re(){return re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},re.apply(this,arguments)}const ie=["onClick","reloadDocument","replace","state","target","to"];function se(t){let{basename:n,children:r,window:i}=t,s=(0,e.useRef)();null==s.current&&(s.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=R(n.location.hash.substr(1)),t=e.pathname,i=void 0===t?"/":t,s=e.search,o=void 0===s?"":s,a=e.hash,l=void 0===a?"":a,u=r.state||{};return[u.idx,{pathname:i,search:o,hash:l,state:u.usr||null,key:u.key||"default"}]}var s=null;function o(){if(s)f.call(s),s=null;else{var e=h.Pop,t=i(),n=t[0],r=t[1];if(f.length){if(null!=n){var o=u-n;o&&(s={action:e,location:r,retry:function(){b(-1*o)}},b(o))}}else v(e)}}n.addEventListener("popstate",o),n.addEventListener("hashchange",(function(){P(i()[1])!==P(c)&&o()}));var a=h.Pop,l=i(),u=l[0],c=l[1],d=N(),f=N();function p(e){return function(){var e=document.querySelector("base"),t="";if(e&&e.getAttribute("href")){var r=n.location.href,i=r.indexOf("#");t=-1===i?r:r.slice(0,i)}return t}()+"#"+("string"==typeof e?e:P(e))}function m(e,t){return void 0===t&&(t=null),T({pathname:c.pathname,hash:"",search:""},"string"==typeof e?R(e):e,{state:t,key:Math.random().toString(36).substr(2,8)})}function g(e,t){return[{usr:e.state,key:e.key,idx:t},p(e)]}function y(e,t,n){return!f.length||(f.call({action:e,location:t,retry:n}),!1)}function v(e){a=e;var t=i();u=t[0],c=t[1],d.call({action:a,location:c})}function b(e){r.go(e)}null==u&&(u=0,r.replaceState(T({},r.state,{idx:u}),""));var w={get action(){return a},get location(){return c},createHref:p,push:function e(t,i){var s=h.Push,o=m(t,i);if(y(s,o,(function(){e(t,i)}))){var a=g(o,u+1),l=a[0],c=a[1];try{r.pushState(l,"",c)}catch(e){n.location.assign(c)}v(s)}},replace:function e(t,n){var i=h.Replace,s=m(t,n);if(y(i,s,(function(){e(t,n)}))){var o=g(s,u),a=o[0],l=o[1];r.replaceState(a,"",l),v(i)}},go:b,back:function(){b(-1)},forward:function(){b(1)},listen:function(e){return d.push(e)},block:function(e){var t=f.push(e);return 1===f.length&&n.addEventListener(I,x),function(){t(),f.length||n.removeEventListener(I,x)}}};return w}({window:i}));let o=s.current,[a,l]=(0,e.useState)({action:o.action,location:o.location});return(0,e.useLayoutEffect)((()=>o.listen(l)),[o]),(0,e.createElement)(ee,{basename:n,children:r,location:a.location,navigationType:a.action,navigator:o})}const oe=(0,e.forwardRef)((function(t,n){let{onClick:r,reloadDocument:i,replace:s=!1,state:o,target:a,to:l}=t,u=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,ie),c=function(t){Q()||M(!1);let{basename:n,navigator:r}=(0,e.useContext)(O),{hash:i,pathname:s,search:o}=X(t),a=s;if("/"!==n){let e=function(e){return""===e||""===e.pathname?"/":"string"==typeof e?R(e).pathname:e.pathname}(t),r=null!=e&&e.endsWith("/");a="/"===s?n+(r?"/":""):W([n,s])}return r.createHref({pathname:a,search:o,hash:i})}(l),h=function(t,n){let{target:r,replace:i,state:s}=void 0===n?{}:n,o=Z(),a=Y(),l=X(t);return(0,e.useCallback)((e=>{if(!(0!==e.button||r&&"_self"!==r||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))){e.preventDefault();let n=!!i||P(a)===P(l);o(t,{replace:n,state:s})}}),[a,o,l,i,s,r,t])}(l,{replace:s,state:o,target:a});return(0,e.createElement)("a",re({},u,{href:c,onClick:function(e){r&&r(e),e.defaultPrevented||i||h(e)},ref:n,target:a}))}));var ae=n(1688),le=n(2798),ue=n(3935);let ce=function(e){e()};const he=()=>ce,de=e.createContext(null);function fe(){return(0,e.useContext)(de)}let pe=()=>{throw new Error("uSES not initialized!")};const me=(e,t)=>e===t;function ge(t=de){const n=t===de?fe:()=>(0,e.useContext)(t);return function(t,r=me){const{store:i,subscription:s,getServerState:o}=n(),a=pe(s.addNestedSub,i.getState,o||i.getState,t,r);return(0,e.useDebugValue)(a),a}}const ye=ge();n(8679),n(2973);const ve={notify(){},get:()=>[]};const be="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?e.useLayoutEffect:e.useEffect;let we=null;const _e=function({store:t,context:n,children:r,serverState:i}){const s=(0,e.useMemo)((()=>{const e=function(e,t){let n,r=ve;function i(){o.onStateChange&&o.onStateChange()}function s(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){const e=he();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}const o={addNestedSub:function(e){return s(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:s,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=ve)},getListeners:()=>r};return o}(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0}}),[t,i]),o=(0,e.useMemo)((()=>t.getState()),[t]);be((()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[s,o]);const a=n||de;return e.createElement(a.Provider,{value:s},r)};function Ee(t=de){const n=t===de?fe:()=>(0,e.useContext)(t);return function(){const{store:e}=n();return e}}const Se=Ee();function ke(e=de){const t=e===de?Se:Ee(e);return function(){return t().dispatch}}const Ce=ke();var Te,Ie;function xe(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ne(e){return!!e&&!!e[mt]}function Pe(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===gt}(e)||Array.isArray(e)||!!e[pt]||!!e.constructor[pt]||Le(e)||Fe(e))}function Re(e,t,n){void 0===n&&(n=!1),0===Oe(e)?(n?Object.keys:yt)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function Oe(e){var t=e[mt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Le(e)?2:Fe(e)?3:0}function Ae(e,t){return 2===Oe(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function De(e,t,n){var r=Oe(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function Me(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Le(e){return ct&&e instanceof Map}function Fe(e){return ht&&e instanceof Set}function ze(e){return e.o||e.t}function Ue(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=vt(e);delete t[mt];for(var n=yt(t),r=0;r<n.length;r++){var i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function je(e,t){return void 0===t&&(t=!1),Be(e)||Ne(e)||!Pe(e)||(Oe(e)>1&&(e.set=e.add=e.clear=e.delete=Ve),Object.freeze(e),t&&Re(e,(function(e,t){return je(t,!0)}),!0)),e}function Ve(){xe(2)}function Be(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function qe(e){var t=bt[e];return t||xe(18,e),t}function $e(){return lt}function We(e,t){t&&(qe("Patches"),e.u=[],e.s=[],e.v=t)}function He(e){Ke(e),e.p.forEach(Qe),e.p=null}function Ke(e){e===lt&&(lt=e.l)}function Ge(e){return lt={p:[],l:lt,h:e,m:!0,_:0}}function Qe(e){var t=e[mt];0===t.i||1===t.i?t.j():t.O=!0}function Ye(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||qe("ES5").S(t,e,r),r?(n[mt].P&&(He(t),xe(4)),Pe(e)&&(e=Ze(t,e),t.l||Je(t,e)),t.u&&qe("Patches").M(n[mt].t,e,t.u,t.s)):e=Ze(t,n,[]),He(t),t.u&&t.v(t.u,t.s),e!==ft?e:void 0}function Ze(e,t,n){if(Be(t))return t;var r=t[mt];if(!r)return Re(t,(function(i,s){return Xe(e,r,t,i,s,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Je(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Ue(r.k):r.o;Re(3===r.i?new Set(i):i,(function(t,s){return Xe(e,r,i,t,s,n)})),Je(e,i,!1),n&&e.u&&qe("Patches").R(r,n,e.u,e.s)}return r.o}function Xe(e,t,n,r,i,s){if(Ne(i)){var o=Ze(e,i,s&&t&&3!==t.i&&!Ae(t.D,r)?s.concat(r):void 0);if(De(n,r,o),!Ne(o))return;e.m=!1}if(Pe(i)&&!Be(i)){if(!e.h.F&&e._<1)return;Ze(e,i),t&&t.A.l||Je(e,i)}}function Je(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&je(t,n)}function et(e,t){var n=e[mt];return(n?ze(n):e)[t]}function tt(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function nt(e){e.P||(e.P=!0,e.l&&nt(e.l))}function rt(e){e.o||(e.o=Ue(e.t))}function it(e,t,n){var r=Le(t)?qe("MapSet").N(t,n):Fe(t)?qe("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:$e(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,s=wt;n&&(i=[r],s=_t);var o=Proxy.revocable(i,s),a=o.revoke,l=o.proxy;return r.k=l,r.j=a,l}(t,n):qe("ES5").J(t,n);return(n?n.A:$e()).p.push(r),r}function st(e){return Ne(e)||xe(22,e),function e(t){if(!Pe(t))return t;var n,r=t[mt],i=Oe(t);if(r){if(!r.P&&(r.i<4||!qe("ES5").K(r)))return r.t;r.I=!0,n=ot(t,i),r.I=!1}else n=ot(t,i);return Re(n,(function(t,i){r&&function(e,t){return 2===Oe(e)?e.get(t):e[t]}(r.t,t)===i||De(n,t,e(i))})),3===i?new Set(n):n}(e)}function ot(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ue(e)}Ie=le.useSyncExternalStoreWithSelector,pe=Ie,(e=>{we=e})(ae.useSyncExternalStore),Te=ue.unstable_batchedUpdates,ce=Te;var at,lt,ut="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),ct="undefined"!=typeof Map,ht="undefined"!=typeof Set,dt="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,ft=ut?Symbol.for("immer-nothing"):((at={})["immer-nothing"]=!0,at),pt=ut?Symbol.for("immer-draftable"):"__$immer_draftable",mt=ut?Symbol.for("immer-state"):"__$immer_state",gt=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),yt="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,vt=Object.getOwnPropertyDescriptors||function(e){var t={};return yt(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},bt={},wt={get:function(e,t){if(t===mt)return e;var n=ze(e);if(!Ae(n,t))return function(e,t,n){var r,i=tt(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!Pe(r)?r:r===et(e.t,t)?(rt(e),e.o[t]=it(e.A.h,r,e)):r},has:function(e,t){return t in ze(e)},ownKeys:function(e){return Reflect.ownKeys(ze(e))},set:function(e,t,n){var r=tt(ze(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=et(ze(e),t),s=null==i?void 0:i[mt];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Me(n,i)&&(void 0!==n||Ae(e.t,t)))return!0;rt(e),nt(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==et(e.t,t)||t in e.t?(e.D[t]=!1,rt(e),nt(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=ze(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){xe(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){xe(12)}},_t={};Re(wt,(function(e,t){_t[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),_t.deleteProperty=function(e,t){return _t.set.call(this,e,t,void 0)},_t.set=function(e,t,n){return wt.set.call(this,e[0],t,n,e[0])};var Et=function(){function e(e){var t=this;this.g=dt,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var s=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return s.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&xe(6),void 0!==r&&"function"!=typeof r&&xe(7),Pe(e)){var a=Ge(t),l=it(t,e,void 0),u=!0;try{o=n(l),u=!1}finally{u?He(a):Ke(a)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return We(a,r),Ye(e,a)}),(function(e){throw He(a),e})):(We(a,r),Ye(o,a))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===ft&&(o=void 0),t.F&&je(o,!0),r){var c=[],h=[];qe("Patches").M(e,o,c,h),r(c,h)}return o}xe(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,s=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return[e,r,i]})):[s,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){Pe(e)||xe(8),Ne(e)&&(e=st(e));var t=Ge(this),n=it(this,e,void 0);return n[mt].C=!0,Ke(t),n},t.finishDraft=function(e,t){var n=(e&&e[mt]).A;return We(n,t),Ye(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!dt&&xe(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=qe("Patches").$;return Ne(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),St=new Et;function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function It(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}St.produce,St.produceWithPatches.bind(St),St.setAutoFreeze.bind(St),St.setUseProxies.bind(St),St.applyPatches.bind(St),St.createDraft.bind(St),St.finishDraft.bind(St);var xt="function"==typeof Symbol&&Symbol.observable||"@@observable",Nt=function(){return Math.random().toString(36).substring(7).split("").join(".")},Pt={INIT:"@@redux/INIT"+Nt(),REPLACE:"@@redux/REPLACE"+Nt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Nt()}};function Rt(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ot(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(It(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(It(1));return n(Ot)(e,t)}if("function"!=typeof e)throw new Error(It(2));var i=e,s=t,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function c(){if(l)throw new Error(It(3));return s}function h(e){if("function"!=typeof e)throw new Error(It(4));if(l)throw new Error(It(5));var t=!0;return u(),a.push(e),function(){if(t){if(l)throw new Error(It(6));t=!1,u();var n=a.indexOf(e);a.splice(n,1),o=null}}}function d(e){if(!Rt(e))throw new Error(It(7));if(void 0===e.type)throw new Error(It(8));if(l)throw new Error(It(9));try{l=!0,s=i(s,e)}finally{l=!1}for(var t=o=a,n=0;n<t.length;n++)(0,t[n])();return e}function f(e){if("function"!=typeof e)throw new Error(It(10));i=e,d({type:Pt.REPLACE})}function p(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(It(11));function n(){e.next&&e.next(c())}return n(),{unsubscribe:t(n)}}})[xt]=function(){return this},e}return d({type:Pt.INIT}),(r={dispatch:d,subscribe:h,getState:c,replaceReducer:f})[xt]=p,r}function At(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var s,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:Pt.INIT}))throw new Error(It(12));if(void 0===n(void 0,{type:Pt.PROBE_UNKNOWN_ACTION()}))throw new Error(It(13))}))}(n)}catch(e){s=e}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var r=!1,i={},a=0;a<o.length;a++){var l=o[a],u=n[l],c=e[l],h=u(c,t);if(void 0===h)throw t&&t.type,new Error(It(14));i[l]=h,r=r||h!==c}return(r=r||o.length!==Object.keys(e).length)?i:e}}function Dt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Mt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(It(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=t.map((function(e){return e(i)}));return r=Dt.apply(void 0,s)(n.dispatch),Tt(Tt({},n),{},{dispatch:r})}}}function Lt(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}var Ft=Lt();Ft.withExtraArgument=Lt;const zt=Ft;var Ut,jt=(Ut=function(e,t){return Ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ut(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ut(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Vt=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Bt=Object.defineProperty,qt=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),$t=Object.prototype.hasOwnProperty,Wt=Object.prototype.propertyIsEnumerable,Ht=function(e,t,n){return t in e?Bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Kt=function(e,t){for(var n in t||(t={}))$t.call(t,n)&&Ht(e,n,t[n]);if(qt)for(var r=0,i=qt(t);r<i.length;r++)n=i[r],Wt.call(t,n)&&Ht(e,n,t[n]);return e},Gt="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Dt:Dt.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var Qt=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return jt(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Vt([void 0],e[0].concat(this)))):new(t.bind.apply(t,Vt([void 0],e.concat(this))))},t}(Array);function Yt(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return Kt(Kt({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}Object.assign;var Zt="listenerMiddleware";Yt(Zt+"/add"),Yt(Zt+"/removeAll"),Yt(Zt+"/remove"),function(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[mt];return wt.get(t,e)},set:function(t){var n=this[mt];wt.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][mt];if(!i.P)switch(i.i){case 5:r(i)&&nt(i);break;case 4:n(i)&&nt(i)}}}function n(e){for(var t=e.t,n=e.k,r=yt(n),i=r.length-1;i>=0;i--){var s=r[i];if(s!==mt){var o=t[s];if(void 0===o&&!Ae(t,s))return!0;var a=n[s],l=a&&a[mt];if(l?l.t!==o:!Me(a,o))return!0}}var u=!!t[mt];return r.length!==yt(t).length+(u?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};!function(e,t){bt[e]||(bt[e]=t)}("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var s=vt(n);delete s[mt];for(var o=yt(s),a=0;a<o.length;a++){var l=o[a];s[l]=e(l,t||!!s[l].enumerable)}return Object.create(Object.getPrototypeOf(n),s)}(r,t),s={i:r?5:4,A:n?n.A:$e(),P:!1,I:!1,D:{},l:n,t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,mt,{value:s,writable:!0}),i},S:function(e,n,i){i?Ne(n)&&n[mt].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[mt];if(n){var i=n.t,s=n.k,o=n.D,a=n.i;if(4===a)Re(s,(function(t){t!==mt&&(void 0!==i[t]||Ae(i,t)?o[t]||e(s[t]):(o[t]=!0,nt(n)))})),Re(i,(function(e){void 0!==s[e]||Ae(s,e)||(o[e]=!1,nt(n))}));else if(5===a){if(r(n)&&(nt(n),o.length=!0),s.length<i.length)for(var l=s.length;l<i.length;l++)o[l]=!1;else for(var u=i.length;u<s.length;u++)o[u]=!0;for(var c=Math.min(s.length,i.length),h=0;h<c;h++)s.hasOwnProperty(h)||(o[h]=!0),void 0===o[h]&&e(s[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}();var Xt="persist:",Jt="persist/FLUSH",en="persist/REHYDRATE",tn="persist/PAUSE",nn="persist/PERSIST",rn="persist/PURGE",sn="persist/REGISTER";function on(e){return on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(e)}function an(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function un(e,t,n,r){r.debug;var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?an(n,!0).forEach((function(t){ln(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);return e&&"object"===on(e)&&Object.keys(e).forEach((function(r){"_persist"!==r&&t[r]===n[r]&&(i[r]=e[r])})),i}function cn(e){return JSON.stringify(e)}function hn(e){var t,n=e.transforms||[],r="".concat(void 0!==e.keyPrefix?e.keyPrefix:Xt).concat(e.key),i=e.storage;return e.debug,t=!1===e.deserialize?function(e){return e}:"function"==typeof e.deserialize?e.deserialize:dn,i.getItem(r).then((function(e){if(e)try{var r={},i=t(e);return Object.keys(i).forEach((function(e){r[e]=n.reduceRight((function(t,n){return n.out(t,e,i)}),t(i[e]))})),r}catch(e){throw e}}))}function dn(e){return JSON.parse(e)}function fn(e){}function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(n,!0).forEach((function(t){gn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(n,!0).forEach((function(t){wn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _n={registry:[],bootstrapped:!1},En=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sn:return bn({},e,{registry:[].concat(yn(e.registry),[t.key])});case en:var n=e.registry.indexOf(t.key),r=yn(e.registry);return r.splice(n,1),bn({},e,{registry:r,bootstrapped:0===r.length});default:return e}},Sn=n(6734),kn="CLEAR_TREE_DATA",Cn="SET_BASE_NODE",Tn="SET_SHELVES",In="SET_HISTORY",xn="SET_SEARCH_RESULTS",Nn="SET_COMMENTS",Pn=function(e){return{type:Tn,payload:e}},Rn=function(e){return{type:In,payload:e}},On=function(e){return{type:xn,payload:e}};function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(Object(n),!0).forEach((function(t){kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mn={baseId:"KSLC3E9YXXNJNKx23LqV",shelves:[],history:[],searchResults:[],comments:[]},Ln="CLEAR_PROFILE_DATA",Fn="SET_USER_ID",zn="SET_CURRENT_ID",Un="SET_FIRST_NAME",jn="SET_LAST_NAME",Vn="SET_USER_NAME",Bn=function(e){return{type:Un,payload:e}},qn=function(e){return{type:jn,payload:e}},$n=function(e){return{type:Vn,payload:e}};function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kn,Gn,Qn,Yn,Zn,Xn,Jn,er,tr,nr,rr={userId:"default",currentId:"default",firstName:"FirstName",lastName:"LastName",userName:"UserName"},ir=At({treeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case kn:return Dn({},Mn);case Cn:return Dn(Dn({},e),{},{baseNodeId:t.payload});case Tn:return Dn(Dn({},e),{},{shelves:t.payload});case In:return Dn(Dn({},e),{},{history:t.payload});case xn:return Dn(Dn({},e),{},{searchResults:t.payload});case Nn:return Dn(Dn({},e),{},{comments:t.payload});default:return e}},profileReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ln:return Hn({},rr);case Fn:return Hn(Hn({},e),{},{userId:t.payload});case zn:return Hn(Hn({},e),{},{currentId:t.payload});case Un:return Hn(Hn({},e),{},{firstName:t.payload});case jn:return Hn(Hn({},e),{},{lastName:t.payload});case Vn:return Hn(Hn({},e),{},{userName:t.payload});default:return e}}}),sr=(Kn={key:"root",version:1,storage:Sn.Z},Gn=ir,Qn=void 0!==Kn.version?Kn.version:-1,Yn=void 0===Kn.stateReconciler?un:Kn.stateReconciler,Zn=Kn.getStoredState||hn,Xn=void 0!==Kn.timeout?Kn.timeout:5e3,Jn=null,er=!1,tr=!0,nr=function(e){return e._persist.rehydrated&&Jn&&!tr&&Jn.update(e),e},function(e,t){var n=e||{},r=n._persist,i=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(n,["_persist"]);if(t.type===nn){var s=!1,o=function(e,n){s||(t.rehydrate(Kn.key,e,n),s=!0)};if(Xn&&setTimeout((function(){!s&&o(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(Kn.key,'"')))}),Xn),tr=!1,Jn||(Jn=function(e){var t,n=e.blacklist||null,r=e.whitelist||null,i=e.transforms||[],s=e.throttle||0,o="".concat(void 0!==e.keyPrefix?e.keyPrefix:Xt).concat(e.key),a=e.storage;t=!1===e.serialize?function(e){return e}:"function"==typeof e.serialize?e.serialize:cn;var l=e.writeFailHandler||null,u={},c={},h=[],d=null,f=null;function p(){if(0===h.length)return d&&clearInterval(d),void(d=null);var e=h.shift(),n=i.reduce((function(t,n){return n.in(t,e,u)}),u[e]);if(void 0!==n)try{c[e]=t(n)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete c[e];0===h.length&&(Object.keys(c).forEach((function(e){void 0===u[e]&&delete c[e]})),f=a.setItem(o,t(c)).catch(g))}function m(e){return!(r&&-1===r.indexOf(e)&&"_persist"!==e||n&&-1!==n.indexOf(e))}function g(e){l&&l(e)}return{update:function(e){Object.keys(e).forEach((function(t){m(t)&&u[t]!==e[t]&&-1===h.indexOf(t)&&h.push(t)})),Object.keys(u).forEach((function(t){void 0===e[t]&&m(t)&&-1===h.indexOf(t)&&void 0!==u[t]&&h.push(t)})),null===d&&(d=setInterval(p,s)),u=e},flush:function(){for(;0!==h.length;)p();return f||Promise.resolve()}}}(Kn)),r)return mn({},Gn(i,t),{_persist:r});if("function"!=typeof t.rehydrate||"function"!=typeof t.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return t.register(Kn.key),Zn(Kn).then((function(e){var t=Kn.migrate||function(e,t){return Promise.resolve(e)};t(e,Qn).then((function(e){o(e)}),(function(e){o(void 0,e)}))}),(function(e){o(void 0,e)})),mn({},Gn(i,t),{_persist:{version:Qn,rehydrated:!1}})}if(t.type===rn)return er=!0,t.result(function(e){var t=e.storage,n="".concat(void 0!==e.keyPrefix?e.keyPrefix:Xt).concat(e.key);return t.removeItem(n,fn)}(Kn)),mn({},Gn(i,t),{_persist:r});if(t.type===Jt)return t.result(Jn&&Jn.flush()),mn({},Gn(i,t),{_persist:r});if(t.type===tn)tr=!0;else if(t.type===en){if(er)return mn({},i,{_persist:mn({},r,{rehydrated:!0})});if(t.key===Kn.key){var a=Gn(i,t),l=t.payload,u=mn({},!1!==Yn&&void 0!==l?Yn(l,e,a,Kn):a,{_persist:mn({},r,{rehydrated:!0})});return nr(u)}}if(!r)return Gn(e,t);var c=Gn(i,t);return c===i?e:nr(mn({},c,{_persist:r}))});const or=function(e){var t,n=function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new Qt);return n&&(function(e){return"boolean"==typeof e}(n)?r.push(zt):r.push(zt.withExtraArgument(n.extraArgument))),r}(e)},r=e||{},i=r.reducer,s=void 0===i?void 0:i,o=r.middleware,a=void 0===o?n():o,l=r.devTools,u=void 0===l||l,c=r.preloadedState,h=void 0===c?void 0:c,d=r.enhancers,f=void 0===d?void 0:d;if("function"==typeof s)t=s;else{if(!function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}(s))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=At(s)}var p=a;"function"==typeof p&&(p=p(n));var m=Mt.apply(void 0,p),g=Dt;u&&(g=Gt(Kt({trace:!1},"object"==typeof u&&u)));var y=[m];return Array.isArray(f)?y=Vt([m],f):"function"==typeof f&&(y=f(y)),Ot(t,h,g.apply(void 0,y))}({reducer:sr,middleware:function(e){return e({serializableCheck:{ignoredActions:[Jt,en,tn,nn,rn,sn]}})}});function ar(e){return ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(e)}function lr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cr(e,t){return!t||"object"!==ar(t)&&"function"!=typeof t?dr(e):t}function hr(e){return hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},hr(e)}function dr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fr(e,t){return fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fr(e,t)}function pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mr=function(e){function t(){var e,n;lr(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return pr(dr(n=cr(this,(e=hr(t)).call.apply(e,[this].concat(i)))),"state",{bootstrapped:!1}),pr(dr(n),"_unsubscribe",void 0),pr(dr(n),"handlePersistorState",(function(){n.props.persistor.getState().bootstrapped&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally((function(){return n.setState({bootstrapped:!0})})):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())})),n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fr(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return"function"==typeof this.props.children?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}])&&ur(n.prototype,r),t}(e.PureComponent);pr(mr,"defaultProps",{children:null,loading:null});var gr=n(9429),yr={};function vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function br(e,t){if(e){if("string"==typeof e)return vr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vr(e,t):void 0}}function wr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||br(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}yr.styleTagTransform=S(),yr.setAttributes=b(),yr.insert=y().bind(null,"head"),yr.domAPI=m(),yr.insertStyleElement=_(),f()(gr.Z,yr),gr.Z&&gr.Z.locals&&gr.Z.locals;var _r=n(3070),Er={};Er.styleTagTransform=S(),Er.setAttributes=b(),Er.insert=y().bind(null,"head"),Er.domAPI=m(),Er.insertStyleElement=_(),f()(_r.Z,Er),_r.Z&&_r.Z.locals&&_r.Z.locals;var Sr=n(4191),kr={};function Cr(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function Tr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){Cr(s,r,i,o,a,"next",e)}function a(e){Cr(s,r,i,o,a,"throw",e)}o(void 0)}))}}kr.styleTagTransform=S(),kr.setAttributes=b(),kr.insert=y().bind(null,"head"),kr.domAPI=m(),kr.insertStyleElement=_(),f()(Sr.Z,kr),Sr.Z&&Sr.Z.locals&&Sr.Z.locals;var Ir=n(4687),xr=n.n(Ir),Nr=n(1243),Pr={};function Rr(e){return function(e){if(Array.isArray(e))return vr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||br(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Pr.styleTagTransform=S(),Pr.setAttributes=b(),Pr.insert=y().bind(null,"head"),Pr.domAPI=m(),Pr.insertStyleElement=_(),f()(Nr.Z,Pr),Nr.Z&&Nr.Z.locals&&Nr.Z.locals;var Or=n(389);(0,Or.KN)("firebase","9.9.1","app");var Ar=n(7937),Dr=Ar.initializeAppCheck,Mr=Ar.ReCaptchaEnterpriseProvider,Lr=(0,Or.ZF)({apiKey:"AIzaSyB4_4075Md9QlnKfrfRe8Uvb31ZWY5D8os",authDomain:"tree-x.firebaseapp.com",databaseURL:"https://tree-x-default-rtdb.firebaseio.com",projectId:"tree-x",storageBucket:"tree-x.appspot.com",messagingSenderId:"913227203137",appId:"1:913227203137:web:06e2301224b551bc75bcc0",measurementId:"G-2BMT70LMDD"});Dr(Lr,{provider:new Mr("6LeX4AAhAAAAAEEsPhPOZ5p39Vbk7GBhTDYGFxoW"),isTokenAutoRefreshEnabled:!0});const Fr=Lr;var zr,Ur=s((function e(t,n){r(this,e),this.id=t,this.name=n})),jr=s((function e(t,n,i,s,o,a,l){r(this,e),kt(this,"version","1.0.1"),this.creationDateTime=t,this.creatorIds=n,this.creatorId=i,this.creatorUserName=s,this.parentReferences=o,this.childrenReferences=a,this.selfReference=l})),Vr={toFirestore:function(e){var t=[];e.parentReferences.forEach((function(e){t.push({id:e.id,name:e.name})}));var n=[];e.childrenReferences.forEach((function(e){n.push({id:e.id,name:e.name})}));var r={id:e.selfReference.id,name:e.selfReference.name};return{version:e.version,creationDateTime:e.creationDateTime,creatorIds:e.creatorIds,creatorId:e.creatorId,creatorUserName:e.creatorUserName,parentReferences:t,childrenReferences:n,selfReference:r}},fromFirestore:function(e,t){var n=e.data(t),r=[];n.parentReferences.forEach((function(e){r.push(new Ur(e.id,e.name))}));var i=[];n.childrenReferences.forEach((function(e){i.push(new Ur(e.id,e.name))}));var s=new Ur(n.selfReference.id,n.selfReference.name);return new jr(n.creationDateTime,n.creatorIds,n.creatorId,n.creatorUserName,r,i,s)}},Br=n(8463),qr=n(3333),$r=n(4444),Wr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},Hr={},Kr=Kr||{},Gr=Wr||self;function Qr(){}function Yr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Zr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Xr="closure_uid_"+(1e9*Math.random()>>>0),Jr=0;function ei(e,t,n){return e.call.apply(e.bind,arguments)}function ti(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ni(e,t,n){return(ni=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ei:ti).apply(null,arguments)}function ri(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ii(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function si(){this.s=this.s,this.o=this.o}var oi={};si.prototype.s=!1,si.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Xr)&&e[Xr]||(e[Xr]=++Jr)}(this);delete oi[e]}},si.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ai=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},li=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function ui(e){return Array.prototype.concat.apply([],arguments)}function ci(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function hi(e){return/^[\s\xa0]*$/.test(e)}var di,fi=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function pi(e,t){return-1!=e.indexOf(t)}function mi(e,t){return e<t?-1:e>t?1:0}e:{var gi=Gr.navigator;if(gi){var yi=gi.userAgent;if(yi){di=yi;break e}}di=""}function vi(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function bi(e){const t={};for(const n in e)t[n]=e[n];return t}var wi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _i(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<wi.length;t++)n=wi[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ei(e){return Ei[" "](e),e}Ei[" "]=Qr;var Si,ki=pi(di,"Opera"),Ci=pi(di,"Trident")||pi(di,"MSIE"),Ti=pi(di,"Edge"),Ii=Ti||Ci,xi=pi(di,"Gecko")&&!(pi(di.toLowerCase(),"webkit")&&!pi(di,"Edge"))&&!(pi(di,"Trident")||pi(di,"MSIE"))&&!pi(di,"Edge"),Ni=pi(di.toLowerCase(),"webkit")&&!pi(di,"Edge");function Pi(){var e=Gr.document;return e?e.documentMode:void 0}e:{var Ri="",Oi=function(){var e=di;return xi?/rv:([^\);]+)(\)|;)/.exec(e):Ti?/Edge\/([\d\.]+)/.exec(e):Ci?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ni?/WebKit\/(\S+)/.exec(e):ki?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Oi&&(Ri=Oi?Oi[1]:""),Ci){var Ai=Pi();if(null!=Ai&&Ai>parseFloat(Ri)){Si=String(Ai);break e}}Si=Ri}var Di,Mi={};function Li(){return function(e){var t=Mi;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let e=0;const t=fi(String(Si)).split("."),n=fi("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=mi(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||mi(0==i[2].length,0==s[2].length)||mi(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}()}()}Gr.document&&Ci?Di=Pi()||parseInt(Si,10)||void 0:Di=void 0;var Fi=Di,zi=function(){if(!Gr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Gr.addEventListener("test",Qr,t),Gr.removeEventListener("test",Qr,t)}catch(e){}return e}();function Ui(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ji(e,t){if(Ui.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(xi){e:{try{Ei(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Vi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ji.Z.h.call(this)}}Ui.prototype.h=function(){this.defaultPrevented=!0},ii(ji,Ui);var Vi={2:"touch",3:"pen",4:"mouse"};ji.prototype.h=function(){ji.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Bi="closure_listenable_"+(1e6*Math.random()|0),qi=0;function $i(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++qi,this.ca=this.fa=!1}function Wi(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Hi(e){this.src=e,this.g={},this.h=0}function Ki(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=ai(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Wi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Gi(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}Hi.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Gi(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new $i(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var Qi="closure_lm_"+(1e6*Math.random()|0),Yi={};function Zi(e,t,n,r,i){if(r&&r.once)return Ji(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Zi(e,t[s],n,r,i);return null}return n=os(n),e&&e[Bi]?e.N(t,n,Zr(r)?!!r.capture:!!r,i):Xi(e,t,n,!1,r,i)}function Xi(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Zr(i)?!!i.capture:!!i,a=is(e);if(a||(e[Qi]=a=new Hi(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=rs;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)zi||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ns(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ji(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Ji(e,t[s],n,r,i);return null}return n=os(n),e&&e[Bi]?e.O(t,n,Zr(r)?!!r.capture:!!r,i):Xi(e,t,n,!0,r,i)}function es(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)es(e,t[s],n,r,i);else r=Zr(r)?!!r.capture:!!r,n=os(n),e&&e[Bi]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=Gi(s=e.g[t],n,r,i))&&(Wi(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=is(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Gi(t,n,r,i)),(n=-1<e?t[e]:null)&&ts(n))}function ts(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Bi])Ki(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ns(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=is(t))?(Ki(n,e),0==n.h&&(n.src=null,t[Qi]=null)):Wi(e)}}}function ns(e){return e in Yi?Yi[e]:Yi[e]="on"+e}function rs(e,t){if(e.ca)e=!0;else{t=new ji(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&ts(e),e=n.call(r,t)}return e}function is(e){return(e=e[Qi])instanceof Hi?e:null}var ss="__closure_events_fn_"+(1e9*Math.random()>>>0);function os(e){return"function"==typeof e?e:(e[ss]||(e[ss]=function(t){return e.handleEvent(t)}),e[ss])}function as(){si.call(this),this.i=new Hi(this),this.P=this,this.I=null}function ls(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Ui(t,e);else if(t instanceof Ui)t.target=t.target||e;else{var i=t;_i(t=new Ui(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=us(o,r,!0,t)&&i}if(i=us(o=t.g=e,r,!0,t)&&i,i=us(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=us(o=t.g=n[s],r,!1,t)&&i}function us(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&Ki(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}ii(as,si),as.prototype[Bi]=!0,as.prototype.removeEventListener=function(e,t,n,r){es(this,e,t,n,r)},as.prototype.M=function(){if(as.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Wi(n[r]);delete t.g[e],t.h--}}this.I=null},as.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},as.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var cs=Gr.JSON.stringify;function hs(){var e=vs;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ds,fs=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new ps),(e=>e.reset()));class ps{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ms(e){Gr.setTimeout((()=>{throw e}),0)}function gs(e,t){ds||function(){var e=Gr.Promise.resolve(void 0);ds=function(){e.then(bs)}}(),ys||(ds(),ys=!0),vs.add(e,t)}var ys=!1,vs=new class{constructor(){this.h=this.g=null}add(e,t){const n=fs.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function bs(){for(var e;e=hs();){try{e.h.call(e.g)}catch(e){ms(e)}var t=fs;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ys=!1}function ws(e,t){as.call(this),this.h=e||1,this.g=t||Gr,this.j=ni(this.kb,this),this.l=Date.now()}function _s(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Es(e,t,n){if("function"==typeof e)n&&(e=ni(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ni(e.handleEvent,e)}return 2147483647<Number(t)?-1:Gr.setTimeout(e,t||0)}function Ss(e){e.g=Es((()=>{e.g=null,e.i&&(e.i=!1,Ss(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ii(ws,as),(zr=ws.prototype).da=!1,zr.S=null,zr.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ls(this,"tick"),this.da&&(_s(this),this.start()))}},zr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},zr.M=function(){ws.Z.M.call(this),_s(this),delete this.g};class ks extends si{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ss(this)}M(){super.M(),this.g&&(Gr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cs(e){si.call(this),this.h=e,this.g={}}ii(Cs,si);var Ts=[];function Is(e,t,n,r){Array.isArray(n)||(n&&(Ts[0]=n.toString()),n=Ts);for(var i=0;i<n.length;i++){var s=Zi(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function xs(e){vi(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ts(e)}),e),e.g={}}function Ns(){this.g=!0}function Ps(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return cs(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Cs.prototype.M=function(){Cs.Z.M.call(this),xs(this)},Cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ns.prototype.Aa=function(){this.g=!1},Ns.prototype.info=function(){};var Rs={},Os=null;function As(){return Os=Os||new as}function Ds(e){Ui.call(this,Rs.Ma,e)}function Ms(e){const t=As();ls(t,new Ds(t,e))}function Ls(e,t){Ui.call(this,Rs.STAT_EVENT,e),this.stat=t}function Fs(e){const t=As();ls(t,new Ls(t,e))}function zs(e,t){Ui.call(this,Rs.Na,e),this.size=t}function Us(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Gr.setTimeout((function(){e()}),t)}Rs.Ma="serverreachability",ii(Ds,Ui),Rs.STAT_EVENT="statevent",ii(Ls,Ui),Rs.Na="timingevent",ii(zs,Ui);var js={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Vs={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Bs(){}function qs(e){return e.h||(e.h=e.i())}function $s(){}Bs.prototype.h=null;var Ws,Hs={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ks(){Ui.call(this,"d")}function Gs(){Ui.call(this,"c")}function Qs(){}function Ys(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Cs(this),this.P=Xs,e=Ii?125:void 0,this.W=new ws(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Zs}function Zs(){this.i=null,this.g="",this.h=!1}ii(Ks,Ui),ii(Gs,Ui),ii(Qs,Bs),Qs.prototype.g=function(){return new XMLHttpRequest},Qs.prototype.i=function(){return{}},Ws=new Qs;var Xs=45e3,Js={},eo={};function to(e,t,n){e.K=1,e.v=Co(bo(t)),e.s=n,e.U=!0,no(e,null)}function no(e,t){e.F=Date.now(),oo(e),e.A=bo(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),zo(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Zs,e.g=za(e.l,n?t:null,!e.s),0<e.O&&(e.L=new ks(ni(e.Ia,e,e.g),e.O)),Is(e.V,e.g,"readystatechange",e.gb),t=e.H?bi(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ms(1),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function ro(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function io(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=so(e,n),r==eo){4==t&&(e.o=4,Fs(14),i=!1),Ps(e.j,e.m,null,"[Incomplete Response]");break}if(r==Js){e.o=4,Fs(15),Ps(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ps(e.j,e.m,r,null),ho(e,r)}ro(e)&&r!=eo&&r!=Js&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Fs(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Pa(t),t.L=!0,Fs(11))):(Ps(e.j,e.m,n,"[Invalid Chunked Response]"),co(e),uo(e))}function so(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?eo:(n=Number(t.substring(n,r)),isNaN(n)?Js:(r+=1)+n>t.length?eo:(t=t.substr(r,n),e.C=r+n,t))}function oo(e){e.Y=Date.now()+e.P,ao(e,e.P)}function ao(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Us(ni(e.eb,e),t)}function lo(e){e.B&&(Gr.clearTimeout(e.B),e.B=null)}function uo(e){0==e.l.G||e.I||Aa(e.l,e)}function co(e){lo(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,_s(e.W),xs(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ho(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||$o(n.i,e)))if(n.I=e.N,!e.J&&$o(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Oa(n),_a(n)}Na(n),Fs(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Us(ni(n.ab,n),6e3));if(1>=qo(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else Ma(n,11)}else if((e.J||n.g==e)&&Oa(n),!hi(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.U=u[0],u=u[1],2==n.G)if("c"==u[0]){n.J=u[1],n.la=u[2];const t=u[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const i=u[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const c=u[5];null!=c&&"number"==typeof c&&0<c&&(r=1.5*c,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;!s.g&&(pi(e,"spdy")||pi(e,"quic")||pi(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Wo(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,ko(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((r=n).oa=Fa(r,r.H?r.la:null,r.W),o.J){Ho(r.i,o);var a=o,l=r.K;l&&a.setTimeout(l),a.B&&(lo(a),oo(a)),r.g=o}else xa(r);0<n.l.length&&ka(n)}else"stop"!=u[0]&&"close"!=u[0]||Ma(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Ma(n,7):wa(n):"noop"!=u[0]&&n.j&&n.j.wa(u),n.A=0)}Ms(4)}catch(e){}}function fo(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Yr(e)||"string"==typeof e)li(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Yr(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Yr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function po(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof po)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function mo(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];go(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)go(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function go(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(zr=Ys.prototype).setTimeout=function(e){this.P=e},zr.gb=function(e){e=e.target;const t=this.L;t&&3==ma(e)?t.l():this.Ia(e)},zr.Ia=function(e){try{if(e==this.g)e:{const c=ma(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>c)&&(3!=c||Ii||this.g&&(this.h.h||this.g.ga()||ga(this.g)))){this.I||4!=c||7==t||Ms(8==t||0>=h?3:2),lo(this);var n=this.g.ba();this.N=n;t:if(ro(this)){var r=ga(this.g);e="";var i=r.length,s=4==ma(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){co(this),uo(this);var o="";break t}this.h.i=new Gr.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,c,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hi(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,Fs(12),co(this),uo(this);break e}Ps(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ho(this,n)}this.U?(io(this,c,o),Ii&&this.i&&3==c&&(Is(this.V,this.W,"tick",this.fb),this.W.start())):(Ps(this.j,this.m,o,null),ho(this,o)),4==c&&co(this),this.i&&!this.I&&(4==c?Aa(this.l,this):(this.i=!1,oo(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Fs(12)):(this.o=0,Fs(13)),co(this),uo(this)}}}catch(e){}},zr.fb=function(){if(this.g){var e=ma(this.g),t=this.g.ga();this.C<t.length&&(lo(this),io(this,e,t),this.i&&4!=e&&oo(this))}},zr.cancel=function(){this.I=!0,co(this)},zr.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Ms(3),Fs(17)),co(this),this.o=2,uo(this)):ao(this,this.Y-e)},(zr=po.prototype).R=function(){mo(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},zr.T=function(){return mo(this),this.g.concat()},zr.get=function(e,t){return go(this.h,e)?this.h[e]:t},zr.set=function(e,t){go(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},zr.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var yo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vo(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof vo){this.g=void 0!==t?t:e.g,wo(this,e.j),this.s=e.s,_o(this,e.i),Eo(this,e.m),this.l=e.l,t=e.h;var n=new Do;n.i=t.i,t.g&&(n.g=new po(t.g),n.h=t.h),So(this,n),this.o=e.o}else e&&(n=String(e).match(yo))?(this.g=!!t,wo(this,n[1]||"",!0),this.s=To(n[2]||""),_o(this,n[3]||"",!0),Eo(this,n[4]),this.l=To(n[5]||"",!0),So(this,n[6]||"",!0),this.o=To(n[7]||"")):(this.g=!!t,this.h=new Do(null,this.g))}function bo(e){return new vo(e)}function wo(e,t,n){e.j=n?To(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function _o(e,t,n){e.i=n?To(t,!0):t}function Eo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function So(e,t,n){t instanceof Do?(e.h=t,function(e,t){t&&!e.j&&(Mo(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Lo(this,t),zo(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Io(t,Oo)),e.h=new Do(t,e.g))}function ko(e,t,n){e.h.set(t,n)}function Co(e){return ko(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function To(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Io(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,xo),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function xo(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}vo.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Io(t,No,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Io(t,No,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Io(n,"/"==n.charAt(0)?Ro:Po,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Io(n,Ao)),e.join("")};var No=/[#\/\?@]/g,Po=/[#\?:]/g,Ro=/[#\?]/g,Oo=/[#\?@]/g,Ao=/#/g;function Do(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Mo(e){e.g||(e.g=new po,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Lo(e,t){Mo(e),t=Uo(e,t),go(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,go((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&mo(e)))}function Fo(e,t){return Mo(e),t=Uo(e,t),go(e.g.h,t)}function zo(e,t,n){Lo(e,t),0<n.length&&(e.i=null,e.g.set(Uo(e,t),ci(n)),e.h+=n.length)}function Uo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function jo(e){this.l=e||Vo,e=Gr.PerformanceNavigationTiming?0<(e=Gr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Gr.g&&Gr.g.Ea&&Gr.g.Ea()&&Gr.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(zr=Do.prototype).add=function(e,t){Mo(this),this.i=null,e=Uo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},zr.forEach=function(e,t){Mo(this),this.g.forEach((function(n,r){li(n,(function(n){e.call(t,n,r,this)}),this)}),this)},zr.T=function(){Mo(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},zr.R=function(e){Mo(this);var t=[];if("string"==typeof e)Fo(this,e)&&(t=ui(t,this.g.get(Uo(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ui(t,e[n])}return t},zr.set=function(e,t){return Mo(this),this.i=null,Fo(this,e=Uo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},zr.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},zr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var Vo=10;function Bo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function qo(e){return e.h?1:e.g?e.g.size:0}function $o(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Wo(e,t){e.g?e.g.add(t):e.h=t}function Ho(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ko(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return ci(e.i)}function Go(){}function Qo(){this.g=new Go}function Yo(e,t,n){const r=n||"";try{fo(e,(function(e,n){let i=e;Zr(e)&&(i=cs(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Zo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function Xo(e){this.l=e.$b||null,this.j=e.ib||!1}function Jo(e,t){as.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ea,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jo.prototype.cancel=function(){if(this.i=Ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},Go.prototype.stringify=function(e){return Gr.JSON.stringify(e,void 0)},Go.prototype.parse=function(e){return Gr.JSON.parse(e,void 0)},ii(Xo,Bs),Xo.prototype.g=function(){return new Jo(this.l,this.j)},Xo.prototype.i=function(e){return function(){return e}}({}),ii(Jo,as);var ea=0;function ta(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function na(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ra(e)}function ra(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(zr=Jo.prototype).open=function(e,t){if(this.readyState!=ea)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ra(this)},zr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Gr).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},zr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,na(this)),this.readyState=ea},zr.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ra(this)),this.g&&(this.readyState=3,ra(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Gr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ta(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},zr.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?na(this):ra(this),3==this.readyState&&ta(this)}},zr.Ua=function(e){this.g&&(this.response=this.responseText=e,na(this))},zr.Ta=function(e){this.g&&(this.response=e,na(this))},zr.ha=function(){this.g&&na(this)},zr.setRequestHeader=function(e,t){this.v.append(e,t)},zr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},zr.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Jo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ia=Gr.JSON.parse;function sa(e){as.call(this),this.headers=new po,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=oa,this.K=this.L=!1}ii(sa,as);var oa="",aa=/^https?$/i,la=["POST","PUT"];function ua(e){return"content-type"==e.toLowerCase()}function ca(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ha(e),fa(e)}function ha(e){e.D||(e.D=!0,ls(e,"complete"),ls(e,"error"))}function da(e){if(e.h&&void 0!==Kr&&(!e.C[1]||4!=ma(e)||2!=e.ba()))if(e.v&&4==ma(e))Es(e.Fa,0,e);else if(ls(e,"readystatechange"),4==ma(e)){e.h=!1;try{const a=e.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.H).match(yo)[1]||null;if(!i&&Gr.self&&Gr.self.location){var s=Gr.self.location.protocol;i=s.substr(0,s.length-1)}r=!aa.test(i?i.toLowerCase():"")}n=r}if(n)ls(e,"complete"),ls(e,"success");else{e.m=6;try{var o=2<ma(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.ba()+"]",ha(e)}}finally{fa(e)}}}function fa(e,t){if(e.g){pa(e);const n=e.g,r=e.C[0]?Qr:null;e.g=null,e.C=null,t||ls(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function pa(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Gr.clearTimeout(e.A),e.A=null)}function ma(e){return e.g?e.g.readyState:0}function ga(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case oa:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ya(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return vi(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ko(e,t,n))}function va(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ba(e){this.za=0,this.l=[],this.h=new Ns,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=va("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=va("baseRetryDelayMs",5e3,e),this.$a=va("retryDelaySeedMs",1e4,e),this.Ya=va("forwardChannelMaxRetries",2,e),this.ra=va("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new jo(e&&e.concurrentRequestLimit),this.Ca=new Qo,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function wa(e){if(Ea(e),3==e.G){var t=e.V++,n=bo(e.F);ko(n,"SID",e.J),ko(n,"RID",t),ko(n,"TYPE","terminate"),Ta(e,n),(t=new Ys(e,e.h,t,void 0)).K=2,t.v=Co(bo(n)),n=!1,Gr.navigator&&Gr.navigator.sendBeacon&&(n=Gr.navigator.sendBeacon(t.v.toString(),"")),!n&&Gr.Image&&((new Image).src=t.v,n=!0),n||(t.g=za(t.l,null),t.g.ea(t.v)),t.F=Date.now(),oo(t)}La(e)}function _a(e){e.g&&(Pa(e),e.g.cancel(),e.g=null)}function Ea(e){_a(e),e.u&&(Gr.clearTimeout(e.u),e.u=null),Oa(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Gr.clearTimeout(e.m),e.m=null)}function Sa(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&ka(e)}function ka(e){Bo(e.i)||e.m||(e.m=!0,gs(e.Ha,e),e.C=0)}function Ca(e,t){var n;n=t?t.m:e.V++;const r=bo(e.F);ko(r,"SID",e.J),ko(r,"RID",n),ko(r,"AID",e.U),Ta(e,r),e.o&&e.s&&ya(r,e.o,e.s),n=new Ys(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Ia(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Wo(e.i,n),to(n,r,t)}function Ta(e,t){e.j&&fo({},(function(e,n){ko(t,n,e)}))}function Ia(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ni(e.j.Oa,e.j,e):null;e:{var i=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{Yo(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function xa(e){e.g||e.u||(e.Y=1,gs(e.Ga,e),e.A=0)}function Na(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=Us(ni(e.Ga,e),Da(e,e.A)),e.A++,0))}function Pa(e){null!=e.B&&(Gr.clearTimeout(e.B),e.B=null)}function Ra(e){e.g=new Ys(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=bo(e.oa);ko(t,"RID","rpc"),ko(t,"SID",e.J),ko(t,"CI",e.N?"0":"1"),ko(t,"AID",e.U),Ta(e,t),ko(t,"TYPE","xmlhttp"),e.o&&e.s&&ya(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Co(bo(t)),n.s=null,n.U=!0,no(n,e)}function Oa(e){null!=e.v&&(Gr.clearTimeout(e.v),e.v=null)}function Aa(e,t){var n=null;if(e.g==t){Oa(e),Pa(e),e.g=null;var r=2}else{if(!$o(e.i,t))return;n=t.D,Ho(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ls(r=As(),new zs(r,n,t,i)),ka(e)}else xa(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(qo(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Us(ni(e.Ha,e,t),Da(e,e.C)),e.C++,0)))}(e,t)||2==r&&Na(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ma(e,5);break;case 4:Ma(e,10);break;case 3:Ma(e,6);break;default:Ma(e,2)}}function Da(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Ma(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ni(e.jb,e);n||(n=new vo("//www.google.com/images/cleardot.gif"),Gr.location&&"http"==Gr.location.protocol||wo(n,"https"),Co(n)),function(e,t){const n=new Ns;if(Gr.Image){const r=new Image;r.onload=ri(Zo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ri(Zo,n,r,"TestLoadImage: error",!1,t),r.onabort=ri(Zo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ri(Zo,n,r,"TestLoadImage: timeout",!1,t),Gr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Fs(2);e.G=0,e.j&&e.j.va(t),La(e),Ea(e)}function La(e){e.G=0,e.I=-1,e.j&&(0==Ko(e.i).length&&0==e.l.length||(e.i.i.length=0,ci(e.l),e.l.length=0),e.j.ua())}function Fa(e,t,n){let r=function(e){return e instanceof vo?bo(e):new vo(e,void 0)}(n);if(""!=r.i)t&&_o(r,t+"."+r.i),Eo(r,r.m);else{const e=Gr.location;r=function(e,t,n,r){var i=new vo(null,void 0);return e&&wo(i,e),t&&_o(i,t),n&&Eo(i,n),r&&(i.l=r),i}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&vi(e.aa,(function(e,t){ko(r,t,e)})),t=e.D,n=e.sa,t&&n&&ko(r,t,n),ko(r,"VER",e.ma),Ta(e,r),r}function za(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new sa(new Xo({ib:!0})):new sa(e.qa)).L=e.H,t}function Ua(){}function ja(){if(Ci&&!(10<=Number(Fi)))throw Error("Environmental error: no available transport.")}function Va(e,t){as.call(this),this.g=new ba(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!hi(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!hi(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new $a(this)}function Ba(e){Ks.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function qa(){Gs.call(this),this.status=1}function $a(e){this.g=e}(zr=sa.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ws.g(),this.C=this.u?qs(this.u):qs(Ws),this.g.onreadystatechange=ni(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void ca(this,e)}e=n||"";const i=new po(this.headers);r&&fo(r,(function(e,t){i.set(t,e)})),r=function(e){e:{var t=ua;const n=e.length,r="string"==typeof e?e.split(""):e;for(let i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=Gr.FormData&&e instanceof Gr.FormData,!(0<=ai(la,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pa(this),0<this.B&&((this.K=function(e){return Ci&&Li()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ni(this.pa,this)):this.A=Es(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){ca(this,e)}},zr.pa=function(){void 0!==Kr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ls(this,"timeout"),this.abort(8))},zr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ls(this,"complete"),ls(this,"abort"),fa(this))},zr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fa(this,!0)),sa.Z.M.call(this)},zr.Fa=function(){this.s||(this.F||this.v||this.l?da(this):this.cb())},zr.cb=function(){da(this)},zr.ba=function(){try{return 2<ma(this)?this.g.status:-1}catch(e){return-1}},zr.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},zr.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ia(t)}},zr.Da=function(){return this.m},zr.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(zr=ba.prototype).ma=8,zr.G=1,zr.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},zr.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Ys(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=bi(s),_i(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Ia(this,i,t),ko(n=bo(this.F),"RID",e),ko(n,"CVER",22),this.D&&ko(n,"X-HTTP-Session-Id",this.D),Ta(this,n),this.o&&s&&ya(n,this.o,s),Wo(this.i,i),this.Ra&&ko(n,"TYPE","init"),this.ja?(ko(n,"$req",t),ko(n,"SID","null"),i.$=!0,to(i,n,null)):to(i,n,t),this.G=2}}else 3==this.G&&(e?Ca(this,e):0==this.l.length||Bo(this.i)||Ca(this))},zr.Ga=function(){if(this.u=null,Ra(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Us(ni(this.bb,this),e)}},zr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Fs(10),_a(this),Ra(this))},zr.ab=function(){null!=this.v&&(this.v=null,_a(this),Na(this),Fs(19))},zr.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Fs(2)):(this.h.info("Failed to ping google.com"),Fs(1))},(zr=Ua.prototype).xa=function(){},zr.wa=function(){},zr.va=function(){},zr.ua=function(){},zr.Oa=function(){},ja.prototype.g=function(e,t){return new Va(e,t)},ii(Va,as),Va.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),gs(ni(e.hb,e,t))),Fs(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Fa(e,null,e.W),ka(e)},Va.prototype.close=function(){wa(this.g)},Va.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Sa(this.g,t)}else this.v?((t={}).__data__=cs(e),Sa(this.g,t)):Sa(this.g,e)},Va.prototype.M=function(){this.g.j=null,delete this.j,wa(this.g),delete this.g,Va.Z.M.call(this)},ii(Ba,Ks),ii(qa,Gs),ii($a,Ua),$a.prototype.xa=function(){ls(this.g,"a")},$a.prototype.wa=function(e){ls(this.g,new Ba(e))},$a.prototype.va=function(e){ls(this.g,new qa(e))},$a.prototype.ua=function(){ls(this.g,"b")},ja.prototype.createWebChannel=ja.prototype.g,Va.prototype.send=Va.prototype.u,Va.prototype.open=Va.prototype.m,Va.prototype.close=Va.prototype.close,js.NO_ERROR=0,js.TIMEOUT=8,js.HTTP_ERROR=6,Vs.COMPLETE="complete",$s.EventType=Hs,Hs.OPEN="a",Hs.CLOSE="b",Hs.ERROR="c",Hs.MESSAGE="d",as.prototype.listen=as.prototype.N,sa.prototype.listenOnce=sa.prototype.O,sa.prototype.getLastError=sa.prototype.La,sa.prototype.getLastErrorCode=sa.prototype.Da,sa.prototype.getStatus=sa.prototype.ba,sa.prototype.getResponseJson=sa.prototype.Qa,sa.prototype.getResponseText=sa.prototype.ga,sa.prototype.send=sa.prototype.ea;var Wa=Hr.createWebChannelTransport=function(){return new ja},Ha=Hr.getStatEventTarget=function(){return As()},Ka=Hr.ErrorCode=js,Ga=Hr.EventType=Vs,Qa=Hr.Event=Rs,Ya=Hr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Za=Hr.FetchXmlHttpFactory=Xo,Xa=Hr.WebChannel=$s,Ja=Hr.XhrIo=sa;const el="@firebase/firestore";class tl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tl.UNAUTHENTICATED=new tl(null),tl.GOOGLE_CREDENTIALS=new tl("google-credentials-uid"),tl.FIRST_PARTY=new tl("first-party-uid"),tl.MOCK_USER=new tl("mock-user");let nl="9.9.1";const rl=new qr.Yd("@firebase/firestore");function il(){return rl.logLevel}function sl(e,...t){if(rl.logLevel<=qr.in.DEBUG){const n=t.map(ll);rl.debug(`Firestore (${nl}): ${e}`,...n)}}function ol(e,...t){if(rl.logLevel<=qr.in.ERROR){const n=t.map(ll);rl.error(`Firestore (${nl}): ${e}`,...n)}}function al(e,...t){if(rl.logLevel<=qr.in.WARN){const n=t.map(ll);rl.warn(`Firestore (${nl}): ${e}`,...n)}}function ll(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ul(e="Unexpected state"){const t=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: `+e;throw ol(t),new Error(t)}function cl(e,t){e||ul()}function hl(e,t){return e}const dl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fl extends $r.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ml{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tl.UNAUTHENTICATED)))}shutdown(){}}class yl{constructor(e){this.t=e,this.currentUser=tl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new pl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new pl,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{sl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(sl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new pl)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(sl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(cl("string"==typeof t.accessToken),new ml(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return cl(null===e||"string"==typeof e),new tl(e)}}class vl{constructor(e,t,n){this.type="FirstParty",this.user=tl.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class bl{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new vl(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(tl.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _l{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const n=e=>{null!=e.error&&sl("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.p;return this.p=e.token,sl("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{sl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?r(e):sl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(cl("string"==typeof e.token),this.p=e.token,new wl(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function El(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class Sl{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=El(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function kl(e,t){return e<t?-1:e>t?1:0}function Cl(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Tl{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fl(dl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fl(dl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new fl(dl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fl(dl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tl.fromMillis(Date.now())}static fromDate(e){return Tl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Tl(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kl(this.nanoseconds,e.nanoseconds):kl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Il{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Il(e)}static min(){return new Il(new Tl(0,0))}static max(){return new Il(new Tl(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class xl{constructor(e,t,n){void 0===t?t=0:t>e.length&&ul(),void 0===n?n=e.length-t:n>e.length-t&&ul(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===xl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xl?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Nl extends xl{construct(e,t,n){return new Nl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new fl(dl.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new Nl(t)}static emptyPath(){return new Nl([])}}const Pl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rl extends xl{construct(e,t,n){return new Rl(e,t,n)}static isValidIdentifier(e){return Pl.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rl.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Rl(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new fl(dl.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new fl(dl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new fl(dl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new fl(dl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rl(t)}static emptyPath(){return new Rl([])}}class Ol{constructor(e){this.path=e}static fromPath(e){return new Ol(Nl.fromString(e))}static fromName(e){return new Ol(Nl.fromString(e).popFirst(5))}static empty(){return new Ol(Nl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Nl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Nl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ol(new Nl(e.slice()))}}function Al(e){return new Dl(e.readTime,e.key,-1)}class Dl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Dl(Il.min(),Ol.empty(),-1)}static max(){return new Dl(Il.max(),Ol.empty(),-1)}}function Ml(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ol.comparator(e.documentKey,t.documentKey),0!==n?n:kl(e.largestBatchId,t.largestBatchId))}async function Ll(e){if(e.code!==dl.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;sl("LocalStore","Unexpectedly lost primary lease")}class Fl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ul(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Fl(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Fl?t:Fl.resolve(t)}catch(e){return Fl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Fl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Fl.reject(t)}static resolve(e){return new Fl(((t,n)=>{t(e)}))}static reject(e){return new Fl(((t,n)=>{n(e)}))}static waitFor(e){return new Fl(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Fl.resolve(!1);for(const n of e)t=t.next((e=>e?Fl.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Fl(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Fl(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function zl(e){return"IndexedDbTransactionError"===e.name}class Ul{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.it(e),this.rt=e=>t.writeSequenceNumber(e))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function jl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Vl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Bl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Ul.ot=-1;class ql{constructor(e,t){this.comparator=e,this.root=t||Wl.EMPTY}insert(e,t){return new ql(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wl.BLACK,null,null))}remove(e){return new ql(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $l(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $l(this.root,e,this.comparator,!1)}getReverseIterator(){return new $l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $l(this.root,e,this.comparator,!0)}}class $l{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Wl.RED,this.left=null!=r?r:Wl.EMPTY,this.right=null!=i?i:Wl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Wl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Wl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Wl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ul();if(this.right.isRed())throw ul();const e=this.left.check();if(e!==this.right.check())throw ul();return e+(this.isRed()?0:1)}}Wl.EMPTY=null,Wl.RED=!0,Wl.BLACK=!1,Wl.EMPTY=new class{constructor(){this.size=0}get key(){throw ul()}get value(){throw ul()}get color(){throw ul()}get left(){throw ul()}get right(){throw ul()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Wl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hl{constructor(e){this.comparator=e,this.data=new ql(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Kl(this.data.getIterator())}getIteratorFrom(e){return new Kl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Hl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Hl(this.comparator);return t.data=e,t}}class Kl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Gl{constructor(e){this.fields=e,e.sort(Rl.comparator)}static empty(){return new Gl([])}unionWith(e){let t=new Hl(Rl.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new Gl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cl(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Ql{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ql(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ql(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ql.EMPTY_BYTE_STRING=new Ql("");const Yl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zl(e){if(cl(!!e),"string"==typeof e){let t=0;const n=Yl.exec(e);if(cl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Xl(e.seconds),nanos:Xl(e.nanos)}}function Xl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Jl(e){return"string"==typeof e?Ql.fromBase64String(e):Ql.fromUint8Array(e)}function eu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tu(e){const t=e.mapValue.fields.__previous_value__;return eu(t)?tu(t):t}function nu(e){const t=Zl(e.mapValue.fields.__local_write_time__.timestampValue);return new Tl(t.seconds,t.nanos)}class ru{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class iu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new iu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof iu&&e.projectId===this.projectId&&e.database===this.database}}function su(e){return null==e}function ou(e){return 0===e&&1/e==-1/0}const au={fields:{__type__:{stringValue:"__max__"}}};function lu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?eu(e)?4:Eu(e)?9007199254740991:10:ul()}function uu(e,t){if(e===t)return!0;const n=lu(e);if(n!==lu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return nu(e).isEqual(nu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Zl(e.timestampValue),r=Zl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Jl(e.bytesValue).isEqual(Jl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Xl(e.geoPointValue.latitude)===Xl(t.geoPointValue.latitude)&&Xl(e.geoPointValue.longitude)===Xl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Xl(e.integerValue)===Xl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Xl(e.doubleValue),r=Xl(t.doubleValue);return n===r?ou(n)===ou(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Cl(e.arrayValue.values||[],t.arrayValue.values||[],uu);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(jl(n)!==jl(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!uu(n[e],r[e])))return!1;return!0}(e,t);default:return ul()}}function cu(e,t){return void 0!==(e.values||[]).find((e=>uu(e,t)))}function hu(e,t){if(e===t)return 0;const n=lu(e),r=lu(t);if(n!==r)return kl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return kl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Xl(e.integerValue||e.doubleValue),r=Xl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return du(e.timestampValue,t.timestampValue);case 4:return du(nu(e),nu(t));case 5:return kl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Jl(e),r=Jl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=kl(n[e],r[e]);if(0!==t)return t}return kl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=kl(Xl(e.latitude),Xl(t.latitude));return 0!==n?n:kl(Xl(e.longitude),Xl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=hu(n[e],r[e]);if(t)return t}return kl(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===au&&t===au)return 0;if(e===au)return 1;if(t===au)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=kl(r[e],s[e]);if(0!==t)return t;const o=hu(n[r[e]],i[s[e]]);if(0!==o)return o}return kl(r.length,s.length)}(e.mapValue,t.mapValue);default:throw ul()}}function du(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return kl(e,t);const n=Zl(e),r=Zl(t),i=kl(n.seconds,r.seconds);return 0!==i?i:kl(n.nanos,r.nanos)}function fu(e){return pu(e)}function pu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Zl(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Jl(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ol.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=pu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${pu(e.fields[i])}`;return n+"}"}(e.mapValue):ul();var t,n}function mu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function gu(e){return!!e&&"integerValue"in e}function yu(e){return!!e&&"arrayValue"in e}function vu(e){return!!e&&"nullValue"in e}function bu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function wu(e){return!!e&&"mapValue"in e}function _u(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Vl(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=_u(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=_u(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Eu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Su{constructor(e){this.value=e}static empty(){return new Su({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!wu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(t)}setAll(e){let t=Rl.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=_u(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());wu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return uu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];wu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Vl(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new Su(_u(this.value))}}function ku(e){const t=[];return Vl(e.fields,((e,n)=>{const r=new Rl([e]);if(wu(n)){const e=ku(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Gl(t)}class Cu{constructor(e,t,n,r,i,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new Cu(e,0,Il.min(),Il.min(),Su.empty(),0)}static newFoundDocument(e,t,n){return new Cu(e,1,t,Il.min(),n,0)}static newNoDocument(e,t){return new Cu(e,2,t,Il.min(),Su.empty(),0)}static newUnknownDocument(e,t){return new Cu(e,3,t,Il.min(),Su.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Su.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Su.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Il.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cu(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tu{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ut=null}}function Iu(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Tu(e,t,n,r,i,s,o)}function xu(e){const t=hl(e);if(null===t.ut){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>{return(t=e).field.canonicalString()+t.op.toString()+fu(t.value);var t})).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),su(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>fu(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>fu(e))).join(",")),t.ut=e}return t.ut}function Nu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Bu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(n=e.filters[i],r=t.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!uu(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$u(e.startAt,t.startAt)&&$u(e.endAt,t.endAt)}function Pu(e){return Ol.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ru extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,n):new Ou(e,t,n):"array-contains"===t?new Lu(e,n):"in"===t?new Fu(e,n):"not-in"===t?new zu(e,n):"array-contains-any"===t?new Uu(e,n):new Ru(e,t,n)}static ct(e,t,n){return"in"===t?new Au(e,n):new Du(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(hu(t,this.value)):null!==t&&lu(this.value)===lu(t)&&this.at(hu(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ul()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ou extends Ru{constructor(e,t,n){super(e,t,n),this.key=Ol.fromName(n.referenceValue)}matches(e){const t=Ol.comparator(e.key,this.key);return this.at(t)}}class Au extends Ru{constructor(e,t){super(e,"in",t),this.keys=Mu(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Du extends Ru{constructor(e,t){super(e,"not-in",t),this.keys=Mu(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Mu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ol.fromName(e.referenceValue)))}class Lu extends Ru{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yu(t)&&cu(t.arrayValue,this.value)}}class Fu extends Ru{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&cu(this.value.arrayValue,t)}}class zu extends Ru{constructor(e,t){super(e,"not-in",t)}matches(e){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!cu(this.value.arrayValue,t)}}class Uu extends Ru{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>cu(this.value.arrayValue,e)))}}class ju{constructor(e,t){this.position=e,this.inclusive=t}}class Vu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Bu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function qu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Ol.comparator(Ol.fromName(o.referenceValue),n.key):hu(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function $u(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!uu(e.position[n],t.position[n]))return!1;return!0}class Wu{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.lt=null,this.ft=null,this.startAt,this.endAt}}function Hu(e){return new Wu(e)}function Ku(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Gu(e){for(const t of e.filters)if(t.ht())return t.field;return null}function Qu(e){return null!==e.collectionGroup}function Yu(e){const t=hl(e);if(null===t.lt){t.lt=[];const e=Gu(t),n=Ku(t);if(null!==e&&null===n)e.isKeyField()||t.lt.push(new Vu(e)),t.lt.push(new Vu(Rl.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.lt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new Vu(Rl.keyField(),e))}}}return t.lt}function Zu(e){const t=hl(e);if(!t.ft)if("F"===t.limitType)t.ft=Iu(t.path,t.collectionGroup,Yu(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of Yu(t)){const t="desc"===n.dir?"asc":"desc";e.push(new Vu(n.field,t))}const n=t.endAt?new ju(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ju(t.startAt.position,t.startAt.inclusive):null;t.ft=Iu(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.ft}function Xu(e,t){return Nu(Zu(e),Zu(t))&&e.limitType===t.limitType}function Ju(e){return`${xu(Zu(e))}|lt:${e.limitType}`}function ec(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${fu(t.value)}`;var t})).join(", ")}]`),su(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>fu(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>fu(e))).join(",")),`Target(${t})`}(Zu(e))}; limitType=${e.limitType})`}function tc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ol.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=qu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Yu(e),t)||e.endAt&&!function(e,t,n){const r=qu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Yu(e),t))}(e,t)}function nc(e){return(t,n)=>{let r=!1;for(const i of Yu(e)){const e=rc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function rc(e,t,n){const r=e.field.isKeyField()?Ol.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?hu(r,i):ul()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ul()}}function ic(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ou(t)?"-0":t}}function sc(e){return{integerValue:""+e}}function oc(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!ou(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?sc(t):ic(e,t)}class ac{constructor(){this._=void 0}}function lc(e,t,n){return e instanceof hc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof dc?fc(e,t):e instanceof pc?mc(e,t):function(e,t){const n=cc(e,t),r=yc(n)+yc(e._t);return gu(n)&&gu(e._t)?sc(r):ic(e.wt,r)}(e,t)}function uc(e,t,n){return e instanceof dc?fc(e,t):e instanceof pc?mc(e,t):n}function cc(e,t){return e instanceof gc?gu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class hc extends ac{}class dc extends ac{constructor(e){super(),this.elements=e}}function fc(e,t){const n=vc(t);for(const t of e.elements)n.some((e=>uu(e,t)))||n.push(t);return{arrayValue:{values:n}}}class pc extends ac{constructor(e){super(),this.elements=e}}function mc(e,t){let n=vc(t);for(const t of e.elements)n=n.filter((e=>!uu(e,t)));return{arrayValue:{values:n}}}class gc extends ac{constructor(e,t){super(),this.wt=e,this._t=t}}function yc(e){return Xl(e.integerValue||e.doubleValue)}function vc(e){return yu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class bc{constructor(e,t){this.version=e,this.transformResults=t}}class wc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wc}static exists(e){return new wc(void 0,e)}static updateTime(e){return new wc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _c(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ec{}function Sc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ac(e.key,wc.none()):new xc(e.key,e.data,wc.none());{const n=e.data,r=Su.empty();let i=new Hl(Rl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Nc(e.key,r,new Gl(i.toArray()),wc.none())}}function kc(e,t,n){e instanceof xc?function(e,t,n){const r=e.value.clone(),i=Rc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Nc?function(e,t,n){if(!_c(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Rc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Pc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Cc(e,t,n,r){return e instanceof xc?function(e,t,n,r){if(!_c(e.precondition,t))return n;const i=e.value.clone(),s=Oc(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Nc?function(e,t,n,r){if(!_c(e.precondition,t))return n;const i=Oc(e.fieldTransforms,r,t),s=t.data;return s.setAll(Pc(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return _c(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Tc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=cc(r.transform,e||null);null!=i&&(null===n&&(n=Su.empty()),n.set(r.field,i))}return n||null}function Ic(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Cl(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof dc&&t instanceof dc||e instanceof pc&&t instanceof pc?Cl(e.elements,t.elements,uu):e instanceof gc&&t instanceof gc?uu(e._t,t._t):e instanceof hc&&t instanceof hc}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class xc extends Ec{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Nc extends Ec{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Pc(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Rc(e,t,n){const r=new Map;cl(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,uc(o,a,n[i]))}return r}function Oc(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,lc(e,s,t))}return r}class Ac extends Ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Dc extends Ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Mc{constructor(e){this.count=e}}var Lc,Fc;function zc(e){if(void 0===e)return ol("GRPC error has no .code"),dl.UNKNOWN;switch(e){case Lc.OK:return dl.OK;case Lc.CANCELLED:return dl.CANCELLED;case Lc.UNKNOWN:return dl.UNKNOWN;case Lc.DEADLINE_EXCEEDED:return dl.DEADLINE_EXCEEDED;case Lc.RESOURCE_EXHAUSTED:return dl.RESOURCE_EXHAUSTED;case Lc.INTERNAL:return dl.INTERNAL;case Lc.UNAVAILABLE:return dl.UNAVAILABLE;case Lc.UNAUTHENTICATED:return dl.UNAUTHENTICATED;case Lc.INVALID_ARGUMENT:return dl.INVALID_ARGUMENT;case Lc.NOT_FOUND:return dl.NOT_FOUND;case Lc.ALREADY_EXISTS:return dl.ALREADY_EXISTS;case Lc.PERMISSION_DENIED:return dl.PERMISSION_DENIED;case Lc.FAILED_PRECONDITION:return dl.FAILED_PRECONDITION;case Lc.ABORTED:return dl.ABORTED;case Lc.OUT_OF_RANGE:return dl.OUT_OF_RANGE;case Lc.UNIMPLEMENTED:return dl.UNIMPLEMENTED;case Lc.DATA_LOSS:return dl.DATA_LOSS;default:return ul()}}(Fc=Lc||(Lc={}))[Fc.OK=0]="OK",Fc[Fc.CANCELLED=1]="CANCELLED",Fc[Fc.UNKNOWN=2]="UNKNOWN",Fc[Fc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fc[Fc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fc[Fc.NOT_FOUND=5]="NOT_FOUND",Fc[Fc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fc[Fc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fc[Fc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fc[Fc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fc[Fc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fc[Fc.ABORTED=10]="ABORTED",Fc[Fc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fc[Fc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fc[Fc.INTERNAL=13]="INTERNAL",Fc[Fc.UNAVAILABLE=14]="UNAVAILABLE",Fc[Fc.DATA_LOSS=15]="DATA_LOSS";class Uc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Vl(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return Bl(this.inner)}size(){return this.innerSize}}const jc=new ql(Ol.comparator);function Vc(){return jc}const Bc=new ql(Ol.comparator);function qc(...e){let t=Bc;for(const n of e)t=t.insert(n.key,n);return t}function $c(e){let t=Bc;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Wc(){return Kc()}function Hc(){return Kc()}function Kc(){return new Uc((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Gc=new ql(Ol.comparator),Qc=new Hl(Ol.comparator);function Yc(...e){let t=Qc;for(const n of e)t=t.add(n);return t}const Zc=new Hl(kl);function Xc(){return Zc}class Jc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,eh.createSynthesizedTargetChangeForCurrentChange(e,t)),new Jc(Il.min(),n,Xc(),Vc(),Yc())}}class eh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new eh(Ql.EMPTY_BYTE_STRING,t,Yc(),Yc(),Yc())}}class th{constructor(e,t,n,r){this.gt=e,this.removedTargetIds=t,this.key=n,this.yt=r}}class nh{constructor(e,t){this.targetId=e,this.It=t}}class rh{constructor(e,t,n=Ql.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ih{constructor(){this.Tt=0,this.Et=ah(),this.At=Ql.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Yc(),t=Yc(),n=Yc();return this.Et.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ul()}})),new eh(this.At,this.Rt,e,t,n)}Dt(){this.bt=!1,this.Et=ah()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class sh{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Vc(),this.Bt=oh(),this.Lt=new Hl(kl)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,(t=>{const n=this.Qt(t);switch(e.state){case 0:this.jt(t)&&n.Vt(e.resumeToken);break;case 1:n.kt(),n.Pt||n.Dt(),n.Vt(e.resumeToken);break;case 2:n.kt(),n.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(n.Ot(),n.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),n.Vt(e.resumeToken));break;default:ul()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach(((e,n)=>{this.jt(n)&&t(n)}))}zt(e){const t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){const e=r.target;if(Pu(e))if(0===n){const n=new Ol(e.path);this.Kt(t,n,Cu.newNoDocument(n,Il.min()))}else cl(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach(((n,r)=>{const i=this.Ht(r);if(i){if(n.current&&Pu(i.target)){const t=new Ol(i.target.path);null!==this.$t.get(t)||this.Xt(r,t)||this.Kt(r,t,Cu.newNoDocument(t,e))}n.vt&&(t.set(r,n.St()),n.Dt())}}));let n=Yc();this.Bt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ht(e);return!t||2===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.$t.forEach(((t,n)=>n.setReadTime(e)));const r=new Jc(e,t,this.Lt,this.$t,n);return this.$t=Vc(),this.Bt=oh(),this.Lt=new Hl(kl),r}qt(e,t){if(!this.jt(e))return;const n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,n){if(!this.jt(e))return;const r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new ih,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Hl(kl),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||sl("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new ih),this.Mt.getRemoteKeysForTarget(e).forEach((t=>{this.Kt(e,t,null)}))}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function oh(){return new ql(Ol.comparator)}function ah(){return new ql(Ol.comparator)}const lh={asc:"ASCENDING",desc:"DESCENDING"},uh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ch{constructor(e,t){this.databaseId=e,this.dt=t}}function hh(e,t){return e.dt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function dh(e,t){return e.dt?t.toBase64():t.toUint8Array()}function fh(e,t){return hh(e,t.toTimestamp())}function ph(e){return cl(!!e),Il.fromTimestamp(function(e){const t=Zl(e);return new Tl(t.seconds,t.nanos)}(e))}function mh(e,t){return function(e){return new Nl(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function gh(e){const t=Nl.fromString(e);return cl(Dh(t)),t}function yh(e,t){return mh(e.databaseId,t.path)}function vh(e,t){const n=gh(t);if(n.get(1)!==e.databaseId.projectId)throw new fl(dl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new fl(dl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ol(_h(n))}function bh(e,t){return mh(e.databaseId,t)}function wh(e){return new Nl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function _h(e){return cl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Eh(e,t,n){return{name:yh(e,t),fields:n.value.mapValue.fields}}function Sh(e,t){return{documents:[bh(e,t.path)]}}function kh(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=bh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=bh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(bu(e.value))return{unaryFilter:{field:Nh(e.field),op:"IS_NAN"}};if(vu(e.value))return{unaryFilter:{field:Nh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(bu(e.value))return{unaryFilter:{field:Nh(e.field),op:"IS_NOT_NAN"}};if(vu(e.value))return{unaryFilter:{field:Nh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nh(e.field),op:xh(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Nh(e.field),direction:Ih(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.dt||su(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Ch(e){let t=function(e){const t=gh(e);return 4===t.length?Nl.emptyPath():_h(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){cl(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=Th(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new Vu(Ph(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,su(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ju(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new ju(n,t)}(n.endAt)),function(e,t,n,r,i,s,o,a){return new Wu(e,t,n,r,i,s,o,a)}(t,i,o,s,a,"F",l,u)}function Th(e){return e?void 0!==e.unaryFilter?[Oh(e)]:void 0!==e.fieldFilter?[Rh(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>Th(e))).reduce(((e,t)=>e.concat(t))):ul():[]}function Ih(e){return lh[e]}function xh(e){return uh[e]}function Nh(e){return{fieldPath:e.canonicalString()}}function Ph(e){return Rl.fromServerFormat(e.fieldPath)}function Rh(e){return Ru.create(Ph(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ul()}}(e.fieldFilter.op),e.fieldFilter.value)}function Oh(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ph(e.unaryFilter.field);return Ru.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ph(e.unaryFilter.field);return Ru.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ph(e.unaryFilter.field);return Ru.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ph(e.unaryFilter.field);return Ru.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ul()}}function Ah(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Dh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Mh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&kc(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Cc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Cc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Hc();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Sc(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Il.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Yc())}isEqual(e){return this.batchId===e.batchId&&Cl(this.mutations,e.mutations,((e,t)=>Ic(e,t)))&&Cl(this.baseMutations,e.baseMutations,((e,t)=>Ic(e,t)))}}class Lh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){cl(e.mutations.length===n.length);let r=Gc;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new Lh(e,t,n,r)}}class Fh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class zh{constructor(e,t,n,r,i=Il.min(),s=Il.min(),o=Ql.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new zh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new zh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new zh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Uh{constructor(e){this.ne=e}}function jh(e){const t=Ch({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?function(e,t,n){return new Wu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}(t,t.limit,"L"):t}class Vh{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Xl(e.integerValue));else if("doubleValue"in e){const n=Xl(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),ou(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ce(t,20),"string"==typeof n?t.he(n):(t.he(`${n.seconds||""}`),t.ae(n.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Jl(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ce(t,45),t.ae(n.latitude||0),t.ae(n.longitude||0)}else"mapValue"in e?Eu(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):ul()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const n=e.fields||{};this.ce(t,55);for(const e of Object.keys(n))this.le(e,t),this.oe(n[e],t)}me(e,t){const n=e.values||[];this.ce(t,50);for(const e of n)this.oe(e,t)}_e(e,t){this.ce(t,37),Ol.fromName(e).path.forEach((e=>{this.ce(t,60),this.ge(e,t)}))}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}Vh.ye=new Vh;class Bh{constructor(){this.ze=new qh}addToCollectionParentIndex(e,t){return this.ze.add(t),Fl.resolve()}getCollectionParents(e,t){return Fl.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return Fl.resolve()}deleteFieldIndex(e,t){return Fl.resolve()}getDocumentsMatchingTarget(e,t){return Fl.resolve(null)}getIndexType(e,t){return Fl.resolve(0)}getFieldIndexes(e,t){return Fl.resolve([])}getNextCollectionGroupToUpdate(e){return Fl.resolve(null)}getMinOffset(e,t){return Fl.resolve(Dl.min())}getMinOffsetFromCollectionGroup(e,t){return Fl.resolve(Dl.min())}updateCollectionGroup(e,t,n){return Fl.resolve()}updateIndexEntries(e,t){return Fl.resolve()}}class qh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Hl(Nl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Hl(Nl.comparator)).toArray()}}new Uint8Array(0);class $h{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new $h(e,$h.DEFAULT_COLLECTION_PERCENTILE,$h.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}$h.DEFAULT_COLLECTION_PERCENTILE=10,$h.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$h.DEFAULT=new $h(41943040,$h.DEFAULT_COLLECTION_PERCENTILE,$h.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$h.DISABLED=new $h(-1,0,0);class Wh{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Wh(0)}static Rn(){return new Wh(-1)}}class Hh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Kh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.getBaseDocument(e,t,n)))).next((e=>(null!==n&&Cc(n.mutation,e,Gl.empty(),Tl.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Yc()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Yc()){const r=Wc();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=qc();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Wc();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Yc())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Vc();const s=Kc(),o=Kc();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Nc)?i=i.insert(t.key,t):void 0!==o&&(s.set(t.key,o.mutation.getFieldMask()),Cc(o.mutation,t,o.mutation.getFieldMask(),Tl.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Hh(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Kc();let r=new ql(((e,t)=>e-t)),i=Yc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Gl.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Yc()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=Hc();l.forEach((e=>{if(!i.has(e)){const r=Sc(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return Fl.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return Ol.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Fl.resolve(Wc());let o=-1,a=i;return s.next((t=>Fl.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Fl.resolve():this.getBaseDocument(e,t,n).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Yc()))).next((e=>({batchId:o,changes:$c(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ol(t)).next((e=>{let t=qc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=qc();return this.indexManager.getCollectionParents(e,r).next((s=>Fl.forEach(s,(s=>{const o=function(e,t){return new Wu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((i=>(r=i,this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)))).next((e=>{e.forEach(((e,t)=>{const n=t.getKey();null===r.get(n)&&(r=r.insert(n,Cu.newInvalidDocument(n)))}));let n=qc();return r.forEach(((r,i)=>{const s=e.get(r);void 0!==s&&Cc(s.mutation,i,Gl.empty(),Tl.now()),tc(t,i)&&(n=n.insert(r,i))})),n}))}getBaseDocument(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Fl.resolve(Cu.newInvalidDocument(t))}}class Gh{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return Fl.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:ph(n.createTime)}),Fl.resolve()}getNamedQuery(e,t){return Fl.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:jh(e.bundledQuery),readTime:ph(e.readTime)}}(t)),Fl.resolve()}}class Qh{constructor(){this.overlays=new ql(Ol.comparator),this.Xn=new Map}getOverlay(e,t){return Fl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Wc();return Fl.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ie(e,t,r)})),Fl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Xn.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Xn.delete(n)),Fl.resolve()}getOverlaysForCollection(e,t,n){const r=Wc(),i=t.length+1,s=new Ol(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Fl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ql(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Wc(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Wc(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Fl.resolve(o)}ie(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Fh(t,n));let i=this.Xn.get(t);void 0===i&&(i=Yc(),this.Xn.set(t,i)),this.Xn.set(t,i.add(n.key))}}class Yh{constructor(){this.Zn=new Hl(Zh.ts),this.es=new Hl(Zh.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const n=new Zh(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.rs(new Zh(e,t))}os(e,t){e.forEach((e=>this.removeReference(e,t)))}us(e){const t=new Ol(new Nl([])),n=new Zh(t,e),r=new Zh(t,e+1),i=[];return this.es.forEachInRange([n,r],(e=>{this.rs(e),i.push(e.key)})),i}cs(){this.Zn.forEach((e=>this.rs(e)))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Ol(new Nl([])),n=new Zh(t,e),r=new Zh(t,e+1);let i=Yc();return this.es.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Zh(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Zh{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Ol.comparator(e.key,t.key)||kl(e.ls,t.ls)}static ns(e,t){return kl(e.ls,t.ls)||Ol.comparator(e.key,t.key)}}class Xh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Hl(Zh.ts)}checkEmpty(e){return Fl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Mh(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.ds=this.ds.add(new Zh(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Fl.resolve(s)}lookupMutationBatch(e,t){return Fl.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ws(n),i=r<0?0:r;return Fl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Fl.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return Fl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Zh(t,0),r=new Zh(t,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([n,r],(e=>{const t=this._s(e.ls);i.push(t)})),Fl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Hl(kl);return t.forEach((e=>{const t=new Zh(e,0),r=new Zh(e,Number.POSITIVE_INFINITY);this.ds.forEachInRange([t,r],(e=>{n=n.add(e.ls)}))})),Fl.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ol.isDocumentKey(i)||(i=i.child(""));const s=new Zh(new Ol(i),0);let o=new Hl(kl);return this.ds.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),s),Fl.resolve(this.gs(o))}gs(e){const t=[];return e.forEach((e=>{const n=this._s(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){cl(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let n=this.ds;return Fl.forEach(t.mutations,(r=>{const i=new Zh(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.ds=n}))}In(e){}containsKey(e,t){const n=new Zh(t,0),r=this.ds.firstAfterOrEqual(n);return Fl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Fl.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Jh{constructor(e){this.ps=e,this.docs=new ql(Ol.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Fl.resolve(n?n.document.mutableCopy():Cu.newInvalidDocument(t))}getEntries(e,t){let n=Vc();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Cu.newInvalidDocument(e))})),Fl.resolve(n)}getAllFromCollection(e,t,n){let r=Vc();const i=new Ol(t.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i}}=s.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||Ml(Al(i),n)<=0||(r=r.insert(i.key,i.mutableCopy()))}return Fl.resolve(r)}getAllFromCollectionGroup(e,t,n,r){ul()}Is(e,t){return Fl.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ed(this)}getSize(e){return Fl.resolve(this.size)}}class ed extends class{constructor(){this.changes=new Uc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Fl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.zn.addEntry(e,r)):this.zn.removeEntry(n)})),Fl.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class td{constructor(e){this.persistence=e,this.Ts=new Uc((e=>xu(e)),Nu),this.lastRemoteSnapshotVersion=Il.min(),this.highestTargetId=0,this.Es=0,this.As=new Yh,this.targetCount=0,this.Rs=Wh.An()}forEachTarget(e,t){return this.Ts.forEach(((e,n)=>t(n))),Fl.resolve()}getLastRemoteSnapshotVersion(e){return Fl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fl.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Fl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),Fl.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Wh(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,Fl.resolve()}updateTargetData(e,t){return this.vn(t),Fl.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Fl.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Ts.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Ts.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Fl.waitFor(i).next((()=>r))}getTargetCount(e){return Fl.resolve(this.targetCount)}getTargetData(e,t){const n=this.Ts.get(t)||null;return Fl.resolve(n)}addMatchingKeys(e,t,n){return this.As.ss(t,n),Fl.resolve()}removeMatchingKeys(e,t,n){this.As.os(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Fl.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),Fl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.As.hs(t);return Fl.resolve(n)}containsKey(e,t){return Fl.resolve(this.As.containsKey(t))}}class nd{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Ul(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new td(this),this.indexManager=new Bh,this.remoteDocumentCache=function(e){return new Jh(e)}((e=>this.referenceDelegate.Ss(e))),this.wt=new Uh(t),this.Ds=new Gh(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Qh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.bs[e.toKey()];return n||(n=new Xh(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,n){sl("MemoryPersistence","Starting transaction:",e);const r=new rd(this.Ps.next());return this.referenceDelegate.Cs(),n(r).next((e=>this.referenceDelegate.xs(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ns(e,t){return Fl.or(Object.values(this.bs).map((n=>()=>n.containsKey(e,t))))}}class rd extends class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}{constructor(e){super(),this.currentSequenceNumber=e}}class id{constructor(e){this.persistence=e,this.ks=new Yh,this.Os=null}static Ms(e){return new id(e)}get Fs(){if(this.Os)return this.Os;throw ul()}addReference(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),Fl.resolve()}removeReference(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),Fl.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),Fl.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach((e=>this.Fs.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Fs.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fl.forEach(this.Fs,(n=>{const r=Ol.fromPath(n);return this.$s(e,r).next((e=>{e||t.removeEntry(r,Il.min())}))})).next((()=>(this.Os=null,t.apply(e))))}updateLimboDocument(e,t){return this.$s(e,t).next((e=>{e?this.Fs.delete(t.toString()):this.Fs.add(t.toString())}))}Ss(e){return 0}$s(e,t){return Fl.or([()=>Fl.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class sd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Pi=n,this.vi=r}static Vi(e,t){let n=Yc(),r=Yc();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new sd(e,t.fromCache,n,r)}}class od{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ci(e,t).next((i=>i||this.xi(e,t,r,n))).next((n=>n||this.Ni(e,t)))}Ci(e,t){return Fl.resolve(null)}xi(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Il.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((i=>{const s=this.ki(t,i);return this.Oi(t,s,n,r)?this.Ni(e,t):(il()<=qr.in.DEBUG&&sl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ec(t)),this.Mi(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Il.fromTimestamp(1e9===r?new Tl(n+1,0):new Tl(n,r));return new Dl(i,Ol.empty(),t)}(r,-1)))}))}ki(e,t){let n=new Hl(nc(e));return t.forEach(((t,r)=>{tc(e,r)&&(n=n.add(r))})),n}Oi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ni(e,t){return il()<=qr.in.DEBUG&&sl("QueryEngine","Using full collection scan to execute query:",ec(t)),this.Di.getDocumentsMatchingQuery(e,t,Dl.min())}Mi(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class ad{constructor(e,t,n,r){this.persistence=e,this.Fi=t,this.wt=r,this.$i=new ql(kl),this.Bi=new Uc((e=>xu(e)),Nu),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(n)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kh(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.$i)))}}async function ld(e,t){const n=hl(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.qi(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Yc();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ki:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function ud(e){const t=hl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Vs.getLastRemoteSnapshotVersion(e)))}function cd(e,t){const n=hl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function hd(e,t,n){const r=hl(e),i=r.$i.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!zl(e))throw e;sl("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.$i=r.$i.remove(t),r.Bi.delete(i.target)}function dd(e,t,n){const r=hl(e);let i=Il.min(),s=Yc();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=hl(e),i=r.Bi.get(n);return void 0!==i?Fl.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,Zu(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Fi.getDocumentsMatchingQuery(e,t,n?i:Il.min(),n?s:Yc()))).next((e=>(function(e,t,n){let r=Il.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,ji:s})))))}class fd{constructor(){this.activeTargetIds=Xc()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pd{constructor(){this.Fr=new fd,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,n){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new fd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class md{Br(e){}shutdown(){}}class gd{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){sl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){sl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const yd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class vd{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class bd extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.so=t+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,n,r,i){const s=this.oo(e,t);sl("RestConnection","Sending: ",s,n);const o={};return this.uo(o,r,i),this.co(e,s,o,n).then((e=>(sl("RestConnection","Received: ",e),e)),(t=>{throw al("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t}))}ao(e,t,n,r,i,s){return this.ro(e,t,n,r,i)}uo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+nl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}oo(e,t){const n=yd[e];return`${this.so}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,n,r){return new Promise(((i,s)=>{const o=new Ja;o.listenOnce(Ga.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Ka.NO_ERROR:const t=o.getResponseJson();sl("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ka.TIMEOUT:sl("Connection",'RPC "'+e+'" timed out'),s(new fl(dl.DEADLINE_EXCEEDED,"Request time out"));break;case Ka.HTTP_ERROR:const n=o.getStatus();if(sl("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(dl).indexOf(t)>=0?t:dl.UNKNOWN}(e.status);s(new fl(t,e.message))}else s(new fl(dl.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new fl(dl.UNAVAILABLE,"Connection failed."));break;default:ul()}}finally{sl("Connection",'RPC "'+e+'" completed.')}}));const a=JSON.stringify(r);o.send(t,"POST",a,n,15)}))}ho(e,t,n){const r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Wa(),s=Ha(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Za({})),this.uo(o.initMessageHeaders,t,n),(0,$r.uI)()||(0,$r.b$)()||(0,$r.d)()||(0,$r.w1)()||(0,$r.Mn)()||(0,$r.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=r.join("");sl("Connection","Creating WebChannel: "+a,o);const l=i.createWebChannel(a,o);let u=!1,c=!1;const h=new vd({jr:e=>{c?sl("Connection","Not sending because WebChannel is closed:",e):(u||(sl("Connection","Opening WebChannel transport."),l.open(),u=!0),sl("Connection","WebChannel sending:",e),l.send(e))},Wr:()=>l.close()}),d=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return d(l,Xa.EventType.OPEN,(()=>{c||sl("Connection","WebChannel transport opened.")})),d(l,Xa.EventType.CLOSE,(()=>{c||(c=!0,sl("Connection","WebChannel transport closed"),h.eo())})),d(l,Xa.EventType.ERROR,(e=>{c||(c=!0,al("Connection","WebChannel transport errored:",e),h.eo(new fl(dl.UNAVAILABLE,"The operation could not be completed")))})),d(l,Xa.EventType.MESSAGE,(e=>{var t;if(!c){const n=e.data[0];cl(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){sl("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=Lc[e];if(void 0!==t)return zc(t)}(e),n=i.message;void 0===t&&(t=dl.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),c=!0,h.eo(new fl(t,n)),l.close()}else sl("Connection","WebChannel received:",n),h.no(n)}})),d(s,Qa.STAT_EVENT,(e=>{e.stat===Ya.PROXY?sl("Connection","Detected buffering proxy"):e.stat===Ya.NOPROXY&&sl("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.Zr()}),0),h}}function wd(){return"undefined"!=typeof document?document:null}function _d(e){return new ch(e,!0)}class Ed{constructor(e,t,n=1e3,r=1.5,i=6e4){this.js=e,this.timerId=t,this.lo=n,this.fo=r,this._o=i,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),n=Math.max(0,Date.now()-this.yo),r=Math.max(0,t-n);r>0&&sl("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,r,(()=>(this.yo=Date.now(),e()))),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Sd{constructor(e,t,n,r,i,s,o,a){this.js=e,this.Ao=n,this.Ro=r,this.bo=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Ed(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(()=>this.Oo())))}Mo(e){this.Fo(),this.stream.send(e)}async Oo(){if(this.Co())return this.close(0)}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}async close(e,t){this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==e?this.So.reset():t&&t.code===dl.RESOURCE_EXHAUSTED?(ol(t.toString()),ol("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):t&&t.code===dl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(t)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Po===t&&this.Uo(e,n)}),(t=>{e((()=>{const e=new fl(dl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.qo(e)}))}))}Uo(e,t){const n=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((()=>{n((()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,(()=>(this.Co()&&(this.state=3),Promise.resolve()))),this.listener.zr())))})),this.stream.Jr((e=>{n((()=>this.qo(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}xo(){this.state=5,this.So.Io((async()=>{this.state=0,this.start()}))}qo(e){return sl("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget((()=>this.Po===e?t():(sl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kd extends Sd{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.wt=i}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ul()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.dt?(cl(void 0===t||"string"==typeof t),Ql.fromBase64String(t||"")):(cl(void 0===t||t instanceof Uint8Array),Ql.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?dl.UNKNOWN:zc(e.code);return new fl(t,e.message||"")}(o);n=new rh(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=vh(e,r.document.name),s=ph(r.document.updateTime),o=new Su({mapValue:{fields:r.document.fields}}),a=Cu.newFoundDocument(i,s,o),l=r.targetIds||[],u=r.removedTargetIds||[];n=new th(l,u,a.key,a)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=vh(e,r.document),s=r.readTime?ph(r.readTime):Il.min(),o=Cu.newNoDocument(i,s),a=r.removedTargetIds||[];n=new th([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=vh(e,r.document),s=r.removedTargetIds||[];n=new th([],s,i,null)}else{if(!("filter"in t))return ul();{t.filter;const e=t.filter;e.targetId;const r=e.count||0,i=new Mc(r),s=e.targetId;n=new nh(s,i)}}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return Il.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Il.min():t.readTime?ph(t.readTime):Il.min()}(e);return this.listener.Go(t,n)}Qo(e){const t={};t.database=wh(this.wt),t.addTarget=function(e,t){let n;const r=t.target;return n=Pu(r)?{documents:Sh(e,r)}:{query:kh(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=dh(e,t.resumeToken):t.snapshotVersion.compareTo(Il.min())>0&&(n.readTime=hh(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ul()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}jo(e){const t={};t.database=wh(this.wt),t.removeTarget=e,this.Mo(t)}}class Cd extends Sd{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.wt=i,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(cl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function(e,t){return e&&e.length>0?(cl(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?ph(e.updateTime):ph(t);return n.isEqual(Il.min())&&(n=ph(t)),new bc(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=ph(e.commitTime);return this.listener.Jo(n,t)}return cl(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=wh(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof xc)n={update:Eh(e,t.key,t.value)};else if(t instanceof Ac)n={delete:yh(e,t.key)};else if(t instanceof Nc)n={update:Eh(e,t.key,t.data),updateMask:Ah(t.fieldMask)};else{if(!(t instanceof Dc))return ul();n={verify:yh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof hc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof dc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof pc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof gc)return{fieldPath:t.field.canonicalString(),increment:n._t};throw ul()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:fh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ul()}(e,t.precondition)),n}(this.wt,e)))};this.Mo(t)}}class Td extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=n,this.wt=r,this.Zo=!1}tu(){if(this.Zo)throw new fl(dl.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,n){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.bo.ro(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===dl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new fl(dl.UNKNOWN,e.toString())}))}ao(e,t,n,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.bo.ao(e,t,n,i,s,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===dl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new fl(dl.UNKNOWN,e.toString())}))}terminate(){this.Zo=!0}}class Id{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve()))))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(ol(t),this.su=!1):sl("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class xd{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=i,this.du.Br((e=>{n.enqueueAndForget((async()=>{Fd(this)&&(sl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=hl(e);t.lu.add(4),await Pd(t),t._u.set("Unknown"),t.lu.delete(4),await Nd(t)}(this))}))})),this._u=new Id(n,r)}}async function Nd(e){if(Fd(e))for(const t of e.fu)await t(!0)}async function Pd(e){for(const t of e.fu)await t(!1)}function Rd(e,t){const n=hl(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),Ld(n)?Md(n):ef(n).Co()&&Ad(n,t))}function Od(e,t){const n=hl(e),r=ef(n);n.hu.delete(t),r.Co()&&Dd(n,t),0===n.hu.size&&(r.Co()?r.ko():Fd(n)&&n._u.set("Unknown"))}function Ad(e,t){e.wu.Nt(t.targetId),ef(e).Qo(t)}function Dd(e,t){e.wu.Nt(t),ef(e).jo(t)}function Md(e){e.wu=new sh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),te:t=>e.hu.get(t)||null}),ef(e).start(),e._u.iu()}function Ld(e){return Fd(e)&&!ef(e).Do()&&e.hu.size>0}function Fd(e){return 0===hl(e).lu.size}function zd(e){e.wu=void 0}async function Ud(e){e.hu.forEach(((t,n)=>{Ad(e,t)}))}async function jd(e,t){zd(e),Ld(e)?(e._u.uu(t),Md(e)):e._u.set("Unknown")}async function Vd(e,t,n){if(e._u.set("Online"),t instanceof rh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.hu.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.hu.delete(r),e.wu.removeTarget(r))}(e,t)}catch(n){sl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Bd(e,n)}else if(t instanceof th?e.wu.Ut(t):t instanceof nh?e.wu.zt(t):e.wu.Gt(t),!n.isEqual(Il.min()))try{const t=await ud(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.wu.Yt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.hu.get(t);if(!n)return;e.hu.set(t,n.withResumeToken(Ql.EMPTY_BYTE_STRING,n.snapshotVersion)),Dd(e,t);const r=new zh(n.target,t,1,n.sequenceNumber);Ad(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){sl("RemoteStore","Failed to raise snapshot:",t),await Bd(e,t)}}async function Bd(e,t,n){if(!zl(t))throw t;e.lu.add(1),await Pd(e),e._u.set("Offline"),n||(n=()=>ud(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{sl("RemoteStore","Retrying IndexedDB access"),await n(),e.lu.delete(1),await Nd(e)}))}function qd(e,t){return t().catch((n=>Bd(e,n,t)))}async function $d(e){const t=hl(e),n=tf(t);let r=t.au.length>0?t.au[t.au.length-1].batchId:-1;for(;Wd(t);)try{const e=await cd(t.localStore,r);if(null===e){0===t.au.length&&n.ko();break}r=e.batchId,Hd(t,e)}catch(e){await Bd(t,e)}Kd(t)&&Gd(t)}function Wd(e){return Fd(e)&&e.au.length<10}function Hd(e,t){e.au.push(t);const n=tf(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function Kd(e){return Fd(e)&&!tf(e).Do()&&e.au.length>0}function Gd(e){tf(e).start()}async function Qd(e){tf(e).Xo()}async function Yd(e){const t=tf(e);for(const n of e.au)t.Ho(n.mutations)}async function Zd(e,t,n){const r=e.au.shift(),i=Lh.from(r,t,n);await qd(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await $d(e)}async function Xd(e,t){t&&tf(e).zo&&await async function(e,t){if(function(e){switch(e){default:return ul();case dl.CANCELLED:case dl.UNKNOWN:case dl.DEADLINE_EXCEEDED:case dl.RESOURCE_EXHAUSTED:case dl.INTERNAL:case dl.UNAVAILABLE:case dl.UNAUTHENTICATED:return!1;case dl.INVALID_ARGUMENT:case dl.NOT_FOUND:case dl.ALREADY_EXISTS:case dl.PERMISSION_DENIED:case dl.FAILED_PRECONDITION:case dl.ABORTED:case dl.OUT_OF_RANGE:case dl.UNIMPLEMENTED:case dl.DATA_LOSS:return!0}}(n=t.code)&&n!==dl.ABORTED){const n=e.au.shift();tf(e).No(),await qd(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await $d(e)}var n}(e,t),Kd(e)&&Gd(e)}async function Jd(e,t){const n=hl(e);n.asyncQueue.verifyOperationInProgress(),sl("RemoteStore","RemoteStore received new credentials");const r=Fd(n);n.lu.add(3),await Pd(n),r&&n._u.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.lu.delete(3),await Nd(n)}function ef(e){return e.mu||(e.mu=function(e,t,n){const r=hl(e);return r.tu(),new kd(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Ud.bind(null,e),Jr:jd.bind(null,e),Go:Vd.bind(null,e)}),e.fu.push((async t=>{t?(e.mu.No(),Ld(e)?Md(e):e._u.set("Unknown")):(await e.mu.stop(),zd(e))}))),e.mu}function tf(e){return e.gu||(e.gu=function(e,t,n){const r=hl(e);return r.tu(),new Cd(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Qd.bind(null,e),Jr:Xd.bind(null,e),Yo:Yd.bind(null,e),Jo:Zd.bind(null,e)}),e.fu.push((async t=>{t?(e.gu.No(),await $d(e)):(await e.gu.stop(),e.au.length>0&&(sl("RemoteStore",`Stopping write stream with ${e.au.length} pending writes`),e.au=[]))}))),e.gu}class nf{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new pl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new nf(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fl(dl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rf(e,t){if(ol("AsyncQueue",`${t}: ${e}`),zl(e))return new fl(dl.UNAVAILABLE,`${t}: ${e}`);throw e}class sf{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ol.comparator(t.key,n.key):(e,t)=>Ol.comparator(e.key,t.key),this.keyedMap=qc(),this.sortedSet=new ql(this.comparator)}static emptySet(e){return new sf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sf))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new sf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class of{constructor(){this.yu=new ql(Ol.comparator)}track(e){const t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):ul():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class af{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new af(e,t,sf.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class lf{constructor(){this.Iu=void 0,this.listeners=[]}}class uf{constructor(){this.queries=new Uc((e=>Ju(e)),Xu),this.onlineState="Unknown",this.Tu=new Set}}async function cf(e,t){const n=hl(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new lf),i)try{s.Iu=await n.onListen(r)}catch(e){const n=rf(e,`Initialization of query '${ec(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Eu(n.onlineState),s.Iu&&t.Au(s.Iu)&&pf(n)}async function hf(e,t){const n=hl(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function df(e,t){const n=hl(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.Au(e)&&(r=!0);i.Iu=e}}r&&pf(n)}function ff(e,t,n){const r=hl(e),i=r.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);r.queries.delete(t)}function pf(e){e.Tu.forEach((e=>{e.next()}))}class mf{constructor(e,t,n){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=n||{}}Au(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new af(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return!(this.options.Du&&n||e.docs.isEmpty()&&"Offline"!==t)}vu(e){if(e.docChanges.length>0)return!0;const t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Su(e){e=af.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class gf{constructor(e){this.key=e}}class yf{constructor(e){this.key=e}}class vf{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Yc(),this.mutatedKeys=Yc(),this.Lu=nc(e),this.Uu=new sf(this.Lu)}get qu(){return this.Fu}Ku(e,t){const n=t?t.Gu:new of,r=t?t.Uu:this.Uu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=tc(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Qu(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.Lu(c,a)>0||l&&this.Lu(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Uu:s,Gu:n,Oi:o,mutatedKeys:i}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const i=e.Gu.pu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ul()}};return n(e)-n(t)}(e.type,t.type)||this.Lu(e.doc,t.doc))),this.ju(n);const s=t?this.Wu():[],o=0===this.Bu.size&&this.current?1:0,a=o!==this.$u;return this.$u=o,0!==i.length||a?{snapshot:new af(this.query,e.Uu,r,i,e.mutatedKeys,0===o,a,!1),zu:s}:{zu:s}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new of,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach((e=>this.Fu=this.Fu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Fu=this.Fu.delete(e))),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Yc(),this.Uu.forEach((e=>{this.Hu(e.key)&&(this.Bu=this.Bu.add(e.key))}));const t=[];return e.forEach((e=>{this.Bu.has(e)||t.push(new yf(e))})),this.Bu.forEach((n=>{e.has(n)||t.push(new gf(n))})),t}Ju(e){this.Fu=e.ji,this.Bu=Yc();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return af.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class bf{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class wf{constructor(e){this.key=e,this.Xu=!1}}class _f{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Zu={},this.tc=new Uc((e=>Ju(e)),Xu),this.ec=new Map,this.nc=new Set,this.sc=new ql(Ol.comparator),this.ic=new Map,this.rc=new Yh,this.oc={},this.uc=new Map,this.cc=Wh.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}async function Ef(e,t){const n=function(e){const t=hl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=kf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=zf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Tf.bind(null,t),t.Zu.Go=df.bind(null,t.eventManager),t.Zu.lc=ff.bind(null,t.eventManager),t}(e);let r,i;const s=n.tc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const e=await function(e,t){const n=hl(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Vs.getTargetData(e,t).next((i=>i?(r=i,Fl.resolve(r)):n.Vs.allocateTargetId(e).next((i=>(r=new zh(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}(n.localStore,Zu(t));n.isPrimaryClient&&Rd(n.remoteStore,e);const s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await async function(e,t,n,r){e.hc=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ku(n);i.Oi&&(i=await dd(e.localStore,t.query,!1).then((({documents:e})=>t.view.Ku(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Af(e,t.targetId,o.zu),o.snapshot}(e,t,n,r);const i=await dd(e.localStore,t,!0),s=new vf(t,i.ji),o=s.Ku(i.documents),a=eh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),l=s.applyChanges(o,e.isPrimaryClient,a);Af(e,n,l.zu);const u=new bf(t,n,s);return e.tc.set(t,u),e.ec.has(n)?e.ec.get(n).push(t):e.ec.set(n,[t]),l.snapshot}(n,t,r,"current"===s)}return i}async function Sf(e,t){const n=hl(e),r=n.tc.get(t),i=n.ec.get(r.targetId);if(i.length>1)return n.ec.set(r.targetId,i.filter((e=>!Xu(e,t)))),void n.tc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await hd(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Od(n.remoteStore,r.targetId),Rf(n,r.targetId)})).catch(Ll)):(Rf(n,r.targetId),await hd(n.localStore,r.targetId,!0))}async function kf(e,t){const n=hl(e);try{const e=await function(e,t){const n=hl(e),r=t.snapshotVersion;let i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Vs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Vs.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?u=u.withResumeToken(Ql.EMPTY_BYTE_STRING,Il.min()).withLastLimboFreeSnapshotVersion(Il.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Vs.updateTargetData(e,u))}));let a=Vc(),l=Yc();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(function(e,t,n){let r=Yc(),i=Yc();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Vc();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Il.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):sl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Gi:r,Qi:i}}))}(e,s,t.documentUpdates).next((e=>{a=e.Gi,l=e.Qi}))),!r.isEqual(Il.min())){const t=n.Vs.getLastRemoteSnapshotVersion(e).next((t=>n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Fl.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.$i=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ic.get(t);r&&(cl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Xu=!0:e.modifiedDocuments.size>0?cl(r.Xu):e.removedDocuments.size>0&&(cl(r.Xu),r.Xu=!1))})),await Lf(n,e,t)}catch(e){await Ll(e)}}function Cf(e,t,n){const r=hl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.tc.forEach(((n,r)=>{const i=r.view.Eu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=hl(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.Eu(t)&&(r=!0)})),r&&pf(n)}(r.eventManager,t),e.length&&r.Zu.Go(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Tf(e,t,n){const r=hl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ic.get(t),s=i&&i.key;if(s){let e=new ql(Ol.comparator);e=e.insert(s,Cu.newNoDocument(s,Il.min()));const n=Yc().add(s),i=new Jc(Il.min(),new Map,new Hl(kl),e,n);await kf(r,i),r.sc=r.sc.remove(s),r.ic.delete(t),Mf(r)}else await hd(r.localStore,t,!1).then((()=>Rf(r,t,n))).catch(Ll)}async function If(e,t){const n=hl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=hl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Fl.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);cl(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Yc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Pf(n,r,null),Nf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Lf(n,e)}catch(e){await Ll(e)}}async function xf(e,t,n){const r=hl(e);try{const e=await function(e,t){const n=hl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(cl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Pf(r,t,n),Nf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Lf(r,e)}catch(n){await Ll(n)}}function Nf(e,t){(e.uc.get(t)||[]).forEach((e=>{e.resolve()})),e.uc.delete(t)}function Pf(e,t,n){const r=hl(e);let i=r.oc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function Rf(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.ec.get(t))e.tc.delete(r),n&&e.Zu.lc(r,n);e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((t=>{e.rc.containsKey(t)||Of(e,t)}))}function Of(e,t){e.nc.delete(t.path.canonicalString());const n=e.sc.get(t);null!==n&&(Od(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),Mf(e))}function Af(e,t,n){for(const r of n)r instanceof gf?(e.rc.addReference(r.key,t),Df(e,r)):r instanceof yf?(sl("SyncEngine","Document no longer in limbo: "+r.key),e.rc.removeReference(r.key,t),e.rc.containsKey(r.key)||Of(e,r.key)):ul()}function Df(e,t){const n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(sl("SyncEngine","New document in limbo: "+n),e.nc.add(r),Mf(e))}function Mf(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){const t=e.nc.values().next().value;e.nc.delete(t);const n=new Ol(Nl.fromString(t)),r=e.cc.next();e.ic.set(r,new wf(n)),e.sc=e.sc.insert(n,r),Rd(e.remoteStore,new zh(Zu(Hu(n.path)),r,2,Ul.ot))}}async function Lf(e,t,n){const r=hl(e),i=[],s=[],o=[];r.tc.isEmpty()||(r.tc.forEach(((e,a)=>{o.push(r.hc(a,t,n).then((e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=sd.Vi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Zu.Go(i),await async function(e,t){const n=hl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Fl.forEach(t,(t=>Fl.forEach(t.Pi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Fl.forEach(t.vi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!zl(e))throw e;sl("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.$i.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.$i=n.$i.insert(t,i)}}}(r.localStore,s))}async function Ff(e,t){const n=hl(e);if(!n.currentUser.isEqual(t)){sl("SyncEngine","User change. New user:",t.toKey());const e=await ld(n.localStore,t);n.currentUser=t,function(e,t){e.uc.forEach((e=>{e.forEach((e=>{e.reject(new fl(dl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Lf(n,e.Ki)}}function zf(e,t){const n=hl(e),r=n.ic.get(t);if(r&&r.Xu)return Yc().add(r.key);{let e=Yc();const r=n.ec.get(t);if(!r)return e;for(const t of r){const r=n.tc.get(t);e=e.unionWith(r.view.qu)}return e}}function Uf(e){const t=hl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=If.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xf.bind(null,t),t}class jf{constructor(){this.synchronizeTabs=!1}async initialize(e){this.wt=_d(e.databaseInfo.databaseId),this.sharedClientState=this.dc(e),this.persistence=this._c(e),await this.persistence.start(),this.localStore=this.wc(e),this.gcScheduler=this.mc(e,this.localStore),this.indexBackfillerScheduler=this.gc(e,this.localStore)}mc(e,t){return null}gc(e,t){return null}wc(e){return function(e,t,n,r){return new ad(e,t,n,r)}(this.persistence,new od,e.initialUser,this.wt)}_c(e){return new nd(id.Ms,this.wt)}dc(e){return new pd}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Vf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Cf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ff.bind(null,this.syncEngine),await async function(e,t){const n=hl(e);t?(n.lu.delete(2),await Nd(n)):t||(n.lu.add(2),await Pd(n),n._u.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new uf}createDatastore(e){const t=_d(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new bd(r));var r;return function(e,t,n,r){return new Td(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Cf(this.syncEngine,e,0),s=gd.V()?new gd:new md,new xd(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new _f(e,t,n,r,i,s);return o&&(a.ac=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=hl(e);sl("RemoteStore","RemoteStore shutting down."),t.lu.add(5),await Pd(t),t.du.shutdown(),t._u.set("Unknown")}(this.remoteStore)}}class Bf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class qf{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=tl.UNAUTHENTICATED,this.clientId=Sl.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{sl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(sl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new fl(dl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=rf(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function $f(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){return e.offlineComponents||(sl("FirestoreClient","Using default OfflineComponentProvider"),await async function(e,t){e.asyncQueue.verifyOperationInProgress(),sl("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await ld(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}(e,new jf)),e.offlineComponents}(e);sl("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>Jd(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Jd(t.remoteStore,n))),e.onlineComponents=t}async function Wf(e){return e.onlineComponents||(sl("FirestoreClient","Using default OnlineComponentProvider"),await $f(e,new Vf)),e.onlineComponents}async function Hf(e){const t=await Wf(e),n=t.eventManager;return n.onListen=Ef.bind(null,t.syncEngine),n.onUnlisten=Sf.bind(null,t.syncEngine),n}const Kf=new Map;function Gf(e,t,n){if(!n)throw new fl(dl.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Qf(e){if(!Ol.isDocumentKey(e))throw new fl(dl.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Yf(e){if(Ol.isDocumentKey(e))throw new fl(dl.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Zf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":ul()}function Xf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new fl(dl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zf(e);throw new fl(dl.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Jf{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new fl(dl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new fl(dl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new fl(dl.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ep{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jf({}),this._settingsFrozen=!1,e instanceof iu?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new fl(dl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(e.options.projectId)}(e))}get app(){if(!this._app)throw new fl(dl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new fl(dl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jf(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new gl;switch(e.type){case"gapi":const t=e.client;return cl(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new bl(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new fl(dl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Kf.get(e);t&&(sl("ComponentProvider","Removing Datastore"),Kf.delete(e),t.terminate())}(this),Promise.resolve()}}class tp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tp(this.firestore,e,this._key)}}class np{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new np(this.firestore,e,this._query)}}class rp extends np{constructor(e,t,n){super(e,t,Hu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tp(this.firestore,null,new Ol(e))}withConverter(e){return new rp(this.firestore,e,this._path)}}function ip(e,t,...n){if(e=(0,$r.m9)(e),Gf("collection","path",t),e instanceof ep){const r=Nl.fromString(t,...n);return Yf(r),new rp(e,null,r)}{if(!(e instanceof tp||e instanceof rp))throw new fl(dl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Nl.fromString(t,...n));return Yf(r),new rp(e.firestore,null,r)}}function sp(e,t,...n){if(e=(0,$r.m9)(e),1===arguments.length&&(t=Sl.I()),Gf("doc","path",t),e instanceof ep){const r=Nl.fromString(t,...n);return Qf(r),new tp(e,null,new Ol(r))}{if(!(e instanceof tp||e instanceof rp))throw new fl(dl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Nl.fromString(t,...n));return Qf(r),new tp(e.firestore,e instanceof rp?e.converter:null,new Ol(r))}}class op{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Ed(this,"async_queue_retry"),this.Kc=()=>{const e=wd();e&&sl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()};const e=wd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=wd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise((()=>{}));const t=new pl;return this.Qc((()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Mc.push(e),this.jc())))}async jc(){if(0!==this.Mc.length){try{await this.Mc[0](),this.Mc.shift(),this.So.reset()}catch(e){if(!zl(e))throw e;sl("AsyncQueue","Operation failed with retryable error: "+e)}this.Mc.length>0&&this.So.Io((()=>this.jc()))}}Qc(e){const t=this.Oc.then((()=>(this.Lc=!0,e().catch((e=>{this.Bc=e,this.Lc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ol("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Lc=!1,e))))));return this.Oc=t,t}enqueueAfterDelay(e,t,n){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const r=nf.createAndSchedule(this,e,t,n,(e=>this.Wc(e)));return this.$c.push(r),r}Gc(){this.Bc&&ul()}verifyOperationInProgress(){}async zc(){let e;do{e=this.Oc,await e}while(e!==this.Oc)}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then((()=>{this.$c.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()}))}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function ap(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class lp extends ep{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new op,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||hp(this),this._firestoreClient.terminate()}}function up(e=(0,Or.Mq)()){return(0,Or.qX)(e,"firestore").getImmediate()}function cp(e){return e._firestoreClient||hp(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function hp(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new ru(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new qf(e._authCredentials,e._appCheckCredentials,e._queue,r)}class dp{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new fl(dl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rl(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fp(Ql.fromBase64String(e))}catch(e){throw new fl(dl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new fp(Ql.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pp{constructor(e){this._methodName=e}}class mp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fl(dl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fl(dl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kl(this._lat,e._lat)||kl(this._long,e._long)}}const gp=/^__.*__$/;class yp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Nc(e,this.data,this.fieldMask,t,this.fieldTransforms):new xc(e,this.data,t,this.fieldTransforms)}}function vp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ul()}}class bp{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.wt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Xc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new bp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}ia(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Pp(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(vp(this.Zc)&&gp.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class wp{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=n||_d(e)}aa(e,t,n,r=!1){return new bp({Zc:e,methodName:t,ca:n,path:Rl.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function _p(e){const t=e._freezeSettings(),n=_d(e._databaseId);return new wp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ep(e,t,n,r,i,s={}){const o=e.aa(s.merge||s.mergeFields?2:0,t,n,i);Tp("Data must be an object, but it was:",o,r);const a=kp(r,o);let l,u;if(s.merge)l=new Gl(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Ip(t,r,n);if(!o.contains(i))throw new fl(dl.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Rp(e,i)||e.push(i)}l=new Gl(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new yp(new Su(a),l,u)}function Sp(e,t){if(Cp(e=(0,$r.m9)(e)))return Tp("Unsupported field value:",t,e),kp(e,t);if(e instanceof pp)return function(e,t){if(!vp(t.Zc))throw t.oa(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.oa(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Sp(i,t.ra(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,$r.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return oc(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Tl.fromDate(e);return{timestampValue:hh(t.wt,n)}}if(e instanceof Tl){const n=new Tl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:hh(t.wt,n)}}if(e instanceof mp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof fp)return{bytesValue:dh(t.wt,e._byteString)};if(e instanceof tp){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.oa(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:mh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa(`Unsupported field value: ${Zf(e)}`)}(e,t)}function kp(e,t){const n={};return Bl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vl(e,((e,r)=>{const i=Sp(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Cp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Tl||e instanceof mp||e instanceof fp||e instanceof tp||e instanceof pp)}function Tp(e,t,n){if(!Cp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Zf(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function Ip(e,t,n){if((t=(0,$r.m9)(t))instanceof dp)return t._internalPath;if("string"==typeof t)return Np(e,t);throw Pp("Field path arguments must be of type string or ",e,!1,void 0,n)}const xp=new RegExp("[~\\*/\\[\\]]");function Np(e,t,n){if(t.search(xp)>=0)throw Pp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new dp(...t.split("."))._internalPath}catch(r){throw Pp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Pp(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new fl(dl.INVALID_ARGUMENT,a+e+l)}function Rp(e,t){return e.some((e=>e.isEqual(t)))}class Op{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new tp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ap(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ap extends Op{data(){return super.data()}}function Dp(e,t){return"string"==typeof t?Np(e,t):t instanceof dp?t._internalPath:t._delegate._internalPath}class Mp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lp extends Op{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Fp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Dp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Fp extends Lp{data(e={}){return super.data(e)}}class zp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Mp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Fp(this._firestore,this._userDataWriter,n.key,n,new Mp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fl(dl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>({type:"added",doc:new Fp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Mp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++})))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Fp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Mp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Up(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Up(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ul()}}function jp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new fl(dl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function Vp(e,...t){for(const n of t)e=n._apply(e);return e}class Bp extends class{}{constructor(e,t,n){super(),this.fa=e,this.da=t,this._a=n,this.type="where"}_apply(e){const t=_p(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new fl(dl.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Wp(o,s);const t=[];for(const n of o)t.push($p(r,e,n));a={arrayValue:{values:t}}}else a=$p(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Wp(o,s),a=function(e,t,n,r=!1){return Sp(n,e.aa(r?4:3,t))}(n,"where",o,"in"===s||"not-in"===s);const l=Ru.create(i,s,a);return function(e,t){if(t.ht()){const n=Gu(e);if(null!==n&&!n.isEqual(t.field))throw new fl(dl.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=Ku(e);null!==r&&function(e,t,n){if(!n.isEqual(t))throw new fl(dl.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new fl(dl.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new fl(dl.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,l),l}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new np(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new Wu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}function qp(e,t,n){const r=t,i=Dp("where",e);return new Bp(i,r,n)}function $p(e,t,n){if("string"==typeof(n=(0,$r.m9)(n))){if(""===n)throw new fl(dl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qu(t)&&-1!==n.indexOf("/"))throw new fl(dl.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Nl.fromString(n));if(!Ol.isDocumentKey(r))throw new fl(dl.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mu(e,new Ol(r))}if(n instanceof tp)return mu(e,n._key);throw new fl(dl.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zf(n)}.`)}function Wp(e,t){if(!Array.isArray(e)||0===e.length)throw new fl(dl.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new fl(dl.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function Hp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}function Kp(e){e=Xf(e,tp);const t=Xf(e.firestore,lp);return function(e,t,n={}){const r=new pl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Bf({next:s=>{t.enqueueAndForget((()=>hf(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new fl(dl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new fl(dl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new mf(Hu(n.path),s,{includeMetadataChanges:!0,Du:!0});return cf(e,o)}(await Hf(e),e.asyncQueue,t,n,r))),r.promise}(cp(t),e._key).then((n=>tm(t,e,n)))}class Gp extends class{convertValue(e,t="none"){switch(lu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ul()}}convertObject(e,t){const n={};return Vl(e.fields,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new mp(Xl(e.latitude),Xl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=tu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(nu(e));default:return null}}convertTimestamp(e){const t=Zl(e);return new Tl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Nl.fromString(e);cl(Dh(n));const r=new iu(n.get(1),n.get(3)),i=new Ol(n.popFirst(5));return r.isEqual(t)||ol(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new fp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tp(this.firestore,null,t)}}function Qp(e){e=Xf(e,np);const t=Xf(e.firestore,lp),n=cp(t),r=new Gp(t);return jp(e._query),function(e,t,n={}){const r=new pl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Bf({next:n=>{t.enqueueAndForget((()=>hf(e,o))),n.fromCache&&"server"===r.source?i.reject(new fl(dl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new mf(n,s,{includeMetadataChanges:!0,Du:!0});return cf(e,o)}(await Hf(e),e.asyncQueue,t,n,r))),r.promise}(n,e._query).then((n=>new zp(t,r,e,n)))}function Yp(e,t,n){e=Xf(e,tp);const r=Xf(e.firestore,lp),i=Hp(e.converter,t,n);return em(r,[Ep(_p(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,wc.none())])}function Zp(e){return em(Xf(e.firestore,lp),[new Ac(e._key,wc.none())])}function Xp(e,t){const n=Xf(e.firestore,lp),r=sp(e),i=Hp(e.converter,t);return em(n,[Ep(_p(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,wc.exists(!1))]).then((()=>r))}function Jp(e,...t){var n,r,i;e=(0,$r.m9)(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||ap(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(ap(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let l,u,c;if(e instanceof tp)u=Xf(e.firestore,lp),c=Hu(e._key.path),l={next:n=>{t[o]&&t[o](tm(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Xf(e,np);u=Xf(n.firestore,lp),c=n._query;const r=new Gp(u);l={next:e=>{t[o]&&t[o](new zp(u,r,n,e))},error:t[o+1],complete:t[o+2]},jp(e._query)}return function(e,t,n,r){const i=new Bf(r),s=new mf(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>cf(await Hf(e),s))),()=>{i.Tc(),e.asyncQueue.enqueueAndForget((async()=>hf(await Hf(e),s)))}}(cp(u),c,a,l)}function em(e,t){return function(e,t){const n=new pl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Uf(e);try{const e=await function(e,t){const n=hl(e),r=Tl.now(),i=t.reduce(((e,t)=>e.add(t.key)),Yc());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Vc(),l=Yc();return n.Ui.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Tc(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Nc(e.key,t,ku(t.value.mapValue),wc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:$c(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.oc[e.currentUser.toKey()];r||(r=new ql(kl)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Lf(r,e.changes),await $d(r.remoteStore)}catch(e){const t=rf(e,"Failed to persist write");n.reject(t)}}(await function(e){return Wf(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(cp(e),t)}function tm(e,t,n){const r=n.docs.get(t._key),i=new Gp(e);return new Lp(e,i,t._key,r,new Mp(n.hasPendingWrites,n.fromCache),t.converter)}!function(e,t=!0){!function(e){nl=e}(Or.Jn),(0,Or.Xd)(new Br.wA("firestore",((e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=new lp(r,new yl(e.getProvider("auth-internal")),new _l(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i}),"PUBLIC")),(0,Or.KN)(el,"3.4.13",e),(0,Or.KN)(el,"3.4.13","esm2017")}();var nm=s((function e(t,n){r(this,e),kt(this,"version","1.0.1"),this.name=t,this.parents=n})),rm={toFirestore:function(e){var t=[];return e.parents.forEach((function(e){t.push({id:e.id,name:e.name})})),{version:e.version,name:e.name,parents:t}},fromFirestore:function(e,t){var n=e.data(t),r=[];return n.parents.forEach((function(e){r.push(new Ur(e.id,e.name))})),new nm(n.name,r)}};const im="@firebase/database",sm="0.13.3";let om="";class am{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,$r.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,$r.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class lm{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,$r.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const um=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new am(t)}}catch(e){}return new lm},cm=um("localStorage"),hm=um("sessionStorage"),dm=new qr.Yd("@firebase/database"),fm=function(){let e=1;return function(){return e++}}(),pm=function(e){const t=(0,$r.dS)(e),n=new $r.gQ;n.update(t);const r=n.digest();return $r.US.encodeByteArray(r)},mm=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=mm.apply(null,r):t+="object"==typeof r?(0,$r.Pz)(r):r,t+=" "}return t};let gm=null,ym=!0;const vm=function(...e){if(!0===ym&&(ym=!1,null===gm&&!0===hm.get("logging_enabled")&&(t=!0,(0,$r.hu)(!n||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(dm.logLevel=qr.in.VERBOSE,gm=dm.log.bind(dm),n&&hm.set("logging_enabled",!0)):"function"==typeof t?gm=t:(gm=null,hm.remove("logging_enabled")))),gm){const t=mm.apply(null,e);gm(t)}var t,n},bm=function(e){return function(...t){vm(e,...t)}},wm=function(...e){const t="FIREBASE INTERNAL ERROR: "+mm(...e);dm.error(t)},_m=function(...e){const t=`FIREBASE FATAL ERROR: ${mm(...e)}`;throw dm.error(t),new Error(t)},Em=function(...e){const t="FIREBASE WARNING: "+mm(...e);dm.warn(t)},Sm=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},km="[MIN_NAME]",Cm="[MAX_NAME]",Tm=function(e,t){if(e===t)return 0;if(e===km||t===Cm)return-1;if(t===km||e===Cm)return 1;{const n=Dm(e),r=Dm(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Im=function(e,t){return e===t?0:e<t?-1:1},xm=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,$r.Pz)(t))},Nm=function(e){if("object"!=typeof e||null===e)return(0,$r.Pz)(e);const t=[];for(const n in e)t.push(n);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=(0,$r.Pz)(t[r]),n+=":",n+=Nm(e[t[r]]);return n+="}",n},Pm=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Rm(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Om=function(e){(0,$r.hu)(!Sm(e),"Invalid JSON number");let t,n,r,i,s;0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=i+1023,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));const o=[];for(s=52;s;s-=1)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)o.push(n%2?1:0),n=Math.floor(n/2);o.push(t?1:0),o.reverse();const a=o.join("");let l="";for(s=0;s<64;s+=8){let e=parseInt(a.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},Am=new RegExp("^-?(0*)\\d{1,10}$"),Dm=function(e){if(Am.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Mm=function(e){try{e()}catch(e){setTimeout((()=>{const t=e.stack||"";throw Em("Exception was thrown by user callback.",t),e}),Math.floor(0))}},Lm=function(e,t){const n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n};class Fm{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Em(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class zm{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(vm("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Em(e)}}class Um{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Um.OWNER="owner";const jm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Vm="websocket",Bm="long_polling";class qm{constructor(e,t,n,r,i=!1,s="",o=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=cm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&cm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function $m(e,t,n){let r;if((0,$r.hu)("string"==typeof t,"typeof type must == string"),(0,$r.hu)("object"==typeof n,"typeof params must == object"),t===Vm)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Bm)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Rm(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class Wm{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,$r.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,$r.p$)(this.counters_)}}const Hm={},Km={};function Gm(e){const t=e.toString();return Hm[t]||(Hm[t]=new Wm),Hm[t]}class Qm{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Mm((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ym{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bm(e),this.stats_=Gm(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),$m(t,Bm,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Qm(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if((0,$r.Yr)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zm(((...e)=>{const[t,n,r,i,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===t)this.id=n,this.password=r;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)}),(()=>{this.onClosed_()}),this.urlFn);const e={start:"t"};e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&jm.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ym.forceAllow_=!0}static forceDisallow(){Ym.forceDisallow_=!0}static isAvailable(){return!((0,$r.Yr)()||!Ym.forceAllow_&&(Ym.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,$r.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=(0,$r.h$)(t),r=Pm(n,1840);for(let e=0;e<r.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,$r.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,$r.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Zm{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,$r.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=fm(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Zm.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(e){vm("frame writing exception"),e.stack&&vm(e.stack),vm(e)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||vm("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){(0,$r.Yr)()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{vm("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}}),Math.floor(1))}}let Xm=null;"undefined"!=typeof MozWebSocket?Xm=MozWebSocket:"undefined"!=typeof WebSocket&&(Xm=WebSocket);class Jm{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bm(this.connId),this.stats_=Gm(t),this.connURL=Jm.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={v:"5"};return!(0,$r.Yr)()&&"undefined"!=typeof location&&location.hostname&&jm.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s.ac=r),i&&(s.p=i),$m(e,Vm,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,cm.set("previous_websocket_failure",!0);try{let e;if((0,$r.Yr)()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/5/${om}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n=process.env,r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new Xm(this.connURL,[],e)}catch(e){this.log_("Error instantiating WebSocket.");const t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Jm.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Xm&&!Jm.forceDisallow_}static previouslyFailed(){return cm.isInMemoryStorage||!0===cm.get("previous_websocket_failure")}markConnectionHealthy(){cm.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,$r.cI)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,$r.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,$r.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Pm(t,16384);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Jm.responsesRequiredToBeHealthy=2,Jm.healthyTimeout=3e4;class eg{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ym,Jm]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Jm&&Jm.isAvailable();let n=t&&!Jm.previouslyFailed();if(e.webSocketOnly&&(t||Em("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Jm];else{const e=this.transports_=[];for(const t of eg.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);eg.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}eg.globalTransportInitialized_=!1;class tg{constructor(e,t,n,r,i,s,o,a,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bm("c:"+this.id+":"),this.transportManager_=new eg(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Lm((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=xm("t",e),n=xm("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=xm("t",e),n=xm("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=xm("t",e);if("d"in e){const n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?wm("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wm("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&Em("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Lm((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Lm((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(cm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ng{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class rg{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,$r.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let e=0;e<r.length;e++)if(r[e].callback===t&&(!n||n===r[e].context))return void r.splice(e,1)}validateEventType_(e){(0,$r.hu)(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class ig extends rg{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,$r.uI)()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new ig}getInitialEvent(e){return(0,$r.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class sg{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function og(){return new sg("")}function ag(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function lg(e){return e.pieces_.length-e.pieceNum_}function ug(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new sg(e.pieces_,t)}function cg(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function hg(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function dg(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new sg(t,0)}function fg(e,t){const n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof sg)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new sg(n,0)}function pg(e){return e.pieceNum_>=e.pieces_.length}function mg(e,t){const n=ag(e),r=ag(t);if(null===n)return t;if(n===r)return mg(ug(e),ug(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function gg(e,t){if(lg(e)!==lg(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function yg(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(lg(e)>lg(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class vg{constructor(e,t){this.errorPrefix_=t,this.parts_=hg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=(0,$r.ug)(this.parts_[e]);bg(this)}}function bg(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+wg(e))}function wg(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class _g extends rg{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new _g}getInitialEvent(e){return(0,$r.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Eg=1e3;class Sg extends ng{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=Sg.nextPersistentConnectionId_++,this.log_=bm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Eg,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!(0,$r.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_g.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&ig.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r,a:e,b:t};this.log_((0,$r.Pz)(i)),(0,$r.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new $r.BH,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,$r.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,$r.hu)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;Sg.warnOnListenWarnings_(s,t),(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&(0,$r.r3)(e,"w")){const n=(0,$r.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Em(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,$r.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,$r.w9)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,$r.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,$r.Pz)(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):wm("Unrecognized action received from server: "+(0,$r.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,$r.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Eg,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Eg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Eg),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Sg.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){(0,$r.hu)(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?vm("getToken() completed but was canceled"):(vm("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new tg(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Em(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(e){this.log_("Failed to get token: "+e),s||(this.repoInfo_.nodeAdmin&&Em(e),a())}}}interrupt(e){vm("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){vm("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,$r.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Eg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Nm(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new sg(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){vm("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){vm("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,$r.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+om.replace(/\./g,"-")]=1,(0,$r.uI)()?e["framework.cordova"]=1:(0,$r.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ig.getInstance().currentlyOnline();return(0,$r.xb)(this.interruptReasons_)&&e}}Sg.nextPersistentConnectionId_=0,Sg.nextConnectionId_=0;class kg{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new kg(e,t)}}class Cg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new kg(km,e),r=new kg(km,t);return 0!==this.compare(n,r)}minPost(){return kg.MIN}}let Tg;class Ig extends Cg{static get __EMPTY_NODE(){return Tg}static set __EMPTY_NODE(e){Tg=e}compare(e,t){return Tm(e.name,t.name)}isDefinedOn(e){throw(0,$r.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return kg.MIN}maxPost(){return new kg(Cm,Tg)}makePost(e,t){return(0,$r.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new kg(e,Tg)}toString(){return".key"}}const xg=new Ig;class Ng{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Pg{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Pg.RED,this.left=null!=r?r:Rg.EMPTY_NODE,this.right=null!=i?i:Rg.EMPTY_NODE}copy(e,t,n,r,i){return new Pg(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Rg.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Rg.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Pg.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Pg.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Pg.RED=!0,Pg.BLACK=!1;class Rg{constructor(e,t=Rg.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Rg(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Pg.BLACK,null,null))}remove(e){return new Rg(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pg.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ng(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ng(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ng(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ng(this.root_,null,this.comparator_,!0,e)}}function Og(e,t){return Tm(e.name,t.name)}function Ag(e,t){return Tm(e,t)}let Dg;Rg.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Pg(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Mg=function(e){return"number"==typeof e?"number:"+Om(e):"string:"+e},Lg=function(e){if(e.isLeafNode()){const t=e.val();(0,$r.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,$r.r3)(t,".sv"),"Priority must be a string or number.")}else(0,$r.hu)(e===Dg||e.isEmpty(),"priority of unexpected type.");(0,$r.hu)(e===Dg||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Fg,zg,Ug;class jg{constructor(e,t=jg.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,(0,$r.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Lg(this.priorityNode_)}static set __childrenNodeConstructor(e){Fg=e}static get __childrenNodeConstructor(){return Fg}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new jg(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:jg.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return pg(e)?this:".priority"===ag(e)?this.priorityNode_:jg.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:jg.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=ag(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:((0,$r.hu)(".priority"!==n||1===lg(e),".priority must be the last token in a path"),this.updateImmediateChild(n,jg.__childrenNodeConstructor.EMPTY_NODE.updateChild(ug(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Mg(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Om(this.value_):this.value_,this.lazyHash_=pm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===jg.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof jg.__childrenNodeConstructor?-1:((0,$r.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=jg.VALUE_TYPE_ORDER.indexOf(t),i=jg.VALUE_TYPE_ORDER.indexOf(n);return(0,$r.hu)(r>=0,"Unknown leaf type: "+t),(0,$r.hu)(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}jg.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Vg=new class extends Cg{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Tm(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return kg.MIN}maxPost(){return new kg(Cm,new jg("[PRIORITY-POST]",Ug))}makePost(e,t){const n=zg(e);return new kg(t,new jg("[PRIORITY-POST]",n))}toString(){return".priority"}},Bg=Math.log(2);class qg{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Bg,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const $g=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Pg(a,o.node,Pg.BLACK,null,null);{const l=parseInt(s/2,10)+t,u=i(t,l),c=i(l+1,r);return o=e[l],a=n?n(o):o,new Pg(a,o.node,Pg.BLACK,u,c)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const u=i(s+1,a),c=e[s],h=n?n(c):c;l(new Pg(h,c.node,r,null,u))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Pg.BLACK):(a(r,Pg.BLACK),a(r,Pg.RED))}return s}(new qg(e.length));return new Rg(r||t,s)};let Wg;const Hg={};class Kg{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,$r.hu)(Hg&&Vg,"ChildrenNode.ts has not been loaded"),Wg=Wg||new Kg({".priority":Hg},{".priority":Vg}),Wg}get(e){const t=(0,$r.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Rg?t:null}hasIndex(e){return(0,$r.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,$r.hu)(e!==xg,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(kg.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?$g(n,e.getCompare()):Hg;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const u=Object.assign({},this.indexes_);return u[a]=s,new Kg(u,l)}addToIndexes(e,t){const n=(0,$r.UI)(this.indexes_,((n,r)=>{const i=(0,$r.DV)(this.indexSet_,r);if((0,$r.hu)(i,"Missing index implementation for "+r),n===Hg){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(kg.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),$g(n,i.getCompare())}return Hg}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new kg(e.name,r))),i.insert(e,e.node)}}));return new Kg(n,this.indexSet_)}removeFromIndexes(e,t){const n=(0,$r.UI)(this.indexes_,(n=>{if(n===Hg)return n;{const r=t.get(e.name);return r?n.remove(new kg(e.name,r)):n}}));return new Kg(n,this.indexSet_)}}let Gg;class Qg{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Lg(this.priorityNode_),this.children_.isEmpty()&&(0,$r.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Gg||(Gg=new Qg(new Rg(Ag),null,Kg.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Gg}updatePriority(e){return this.children_.isEmpty()?this:new Qg(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Gg:t}}getChild(e){const t=ag(e);return null===t?this:this.getImmediateChild(t).getChild(ug(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if((0,$r.hu)(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new kg(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?Gg:this.priorityNode_;return new Qg(r,s,i)}}updateChild(e,t){const n=ag(e);if(null===n)return t;{(0,$r.hu)(".priority"!==ag(e)||1===lg(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(ug(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Vg,((s,o)=>{t[s]=o.val(e),n++,i&&Qg.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Mg(this.getPriority().val())+":"),this.forEachChild(Vg,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":pm(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new kg(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new kg(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new kg(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,kg.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,kg.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Yg?-1:0}withIndex(e){if(e===xg||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Qg(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===xg||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Vg),n=t.getIterator(Vg);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===xg?null:this.indexMap_.get(e.toString())}}Qg.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Yg=new class extends Qg{constructor(){super(new Rg(Ag),Qg.EMPTY_NODE,Kg.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Qg.EMPTY_NODE}isEmpty(){return!1}};function Zg(e,t=null){if(null===e)return Qg.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,$r.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new jg(e,Zg(t));if(e instanceof Array){let n=Qg.EMPTY_NODE;return Rm(e,((t,r)=>{if((0,$r.r3)(e,t)&&"."!==t.substring(0,1)){const e=Zg(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Zg(t))}{const n=[];let r=!1;if(Rm(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Zg(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new kg(e,i)))}})),0===n.length)return Qg.EMPTY_NODE;const i=$g(n,Og,(e=>e.name),Ag);if(r){const e=$g(n,Vg.getCompare());return new Qg(i,Zg(t),new Kg({".priority":e},{".priority":Vg}))}return new Qg(i,Zg(t),Kg.Default)}}Object.defineProperties(kg,{MIN:{value:new kg(km,Qg.EMPTY_NODE)},MAX:{value:new kg(Cm,Yg)}}),Ig.__EMPTY_NODE=Qg.EMPTY_NODE,jg.__childrenNodeConstructor=Qg,Dg=Yg,Ug=Yg,function(e){zg=e}(Zg);class Xg extends Cg{constructor(e){super(),this.indexPath_=e,(0,$r.hu)(!pg(e)&&".priority"!==ag(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Tm(e.name,t.name):i}makePost(e,t){const n=Zg(e),r=Qg.EMPTY_NODE.updateChild(this.indexPath_,n);return new kg(t,r)}maxPost(){const e=Qg.EMPTY_NODE.updateChild(this.indexPath_,Yg);return new kg(Cm,e)}toString(){return hg(this.indexPath_,0).join("/")}}const Jg=new class extends Cg{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Tm(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return kg.MIN}maxPost(){return kg.MAX}makePost(e,t){const n=Zg(e);return new kg(t,n)}toString(){return".value"}},ey="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ty=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=ey.charAt(n%64),n=Math.floor(n/64);(0,$r.hu)(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=ey.charAt(t[i]);return(0,$r.hu)(20===o.length,"nextPushId: Length should be 20."),o}}();function ny(e){return{type:"value",snapshotNode:e}}function ry(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function iy(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function sy(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class oy{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){(0,$r.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(iy(t,o)):(0,$r.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(ry(t,n)):s.trackChildChange(sy(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Vg,((e,r)=>{t.hasChild(e)||n.trackChildChange(iy(e,r))})),t.isLeafNode()||t.forEachChild(Vg,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(sy(t,r,i))}else n.trackChildChange(ry(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Qg.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ay{constructor(e){this.indexedFilter_=new oy(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ay.getStartPost_(e),this.endPost_=ay.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,n,r,i,s){return this.matches(new kg(t,n))||(n=Qg.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Qg.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Qg.EMPTY_NODE);const i=this;return t.forEachChild(Vg,((e,t)=>{i.matches(new kg(e,t))||(r=r.updateImmediateChild(e,Qg.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class ly{constructor(e){this.rangedFilter_=new ay(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new kg(t,n))||(n=Qg.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Qg.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=Qg.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();let i;if(i=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),t)<=0:this.index_.compare(t,this.rangedFilter_.getEndPost())<=0,!i)break;r=r.updateImmediateChild(t.name,t.node),n++}}else{let e,n,i,s;if(r=t.withIndex(this.index_),r=r.updatePriority(Qg.EMPTY_NODE),this.reverse_){s=r.getReverseIterator(this.index_),e=this.rangedFilter_.getEndPost(),n=this.rangedFilter_.getStartPost();const t=this.index_.getCompare();i=(e,n)=>t(n,e)}else s=r.getIterator(this.index_),e=this.rangedFilter_.getStartPost(),n=this.rangedFilter_.getEndPost(),i=this.index_.getCompare();let o=0,a=!1;for(;s.hasNext();){const t=s.getNext();!a&&i(e,t)<=0&&(a=!0),a&&o<this.limit_&&i(t,n)<=0?o++:r=r.updateImmediateChild(t.name,Qg.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;(0,$r.hu)(o.numChildren()===this.limit_,"");const a=new kg(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),u=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let c=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=c&&(c.name===t||o.hasChild(c.name));)c=r.getChildAfterChild(this.index_,c,this.reverse_);const h=null==c?1:s(c,a);if(u&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(sy(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(iy(t,e));const n=o.updateImmediateChild(t,Qg.EMPTY_NODE);return null!=c&&this.rangedFilter_.matches(c)?(null!=i&&i.trackChildChange(ry(c.name,c.node)),n.updateImmediateChild(c.name,c.node)):n}}return n.isEmpty()?e:u&&s(l,a)>=0?(null!=i&&(i.trackChildChange(iy(l.name,l.node)),i.trackChildChange(ry(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,Qg.EMPTY_NODE)):e}}class uy{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Vg}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,$r.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,$r.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:km}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,$r.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,$r.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Cm}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,$r.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Vg}copy(){const e=new uy;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function cy(e){const t={};if(e.isDefault())return t;let n;return e.index_===Vg?n="$priority":e.index_===Jg?n="$value":e.index_===xg?n="$key":((0,$r.hu)(e.index_ instanceof Xg,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=(0,$r.Pz)(n),e.startSet_&&(t.startAt=(0,$r.Pz)(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+(0,$r.Pz)(e.indexStartName_))),e.endSet_&&(t.endAt=(0,$r.Pz)(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+(0,$r.Pz)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function hy(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Vg&&(t.i=e.index_.toString()),t}class dy extends ng{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=bm("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,$r.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=dy.getListenId_(e,n),o={};this.listens_[s]=o;const a=cy(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),(0,$r.DV)(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=dy.getListenId_(e,t);delete this.listens_[n]}get(e){const t=cy(e._queryParams),n=e._path.toString(),r=new $r.BH;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,$r.xO)(t);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=(0,$r.cI)(o.responseText)}catch(e){Em("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&Em("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()}))}}class fy{constructor(){this.rootNode_=Qg.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function py(){return{value:null,children:new Map}}function my(e,t,n){if(pg(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=ag(t);e.children.has(r)||e.children.set(r,py()),my(e.children.get(r),t=ug(t),n)}}function gy(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{gy(r,new sg(t.toString()+"/"+e),n)}))}class yy{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Rm(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class vy{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new yy(e);const n=1e4+2e4*Math.random();Lm(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Rm(e,((e,r)=>{r>0&&(0,$r.r3)(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),Lm(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var by;function wy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(by||(by={}));class _y{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=by.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(pg(this.path)){if(null!=this.affectedTree.value)return(0,$r.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new sg(e));return new _y(og(),t,this.revert)}}return(0,$r.hu)(ag(this.path)===e,"operationForChild called for unrelated child."),new _y(ug(this.path),this.affectedTree,this.revert)}}class Ey{constructor(e,t){this.source=e,this.path=t,this.type=by.LISTEN_COMPLETE}operationForChild(e){return pg(this.path)?new Ey(this.source,og()):new Ey(this.source,ug(this.path))}}class Sy{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=by.OVERWRITE}operationForChild(e){return pg(this.path)?new Sy(this.source,og(),this.snap.getImmediateChild(e)):new Sy(this.source,ug(this.path),this.snap)}}class ky{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=by.MERGE}operationForChild(e){if(pg(this.path)){const t=this.children.subtree(new sg(e));return t.isEmpty()?null:t.value?new Sy(this.source,og(),t.value):new ky(this.source,og(),t)}return(0,$r.hu)(ag(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ky(this.source,ug(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Cy{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(pg(e))return this.isFullyInitialized()&&!this.filtered_;const t=ag(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Ty{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Iy(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw(0,$r.g5)("Should only compare child_ events.");const r=new kg(t.childName,t.snapshotNode),i=new kg(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function xy(e,t){return{eventCache:e,serverCache:t}}function Ny(e,t,n,r){return xy(new Cy(t,n,r),e.serverCache)}function Py(e,t,n,r){return xy(e.eventCache,new Cy(t,n,r))}function Ry(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Oy(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Ay;class Dy{constructor(e,t=(()=>(Ay||(Ay=new Rg(Im)),Ay))()){this.value=e,this.children=t}static fromObject(e){let t=new Dy(null);return Rm(e,((e,n)=>{t=t.set(new sg(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:og(),value:this.value};if(pg(e))return null;{const n=ag(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(ug(e),t);return null!=i?{path:fg(new sg(n),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(pg(e))return this;{const t=ag(e),n=this.children.get(t);return null!==n?n.subtree(ug(e)):new Dy(null)}}set(e,t){if(pg(e))return new Dy(t,this.children);{const n=ag(e),r=(this.children.get(n)||new Dy(null)).set(ug(e),t),i=this.children.insert(n,r);return new Dy(this.value,i)}}remove(e){if(pg(e))return this.children.isEmpty()?new Dy(null):new Dy(null,this.children);{const t=ag(e),n=this.children.get(t);if(n){const r=n.remove(ug(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Dy(null):new Dy(this.value,i)}return this}}get(e){if(pg(e))return this.value;{const t=ag(e),n=this.children.get(t);return n?n.get(ug(e)):null}}setTree(e,t){if(pg(e))return t;{const n=ag(e),r=(this.children.get(n)||new Dy(null)).setTree(ug(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Dy(this.value,i)}}fold(e){return this.fold_(og(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(fg(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,og(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(pg(e))return null;{const r=ag(e),i=this.children.get(r);return i?i.findOnPath_(ug(e),fg(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,og(),t)}foreachOnPath_(e,t,n){if(pg(e))return this;{this.value&&n(t,this.value);const r=ag(e),i=this.children.get(r);return i?i.foreachOnPath_(ug(e),fg(t,r),n):new Dy(null)}}foreach(e){this.foreach_(og(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(fg(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class My{constructor(e){this.writeTree_=e}static empty(){return new My(new Dy(null))}}function Ly(e,t,n){if(pg(t))return new My(new Dy(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=mg(i,t);return s=s.updateChild(o,n),new My(e.writeTree_.set(i,s))}{const r=new Dy(n),i=e.writeTree_.setTree(t,r);return new My(i)}}}function Fy(e,t,n){let r=e;return Rm(n,((e,n)=>{r=Ly(r,fg(t,e),n)})),r}function zy(e,t){if(pg(t))return My.empty();{const n=e.writeTree_.setTree(t,new Dy(null));return new My(n)}}function Uy(e,t){return null!=jy(e,t)}function jy(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(mg(n.path,t)):null}function Vy(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Vg,((e,n)=>{t.push(new kg(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new kg(e,n.value))})),t}function By(e,t){if(pg(t))return e;{const n=jy(e,t);return new My(null!=n?new Dy(n):e.writeTree_.subtree(t))}}function qy(e){return e.writeTree_.isEmpty()}function $y(e,t){return Wy(og(),e.writeTree_,t)}function Wy(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?((0,$r.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Wy(fg(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(fg(e,".priority"),r)),n}}function Hy(e,t){return rv(t,e)}function Ky(e,t){if(e.snap)return yg(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&yg(fg(e.path,n),t))return!0;return!1}function Gy(e){return e.visible}function Qy(e,t,n){let r=My.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)yg(n,e)?(t=mg(n,e),r=Ly(r,t,s.snap)):yg(e,n)&&(t=mg(e,n),r=Ly(r,og(),s.snap.getChild(t)));else{if(!s.children)throw(0,$r.g5)("WriteRecord should have .snap or .children");if(yg(n,e))t=mg(n,e),r=Fy(r,t,s.children);else if(yg(e,n))if(t=mg(e,n),pg(t))r=Fy(r,og(),s.children);else{const e=(0,$r.DV)(s.children,ag(t));if(e){const n=e.getChild(ug(t));r=Ly(r,og(),n)}}}}}return r}function Yy(e,t,n,r,i){if(r||i){const s=By(e.visibleWrites,t);if(!i&&qy(s))return n;if(i||null!=n||Uy(s,og())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(yg(e.path,t)||yg(t,e.path))};return $y(Qy(e.allWrites,s,t),n||Qg.EMPTY_NODE)}return null}{const r=jy(e.visibleWrites,t);if(null!=r)return r;{const r=By(e.visibleWrites,t);return qy(r)?n:null!=n||Uy(r,og())?$y(r,n||Qg.EMPTY_NODE):null}}}function Zy(e,t,n,r){return Yy(e.writeTree,e.treePath,t,n,r)}function Xy(e,t){return function(e,t,n){let r=Qg.EMPTY_NODE;const i=jy(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Vg,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=By(e.visibleWrites,t);return n.forEachChild(Vg,((e,t)=>{const n=$y(By(i,new sg(e)),t);r=r.updateImmediateChild(e,n)})),Vy(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Vy(By(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Jy(e,t,n,r){return function(e,t,n,r,i){(0,$r.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=fg(t,n);if(Uy(e.visibleWrites,s))return null;{const t=By(e.visibleWrites,s);return qy(t)?i.getChild(n):$y(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function ev(e,t){return function(e,t){return jy(e.visibleWrites,t)}(e.writeTree,fg(e.treePath,t))}function tv(e,t,n){return function(e,t,n,r){const i=fg(t,n),s=jy(e.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?$y(By(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function nv(e,t){return rv(fg(e.treePath,t),e.writeTree)}function rv(e,t){return{treePath:e,writeTree:t}}class iv{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;(0,$r.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,$r.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,sy(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,iy(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,ry(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,$r.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,sy(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const sv=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class ov{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Cy(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tv(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Oy(this.viewCache_),i=function(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=By(e.visibleWrites,t),u=jy(l,og());if(null!=u)a=u;else{if(null==n)return[];a=$y(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function av(e,t,n,r,i,s){const o=t.eventCache;if(null!=ev(r,n))return t;{let a,l;if(pg(n))if((0,$r.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Oy(t),i=Xy(r,n instanceof Qg?n:Qg.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=Zy(r,Oy(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const u=ag(n);if(".priority"===u){(0,$r.hu)(1===lg(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=Jy(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const c=ug(n);let h;if(o.isCompleteForChild(u)){l=t.serverCache.getNode();const e=Jy(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(u).updateChild(c,e):o.getNode().getImmediateChild(u)}else h=tv(r,u,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),u,h,c,i,s):o.getNode()}}return Ny(t,a,o.isFullyInitialized()||pg(n),e.filter.filtersNodes())}}function lv(e,t,n,r,i,s,o,a){const l=t.serverCache;let u;const c=o?e.filter:e.filter.getIndexedFilter();if(pg(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),e,null)}else{const e=ag(n);if(!l.isCompleteForPath(n)&&lg(n)>1)return t;const i=ug(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);u=".priority"===e?c.updatePriority(l.getNode(),s):c.updateChild(l.getNode(),e,s,i,sv,null)}const h=Py(t,u,l.isFullyInitialized()||pg(n),c.filtersNodes());return av(e,h,n,i,new ov(i,h,s),a)}function uv(e,t,n,r,i,s,o){const a=t.eventCache;let l,u;const c=new ov(i,t,s);if(pg(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Ny(t,u,!0,e.filter.filtersNodes());else{const i=ag(n);if(".priority"===i)u=e.filter.updatePriority(t.eventCache.getNode(),r),l=Ny(t,u,a.isFullyInitialized(),a.isFiltered());else{const s=ug(n),u=a.getNode().getImmediateChild(i);let h;if(pg(s))h=r;else{const e=c.getCompleteChild(i);h=null!=e?".priority"===cg(s)&&e.getChild(dg(s)).isEmpty()?e:e.updateChild(s,r):Qg.EMPTY_NODE}l=u.equals(h)?t:Ny(t,e.filter.updateChild(a.getNode(),i,h,s,c,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return l}function cv(e,t){return e.eventCache.isCompleteForChild(t)}function hv(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function dv(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,u=t;l=pg(n)?r:new Dy(null).setTree(n,r);const c=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(c.hasChild(n)){const l=hv(0,t.serverCache.getNode().getImmediateChild(n),r);u=lv(e,u,new sg(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!c.hasChild(n)&&!l){const l=hv(0,t.serverCache.getNode().getImmediateChild(n),r);u=lv(e,u,new sg(n),l,i,s,o,a)}})),u}class fv{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new oy(n.getIndex()),i=(s=n).loadsAllData()?new oy(s.getIndex()):s.hasLimit()?new ly(s):new ay(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(Qg.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Qg.EMPTY_NODE,a.getNode(),null),c=new Cy(l,o.isFullyInitialized(),r.filtersNodes()),h=new Cy(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=xy(h,c),this.eventGenerator_=new Ty(this.query_)}get query(){return this.query_}}function pv(e,t){const n=Oy(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!pg(t)&&!n.getImmediateChild(ag(t)).isEmpty())?n.getChild(t):null}function mv(e){return 0===e.eventRegistrations_.length}function gv(e,t,n){const r=[];if(n){(0,$r.hu)(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function yv(e,t,n,r){t.type===by.MERGE&&null!==t.source.queryId&&((0,$r.hu)(Oy(e.viewCache_),"We should always have a full cache before handling merges"),(0,$r.hu)(Ry(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=function(e,t,n,r,i){const s=new iv;let o,a;if(n.type===by.OVERWRITE){const l=n;l.source.fromUser?o=uv(e,t,l.path,l.snap,r,i,s):((0,$r.hu)(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!pg(l.path),o=lv(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===by.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const u=fg(n,r);cv(t,ag(u))&&(a=uv(e,a,u,l,i,s,o))})),r.foreach(((r,l)=>{const u=fg(n,r);cv(t,ag(u))||(a=uv(e,a,u,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):((0,$r.hu)(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=dv(e,t,l.path,l.children,r,i,a,s))}else if(n.type===by.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=ev(r,n))return t;{const a=new ov(r,t,i),l=t.eventCache.getNode();let u;if(pg(n)||".priority"===ag(n)){let n;if(t.serverCache.isFullyInitialized())n=Zy(r,Oy(t));else{const e=t.serverCache.getNode();(0,$r.hu)(e instanceof Qg,"serverChildren would be complete if leaf node"),n=Xy(r,e)}u=e.filter.updateFullNode(l,n,s)}else{const i=ag(n);let c=tv(r,i,t.serverCache);null==c&&t.serverCache.isCompleteForChild(i)&&(c=l.getImmediateChild(i)),u=null!=c?e.filter.updateChild(l,i,c,ug(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Qg.EMPTY_NODE,ug(n),a,s):l,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Zy(r,Oy(t)),o.isLeafNode()&&(u=e.filter.updateFullNode(u,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=ev(r,og()),Ny(t,u,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=ev(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(pg(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return lv(e,t,n,l.getNode().getChild(n),i,s,a,o);if(pg(n)){let r=new Dy(null);return l.getNode().forEachChild(xg,((e,t)=>{r=r.set(new sg(e),t)})),dv(e,t,n,r,i,s,a,o)}return t}{let u=new Dy(null);return r.foreach(((e,t)=>{const r=fg(n,e);l.isCompleteForPath(r)&&(u=u.set(e,l.getNode().getChild(r)))})),dv(e,t,n,u,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==by.LISTEN_COMPLETE)throw(0,$r.g5)("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache;return av(e,Py(t,s.getNode(),s.isFullyInitialized()||pg(n),s.isFiltered()),n,r,sv,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Ry(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(ny(Ry(t)))}}(t,o,l),{viewCache:o,changes:l}}(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,(0,$r.hu)(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),(0,$r.hu)(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),(0,$r.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,vv(e,s.changes,s.viewCache.eventCache.getNode(),null)}function vv(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Iy(e,i,"child_removed",t,r,n),Iy(e,i,"child_added",t,r,n),Iy(e,i,"child_moved",s,r,n),Iy(e,i,"child_changed",t,r,n),Iy(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let bv,wv;class _v{constructor(){this.views=new Map}}function Ev(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return(0,$r.hu)(null!=s,"SyncTree gave us an op for an invalid query."),yv(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(yv(s,t,n,r));return i}}function Sv(e,t,n,r,i,s){const o=function(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=Zy(n,i?r:null),s=!1;e?s=!0:r instanceof Qg?(e=Xy(n,r),s=!1):(e=Qg.EMPTY_NODE,s=!1);const o=xy(new Cy(e,s,!1),new Cy(r,i,!1));return new fv(t,o)}return o}(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Vg,((e,t)=>{r.push(ry(e,t))})),n.isFullyInitialized()&&r.push(ny(n.getNode())),vv(e,r,n.getNode(),t)}(o,n)}function kv(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Cv(e,t){let n=null;for(const r of e.views.values())n=n||pv(r,t);return n}function Tv(e,t){if(t._queryParams.loadsAllData())return Nv(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Iv(e,t){return null!=Tv(e,t)}function xv(e){return null!=Nv(e)}function Nv(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Pv=1;class Rv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Dy(null),this.pendingWriteTree_={visibleWrites:My.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ov(e,t,n,r,i){return function(e,t,n,r,i){(0,$r.hu)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ly(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?zv(e,new Sy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Av(e,t,n=!1){const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(function(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));(0,$r.hu)(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&Ky(t,r.path)?i=!1:yg(r.path,t.path)&&(s=!0)),o--}return!!i&&(s?(function(e){e.visibleWrites=Qy(e.allWrites,Gy,og()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0):(r.snap?e.visibleWrites=zy(e.visibleWrites,r.path):Rm(r.children,(t=>{e.visibleWrites=zy(e.visibleWrites,fg(r.path,t))})),!0))}(e.pendingWriteTree_,t)){let t=new Dy(null);return null!=r.snap?t=t.set(og(),!0):Rm(r.children,(e=>{t=t.set(new sg(e),!0)})),zv(e,new _y(r.path,t,n))}return[]}function Dv(e,t,n){return zv(e,new Sy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Mv(e,t,n,r){const i=t._path,s=e.syncPointTree_.get(i);let o=[];if(s&&("default"===t._queryIdentifier||Iv(s,t))){const a=function(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=xv(e);if("default"===i)for(const[t,i]of e.views.entries())o=o.concat(gv(i,n,r)),mv(i)&&(e.views.delete(t),i.query._queryParams.loadsAllData()||s.push(i.query));else{const t=e.views.get(i);t&&(o=o.concat(gv(t,n,r)),mv(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!xv(e)&&s.push(new((0,$r.hu)(bv,"Reference.ts has not been loaded"),bv)(t._repo,t._path)),{removed:s,events:o}}(s,t,n,r);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));const l=a.removed;o=a.events;const u=-1!==l.findIndex((e=>e._queryParams.loadsAllData())),c=e.syncPointTree_.findOnPath(i,((e,t)=>xv(t)));if(u&&!c){const t=e.syncPointTree_.subtree(i);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&xv(t))return[Nv(t)];{let e=[];return t&&(e=kv(t)),Rm(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=Vv(e,r);e.listenProvider_.startListening(Kv(i),Bv(e,i),s.hashFn,s.onComplete)}}}if(!c&&l.length>0&&!r)if(u){const n=null;e.listenProvider_.stopListening(Kv(t),n)}else l.forEach((t=>{const n=e.queryToTagMap.get(qv(t));e.listenProvider_.stopListening(Kv(t),n)}));!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=qv(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,l)}return o}function Lv(e,t,n){const{syncPoint:r,serverCache:i,writesCache:s,serverCacheComplete:o,viewAlreadyExists:a,foundAncestorDefaultView:l}=function(e,t){const n=e._path;let r=null,i=!1;t.syncPointTree_.foreachOnPath(n,((e,t)=>{const s=mg(e,n);r=r||Cv(t,s),i=i||xv(t)}));let s,o=t.syncPointTree_.get(n);o?(i=i||xv(o),r=r||Cv(o,og())):(o=new _v,t.syncPointTree_=t.syncPointTree_.set(n,o)),null!=r?s=!0:(s=!1,r=Qg.EMPTY_NODE,t.syncPointTree_.subtree(n).foreachChild(((e,t)=>{const n=Cv(t,og());n&&(r=r.updateImmediateChild(e,n))})));const a=Iv(o,e);if(!a&&!e._queryParams.loadsAllData()){const n=qv(e);(0,$r.hu)(!t.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Pv++;t.queryToTagMap.set(n,r),t.tagToQueryMap.set(r,n)}return{syncPoint:o,writesCache:Hy(t.pendingWriteTree_,n),serverCache:r,serverCacheComplete:s,foundAncestorDefaultView:i,viewAlreadyExists:a}}(t,e);let u=Sv(r,t,n,s,i,o);if(!a&&!l){const n=Tv(r,t);u=u.concat(function(e,t,n){const r=t._path,i=Bv(e,t),s=Vv(e,n),o=e.listenProvider_.startListening(Kv(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)(0,$r.hu)(!xv(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!pg(e)&&t&&xv(t))return[Nv(t).query];{let e=[];return t&&(e=e.concat(kv(t).map((e=>e.query)))),Rm(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Kv(r),Bv(e,r))}}return o}(e,t,n))}return u}function Fv(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Cv(n,mg(e,t));if(r)return r}));return Yy(r,t,i,n,!0)}function zv(e,t){return Uv(t,e.syncPointTree_,null,Hy(e.pendingWriteTree_,og()))}function Uv(e,t,n,r){if(pg(e.path))return jv(e,t,n,r);{const i=t.get(og());null==n&&null!=i&&(n=Cv(i,og()));let s=[];const o=ag(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=nv(r,o);s=s.concat(Uv(a,l,e,t))}return i&&(s=s.concat(Ev(i,e,r,n))),s}}function jv(e,t,n,r){const i=t.get(og());null==n&&null!=i&&(n=Cv(i,og()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=nv(r,t),l=e.operationForChild(t);l&&(s=s.concat(jv(l,i,o,a)))})),i&&(s=s.concat(Ev(i,e,r,n))),s}function Vv(e,t){const n=t.query,r=Bv(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Qg.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=$v(e,n);if(r){const n=Wv(r),i=n.path,s=n.queryId,o=mg(i,t);return Hv(e,i,new Ey(wy(s),o))}return[]}(e,n._path,r):function(e,t){return zv(e,new Ey({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Mv(e,n,null,r)}}}}function Bv(e,t){const n=qv(t);return e.queryToTagMap.get(n)}function qv(e){return e._path.toString()+"$"+e._queryIdentifier}function $v(e,t){return e.tagToQueryMap.get(t)}function Wv(e){const t=e.indexOf("$");return(0,$r.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new sg(e.substr(0,t))}}function Hv(e,t,n){const r=e.syncPointTree_.get(t);return(0,$r.hu)(r,"Missing sync point for query tag that we're tracking"),Ev(r,n,Hy(e.pendingWriteTree_,t),null)}function Kv(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,$r.hu)(wv,"Reference.ts has not been loaded"),wv)(e._repo,e._path):e}class Gv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Gv(t)}node(){return this.node_}}class Qv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=fg(this.path_,e);return new Qv(this.syncTree_,t)}node(){return Fv(this.syncTree_,this.path_)}}const Yv=function(e,t,n){return e&&"object"==typeof e?((0,$r.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Zv(e[".sv"],t,n):"object"==typeof e[".sv"]?Xv(e[".sv"],t):void(0,$r.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Zv=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,$r.hu)(!1,"Unexpected server value: "+e)},Xv=function(e,t,n){e.hasOwnProperty("increment")||(0,$r.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&(0,$r.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,$r.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},Jv=function(e,t,n){return eb(e,new Gv(t),n)};function eb(e,t,n){const r=e.getPriority().val(),i=Yv(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=Yv(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new jg(s,Zg(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new jg(i))),r.forEachChild(Vg,((e,r)=>{const i=eb(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class tb{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function nb(e,t){let n=t instanceof sg?t:new sg(t),r=e,i=ag(n);for(;null!==i;){const e=(0,$r.DV)(r.node.children,i)||{children:{},childCount:0};r=new tb(i,r,e),n=ug(n),i=ag(n)}return r}function rb(e){return e.node.value}function ib(e,t){e.node.value=t,ub(e)}function sb(e){return e.node.childCount>0}function ob(e,t){Rm(e.node.children,((n,r)=>{t(new tb(n,e,r))}))}function ab(e,t,n,r){n&&!r&&t(e),ob(e,(e=>{ab(e,t,!0,r)})),n&&r&&t(e)}function lb(e){return new sg(null===e.parent?e.name:lb(e.parent)+"/"+e.name)}function ub(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===rb(e)&&!sb(e)}(n),i=(0,$r.r3)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,ub(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,ub(e))}(e.parent,e.name,e)}const cb=/[\[\].#$\/\u0000-\u001F\u007F]/,hb=/[\[\].#$\u0000-\u001F\u007F]/,db=10485760,fb=function(e){return"string"==typeof e&&0!==e.length&&!cb.test(e)},pb=function(e){return"string"==typeof e&&0!==e.length&&!hb.test(e)},mb=function(e,t,n,r){r&&void 0===t||gb((0,$r.gK)(e,"value"),t,n)},gb=function(e,t,n){const r=n instanceof sg?new vg(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+wg(r));if("function"==typeof t)throw new Error(e+"contains a function "+wg(r)+" with contents = "+t.toString());if(Sm(t))throw new Error(e+"contains "+t.toString()+" "+wg(r));if("string"==typeof t&&t.length>db/3&&(0,$r.ug)(t)>db)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+wg(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,i=!1;if(Rm(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!fb(t)))throw new Error(e+" contains an invalid key ("+t+") "+wg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,$r.ug)(t),bg(e)}(r,t),gb(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=(0,$r.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+wg(r)+" in addition to actual children.")}},yb=function(e,t,n,r){if(!(r&&void 0===n||pb(n)))throw new Error((0,$r.gK)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},vb=function(e,t){if(".info"===ag(t))throw new Error(e+" failed = Can't modify data under /.info/")};class bb{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wb(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||gg(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function _b(e,t,n){wb(e,n),Sb(e,(e=>gg(e,t)))}function Eb(e,t,n){wb(e,n),Sb(e,(e=>yg(e,t)||yg(t,e)))}function Sb(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];i&&(t(i.path)?(kb(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function kb(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();gm&&vm("event: "+n.toString()),Mm(r)}}}class Cb{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bb,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=py(),this.transactionQueueTree_=new tb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Tb(e,t,n){if(e.stats_=Gm(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new dy(e.repoInfo_,((t,n,r,i)=>{Nb(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Pb(e,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,$r.Pz)(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new Sg(e.repoInfo_,t,((t,n,r,i)=>{Nb(e,t,n,r,i)}),(t=>{Pb(e,t)}),(t=>{!function(e,t){Rm(t,((t,n)=>{Rb(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(t,n){const r=t.toString();return Km[r]||(Km[r]=new vy(e.stats_,e.server_)),Km[r]}(e.repoInfo_),e.infoData_=new fy,e.infoSyncTree_=new Rv({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=Dv(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),Rb(e,"connected",!1),e.serverSyncTree_=new Rv({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);Eb(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Ib(e){const t=e.infoData_.getNode(new sg(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function xb(e){return(t=(t={timestamp:Ib(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Nb(e,t,n,r,i){e.dataUpdateCount++;const s=new sg(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=(0,$r.UI)(n,(e=>Zg(e)));o=function(e,t,n,r){const i=$v(e,r);if(i){const r=Wv(i),s=r.path,o=r.queryId,a=mg(s,t),l=Dy.fromObject(n);return Hv(e,s,new ky(wy(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Zg(n);o=function(e,t,n,r){const i=$v(e,r);if(null!=i){const r=Wv(i),s=r.path,o=r.queryId,a=mg(s,t);return Hv(e,s,new Sy(wy(o),a,n))}return[]}(e.serverSyncTree_,s,t,i)}else if(r){const t=(0,$r.UI)(n,(e=>Zg(e)));o=function(e,t,n){const r=Dy.fromObject(n);return zv(e,new ky({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Zg(n);o=Dv(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=zb(e,s)),Eb(e.eventQueue_,a,o)}function Pb(e,t){Rb(e,"connected",t),!1===t&&function(e){Mb(e,"onDisconnectEvents");const t=xb(e),n=py();gy(e.onDisconnect_,og(),((r,i)=>{const s=function(e,t,n,r){return eb(t,new Qv(n,e),r)}(r,i,e.serverSyncTree_,t);my(n,r,s)}));let r=[];gy(n,og(),((t,n)=>{r=r.concat(Dv(e.serverSyncTree_,t,n));const i=qb(e,t);zb(e,i)})),e.onDisconnect_=py(),Eb(e.eventQueue_,og(),r)}(e)}function Rb(e,t,n){const r=new sg("/.info/"+t),i=Zg(n);e.infoData_.updateSnapshot(r,i);const s=Dv(e.infoSyncTree_,r,i);Eb(e.eventQueue_,r,s)}function Ob(e){return e.nextWriteId_++}function Ab(e,t,n,r,i){Mb(e,"set",{path:t.toString(),value:n,priority:r});const s=xb(e),o=Zg(n,r),a=Fv(e.serverSyncTree_,t),l=Jv(o,a,s),u=Ob(e),c=Ov(e.serverSyncTree_,t,l,u,!0);wb(e.eventQueue_,c),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||Em("set at "+t+" failed: "+n);const o=Av(e.serverSyncTree_,u,!s);Eb(e.eventQueue_,t,o),function(e,t,n,r){t&&Mm((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}(0,i,n,r)}));const h=qb(e,t);zb(e,h),Eb(e.eventQueue_,h,[])}function Db(e,t,n){let r;r=".info"===ag(t._path)?Mv(e.infoSyncTree_,t,n):Mv(e.serverSyncTree_,t,n),_b(e.eventQueue_,t._path,r)}function Mb(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),vm(n,...t)}function Lb(e,t,n){return Fv(e.serverSyncTree_,t,n)||Qg.EMPTY_NODE}function Fb(e,t=e.transactionQueueTree_){if(t||Bb(e,t),rb(t)){const n=jb(e,t);(0,$r.hu)(n.length>0,"Sending zero length transaction queue"),n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=Lb(e,t,r);let s=i;const o=i.hash();for(let e=0;e<n.length;e++){const r=n[e];(0,$r.hu)(0===r.status,"tryToSendTransactionQueue_: items in queue should all be run."),r.status=1,r.retryCount++;const i=mg(t,r.path);s=s.updateChild(i,r.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{Mb(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Av(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();Bb(e,nb(e.transactionQueueTree_,t)),Fb(e,e.transactionQueueTree_),Eb(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Mm(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Em("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}zb(e,t)}}),o)}(e,lb(t),n)}else sb(t)&&ob(t,(t=>{Fb(e,t)}))}function zb(e,t){const n=Ub(e,t),r=lb(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let s=0;s<t.length;s++){const l=t[s],u=mg(n,l.path);let c,h=!1;if((0,$r.hu)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,c=l.abortReason,i=i.concat(Av(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)h=!0,c="maxretry",i=i.concat(Av(e.serverSyncTree_,l.currentWriteId,!0));else{const n=Lb(e,l.path,o);l.currentInputSnapshot=n;const r=t[s].update(n.val());if(void 0!==r){gb("transaction failed: Data returned ",r,l.path);let t=Zg(r);"object"==typeof r&&null!=r&&(0,$r.r3)(r,".priority")||(t=t.updatePriority(n.getPriority()));const s=l.currentWriteId,a=xb(e),u=Jv(t,n,a);l.currentOutputSnapshotRaw=t,l.currentOutputSnapshotResolved=u,l.currentWriteId=Ob(e),o.splice(o.indexOf(s),1),i=i.concat(Ov(e.serverSyncTree_,l.path,u,l.currentWriteId,l.applyLocally)),i=i.concat(Av(e.serverSyncTree_,s,!0))}else h=!0,c="nodata",i=i.concat(Av(e.serverSyncTree_,l.currentWriteId,!0))}Eb(e.eventQueue_,n,i),i=[],h&&(t[s].status=2,a=t[s].unwatcher,setTimeout(a,Math.floor(0)),t[s].onComplete&&("nodata"===c?r.push((()=>t[s].onComplete(null,!1,t[s].currentInputSnapshot))):r.push((()=>t[s].onComplete(new Error(c),!1,null)))))}var a;Bb(e,e.transactionQueueTree_);for(let e=0;e<r.length;e++)Mm(r[e]);Fb(e,e.transactionQueueTree_)}(e,jb(e,n),r),r}function Ub(e,t){let n,r=e.transactionQueueTree_;for(n=ag(t);null!==n&&void 0===rb(r);)r=nb(r,n),n=ag(t=ug(t));return r}function jb(e,t){const n=[];return Vb(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function Vb(e,t,n){const r=rb(t);if(r)for(let e=0;e<r.length;e++)n.push(r[e]);ob(t,(t=>{Vb(e,t,n)}))}function Bb(e,t){const n=rb(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,ib(t,n.length>0?n:void 0)}ob(t,(t=>{Bb(e,t)}))}function qb(e,t){const n=lb(Ub(e,t)),r=nb(e.transactionQueueTree_,t);return function(e,t,n){let r=e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{$b(e,t)})),$b(e,r),ab(r,(t=>{$b(e,t)})),n}function $b(e,t){const n=rb(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?((0,$r.hu)(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):((0,$r.hu)(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Av(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?ib(t,void 0):n.length=s+1,Eb(e.eventQueue_,lb(t),i);for(let e=0;e<r.length;e++)Mm(r[e])}}const Wb=function(e,t){const n=Hb(e),r=n.namespace;"firebase.com"===n.domain&&_m(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||_m("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Em("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new qm(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new sg(n.pathString)}},Hb=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof e){let u=e.indexOf("//");u>=0&&(a=e.substring(0,u-1),e=e.substring(u+2));let c=e.indexOf("/");-1===c&&(c=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=function(e){let t="";const n=e.split("/");for(let e=0;e<n.length;e++)if(n[e].length>0){let r=n[e];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(e){}t+="/"+r}return t}(e.substring(c,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Em(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));u=t.indexOf(":"),u>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(u+1),10)):u=t.length;const f=t.slice(0,u);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class Kb{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,$r.Pz)(this.snapshot.exportVal())}}class Gb{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Qb{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,$r.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Yb{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return pg(this._path)?null:cg(this._path)}get ref(){return new Zb(this._repo,this._path)}get _queryIdentifier(){const e=hy(this._queryParams),t=Nm(e);return"{}"===t?"default":t}get _queryObject(){return hy(this._queryParams)}isEqual(e){if(!((e=(0,$r.m9)(e))instanceof Yb))return!1;const t=this._repo===e._repo,n=gg(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Zb extends Yb{constructor(e,t){super(e,t,new uy,!1)}get parent(){const e=dg(this._path);return null===e?null:new Zb(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Xb{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new sg(e),n=ew(this.ref,e);return new Xb(this._node.getChild(t),n,Vg)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,((t,n)=>e(new Xb(n,ew(this.ref,t),Vg))))}hasChild(e){const t=new sg(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Jb(e,t){return(e=(0,$r.m9)(e))._checkNotDeleted("ref"),void 0!==t?ew(e._root,t):e._root}function ew(e,t){var n;return null===ag((e=(0,$r.m9)(e))._path)?("child","path",!1,(n=t)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),yb("child","path",n,false)):yb("child","path",t,!1),new Zb(e._repo,fg(e._path,t))}function tw(e,t){e=(0,$r.m9)(e),vb("set",e._path),mb("set",t,e._path,!1);const n=new $r.BH;return Ab(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}class nw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Kb("value",this,new Xb(e.snapshotNode,new Zb(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Gb(this,e,t):null}matches(e){return e instanceof nw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class rw{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Gb(this,e,t):null}createEvent(e,t){(0,$r.hu)(null!=e.childName,"Child events should have a childName.");const n=ew(new Zb(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Kb(e.type,this,new Xb(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof rw&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function iw(e,t,n,r){return function(e,t,n,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{Db(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new Qb(n,s||void 0),a="value"===t?new nw(o):new rw(t,o);return function(e,t,n){let r;r=".info"===ag(t._path)?Lv(e.infoSyncTree_,t,n):Lv(e.serverSyncTree_,t,n),_b(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>Db(e._repo,e,a)}(e,"value",t,n,r)}!function(e){(0,$r.hu)(!bv,"__referenceConstructor has already been defined"),bv=e}(Zb),function(e){(0,$r.hu)(!wv,"__referenceConstructor has already been defined"),wv=e}(Zb);const sw={};function ow(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||_m("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),vm("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=Wb(s,i),u=l.repoInfo;"undefined"!=typeof process&&process.env&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${u.namespace}`,l=Wb(s,i),u=l.repoInfo):o=!l.repoInfo.secure;const c=i&&o?new Um(Um.OWNER):new zm(e.name,e.options,t);(function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!fb(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),pb(e)}(n))throw new Error((0,$r.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",l),pg(l.path)||_m("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=sw[t.name];i||(i={},sw[t.name]=i);let s=i[e.toURLString()];return s&&_m("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Cb(e,false,n,r),i[e.toURLString()]=s,s}(u,e,c,new Fm(e.name,n));return new aw(h,e)}class aw{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Tb(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Zb(this._repo,og())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=sw[t];n&&n[e.key]===e||_m(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&_m("Cannot call "+e+" on a deleted database.")}}Sg.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Sg.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},function(e){om=e}(Or.Jn),(0,Or.Xd)(new Br.wA("database",((e,{instanceIdentifier:t})=>ow(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),(0,Or.KN)(im,sm,undefined),(0,Or.KN)(im,sm,"esm2017");var lw=function(){function e(){r(this,e),this.db=function(e=(0,Or.Mq)(),t){return(0,Or.qX)(e,"database").getImmediate({identifier:t})}(Fr)}return s(e,[{key:"deleteNode",value:function(e){!function(e){vb("remove",e._path),tw(e,null)}(Jb(this.db,"nodes/"+e))}},{key:"setBase",value:function(e){var t=Jb(this.db,"nodes/"+e+"/comments/"),n=["Free your ideas!","Your ideas... gotta share 'em...","Brilliant, don't stop thinking!","This one is it, chief! Exactly it!","There is an idea here, you are the one to write it down though!"];iw(t,(function(e){if(e.exists()){var r=[];e.forEach((function(e){var t=e.val();r.push(t)})),or.dispatch(function(e){return{type:Nn,payload:e}}(r))}else tw(t,[{date:Date.now(),uId:"NqT5XjbHvFVDobcNW9KVhd4Zsgz1",uName:"admin",text:n[Math.floor(Math.random()*n.length)]}])}))}},{key:"addComment",value:function(e){var t=cw.getInstance().recentNodes[0];(function(e,t){e=(0,$r.m9)(e),vb("push",e._path),mb("push",t,e._path,!0);const n=Ib(e._repo),r=ty(n),i=ew(e,r),s=ew(e,r);let o;return o=null!=t?tw(s,t).then((()=>s)):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i})(Jb(this.db,"nodes/"+t+"/comments/"),{date:Date.now(),uId:or.getState().profileReducer.userId,uName:or.getState().profileReducer.userName,text:e}).then((function(e){})).catch((function(e){console.log(e)}))}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();function uw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cw=function(){function e(){r(this,e),kt(this,"numberOfNodesToWatch",10),kt(this,"defaultNodeId","KSLC3E9YXXNJNKx23LqV"),this.db=up(Fr),this.nodes=new Map,this.names=new Map,this.recentNodes=[],this.updates=new Map,this.searchNames=new Map}var t,n,i;return s(e,[{key:"getName",value:function(e){return this.names.has(e)?this.names.get(e):"-----"}},{key:"getIdFromReference",value:function(e){var t=[];return e.forEach((function(e){t.push(e.id)})),t}},{key:"setNameFromReference",value:function(e){var t=this;e.forEach((function(e){t.names.set(e.id,e.name)}))}},{key:"setBase",value:(i=Tr(xr().mark((function e(t){var n,r,i,s,o,a;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.log("TreeManager.setBase(): what is this (".concat(t,")")),e.abrupt("return");case 3:if("history"!==t){e.next=20;break}if(n=or.getState().treeReducer.history){e.next=11;break}return console.log("history was not made that day"),this.setBase(this.defaultNodeId),e.abrupt("return");case 11:if(0!=n.length){e.next=17;break}return console.log("first time history is empty"),this.setBase(this.defaultNodeId),e.abrupt("return");case 17:return this.recentNodes=n,this.setBase(this.recentNodes[0]),e.abrupt("return");case 20:if(this.nodes.has(t)){e.next=33;break}return e.next=24,this.downloadNode(t);case 24:if(e.sent){e.next=32;break}if(!(this.recentNodes.length>0)){e.next=31;break}return this.setBase(this.recentNodes[0]),e.abrupt("return");case 31:this.setBase(this.defaultNodeId);case 32:this.udpateNode(t);case 33:if(r=[],this.names.clear(),i=this.nodes.get(t)){e.next=39;break}return console.log("TreeManager.setBase(): no local instance of ".concat(t)),e.abrupt("return");case 39:if(r.push(this.getIdFromReference(i.childrenReferences)),this.setNameFromReference(i.childrenReferences),!this.isRoot(i)){e.next=47;break}r.push([i.selfReference.id]),this.names.set(i.selfReference.id,i.selfReference.name),e.next=82;break;case 47:if(s=i.parentReferences[0].id,o=this.nodes.has(s)){e.next=58;break}return e.next=52,this.downloadNode(s);case 52:if(e.sent){e.next=57;break}return console.log("TreeManager.setBase(): criticall error, parent not availbe on web. Id (".concat(s,")")),this.setBase(this.defaultNodeId),e.abrupt("return");case 57:this.udpateNode(t);case 58:if(a=this.nodes.get(s)){e.next=62;break}return console.log("Treemanager.setBase(): no local isntance of id ".concat(s)),e.abrupt("return");case 62:if(!o){e.next=82;break}if(a=this.nodes.get(s)){e.next=67;break}return console.log("TreeManager.setBaseNode(): map has no data for id ".concat(s,", unexpected!!!")),e.abrupt("return");case 67:if(!this.isRoot(a)){e.next=75;break}return r.push(this.getIdFromReference(a.childrenReferences)),this.setNameFromReference(a.childrenReferences),r.push([a.selfReference.id]),this.names.set(a.selfReference.id,a.selfReference.name),e.abrupt("break",82);case 75:r.push(this.getIdFromReference(a.childrenReferences)),this.setNameFromReference(a.childrenReferences);case 77:s=a.parentReferences[0].id,(o=this.nodes.has(s))||(r.push([a.selfReference.id]),this.names.set(a.selfReference.id,a.selfReference.name)),e.next=62;break;case 82:or.dispatch(Pn(r)),this.recentNodes[0]!=t&&(this.recentNodes.unshift(t),this.recentNodes.length>20&&this.stopUpdatingOneNode(),or.dispatch(Rn(this.recentNodes))),lw.getInstance().setBase(t);case 86:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"stopUpdatingOneNode",value:function(){for(var e=this.recentNodes.length-1;e>=0;e--){var t=this.recentNodes[e];if(this.recentNodes.pop(),this.nodes.has(t)){this.nodes.delete(t);var n=this.updates.get(t);this.updates.delete(t),n?n():console.log("TreeManager.stopUpdatingOneNode(): unsub was none for id ".concat(t,", unexpected!!!"));break}}}},{key:"downloadNode",value:(n=Tr(xr().mark((function e(t){var n,r=this;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.log("TreeManager.downloadNode(): what is this id (".concat(t,")")),e.abrupt("return",!1);case 3:return n=sp(this.db,"nodes",t).withConverter(Vr),e.next=6,Kp(n).then((function(e){var n=e.data();if(!n)return console.log("TreeManager.downloadNode(): what is this node (".concat(n,")")),!1;r.nodes.set(t,n)})).catch((function(e){console.log(e),alert(e.message)}));case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"udpateNode",value:(t=Tr(xr().mark((function e(t){var n,r=this;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.log("TreeManager.updateNode(): id is null!"),e.abrupt("return");case 3:this.nodes.size>=this.numberOfNodesToWatch&&this.stopUpdatingOneNode(),n=Jp(sp(this.db,"nodes",t).withConverter(Vr),(function(e){var i=e.data();if(!i)return console.log("TreeManager.updateNode(): node got deleted id (".concat(t,")")),r.nodes.delete(t),r.recentNodes.length>1?(r.recentNodes.shift(),r.setBase(r.recentNodes[0])):r.setBase(r.defaultNodeId),void n();r.nodes.get(t)!==i&&(r.nodes.set(t,i),r.recentNodes.length>0?r.setBase(r.recentNodes[0]):r.setBase(r.defaultNodeId))})),this.updates.set(t,n);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"newChild",value:function(e,t,n){var r=this.recentNodes[0],i=Date.now(),s=this.nodes.get(r);if(!s)return console.log("TreeManager.createNewNode(): unexpected error, parent node doesn't exists locally"),!1;var o=Rr(s.creatorIds);o.unshift(e);var a=Rr(s.parentReferences);a.unshift(s.selfReference);var l=this.getNewId(),u=new Ur(l,n),c=new jr(i,o,e,t,a,[],u);this.nodes.set(l,c),s.childrenReferences.push(u),this.uploadNode(s),this.uploadNode(c),this.setBase(r),Yp(sp(this.db,"nameAndParents",c.selfReference.id).withConverter(rm),new nm(c.selfReference.name,c.parentReferences)).then((function(e){})).catch((function(e){console.log("TreeManager.uploadNode(): couldn't save nameAndParents doc"),console.log(e),alert(e.message)}))}},{key:"deleteBase",value:function(){var e=this.nodes.get(this.recentNodes[0]);if(this.recentNodes.shift(),e)if(0==e.childrenReferences.length)if(this.isRoot(e))alert("cannot delete root node");else{var t=this.updates.get(e.selfReference.id);t&&t(),this.updates.delete(e.selfReference.id),this.nodes.delete(e.selfReference.id),Zp(sp(this.db,"nodes",e.selfReference.id)).then((function(e){})).catch((function(e){console.log(e),alert(e.message)})),Zp(sp(this.db,"nameAndParents",e.selfReference.id)).then((function(e){})).catch((function(e){console.log(e),alert(e.message)}));var n=this.nodes.get(e.parentReferences[0].id);if(n){var r,i=e.selfReference,s=-1,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return uw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uw(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(n.childrenReferences.entries());try{for(o.s();!(r=o.n()).done;){var a=wr(r.value,2),l=a[0];if(a[1].id==i.id){s=l;break}}}catch(e){o.e(e)}finally{o.f()}var u,c=Rr(n.childrenReferences);-1!==s?c.splice(s,1):console.log("TreeManager.deleteCurrentBaseNode(): bad index of to delete child reference!"),n.childrenReferences=c,this.nodes.set(n.selfReference.id,n),this.setBase(n.selfReference.id),Yp(sp(this.db,"nodes",n.selfReference.id).withConverter(Vr),n).then((function(e){})).catch((function(e){console.log(e),alert(e.message)})),or.dispatch(Rn(this.recentNodes)),or.dispatch((u=n.selfReference.id,{type:Cn,payload:u})),lw.getInstance().deleteNode(e.selfReference.id)}else console.log("TreeManager.deleteCurrentBaseNode(): unexpected error!")}else alert("node must have no children");else console.log("TreeManager.deleteCurrentBaseNode(): unexpected error!")}},{key:"isRoot",value:function(e){return e.selfReference.id==e.parentReferences[0].id}},{key:"getNewId",value:function(){return sp(ip(this.db,"nodes")).id}},{key:"uploadNode",value:function(e){Yp(sp(this.db,"nodes",e.selfReference.id).withConverter(Vr),e).then((function(e){})).catch((function(e){console.log(e),alert(e.message)}))}},{key:"clearSearchNames",value:function(){this.searchNames.clear(),or.dispatch(On([]))}},{key:"setSearchName",value:function(e){var t=this;Qp(Vp(ip(this.db,"nameAndParents").withConverter(rm),qp("name","==",e))).then((function(e){if(e.size>0){var n=[];e.forEach((function(e){var r=[];r.push(e.id),t.searchNames.set(e.id,e.data().name),e.data().parents.forEach((function(e){r.push(e.id),t.searchNames.set(e.id,e.name)})),n.push(r)})),or.dispatch(On(n))}})).catch((function(e){console.log(e)}))}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();function hw(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create,Object.create;const dw=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fw=new $r.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pw=new qr.Yd("@firebase/auth");function mw(e,...t){pw.logLevel<=qr.in.ERROR&&pw.error(`Auth (${Or.Jn}): ${e}`,...t)}function gw(e,...t){throw bw(e,...t)}function yw(e,...t){return bw(e,...t)}function vw(e,t,n){const r=Object.assign(Object.assign({},dw()),{[t]:n});return new $r.LL("auth","Firebase",r).create(t,{appName:e.name})}function bw(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return fw.create(e,...t)}function ww(e,t,...n){if(!e)throw bw(t,...n)}function _w(e){const t="INTERNAL ASSERTION FAILED: "+e;throw mw(t),new Error(t)}function Ew(e,t){e||_w(t)}const Sw=new Map;function kw(e){Ew(e instanceof Function,"Expected a class definition");let t=Sw.get(e);return t?(Ew(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Sw.set(e,t),t)}function Cw(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Tw(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Iw{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ew(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,$r.uI)()||(0,$r.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Tw()||"https:"===Tw()||(0,$r.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function xw(e,t){Ew(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Nw{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _w("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _w("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _w("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Pw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Rw=new Iw(3e4,6e4);function Ow(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Aw(e,t,n,r,i={}){return Dw(e,i,(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=(0,$r.xO)(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Nw.fetch()(Lw(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Dw(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Pw),t);try{const t=new Fw(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw zw(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw zw(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw zw(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw zw(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw vw(e,a,o);gw(e,a)}}catch(t){if(t instanceof $r.ZR)throw t;gw(e,"network-request-failed")}}async function Mw(e,t,n,r,i={}){const s=await Aw(e,t,n,r,i);return"mfaPendingCredential"in s&&gw(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Lw(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?xw(e.config,i):`${e.config.apiScheme}://${i}`}class Fw{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(yw(this.auth,"network-request-failed"))),Rw.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function zw(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=yw(e,t,r);return i.customData._tokenResponse=n,i}function Uw(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function jw(e){return 1e3*Number(e)}function Vw(e){var t;const[n,r,i]=e.split(".");if(void 0===n||void 0===r||void 0===i)return mw("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,$r.tV)(r);return e?JSON.parse(e):(mw("Failed to decode base64 JWT payload"),null)}catch(e){return mw("Caught error parsing JWT payload as JSON",null===(t=e)||void 0===t?void 0:t.toString()),null}}async function Bw(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof $r.ZR&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class qw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){var e;try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null===(e=t)||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class $w{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uw(this.lastLoginAt),this.creationTime=Uw(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ww(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Bw(e,async function(e,t){return Aw(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));ww(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=hw(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,u=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),c=!!l&&u,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new $w(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,h)}class Hw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ww(e.idToken,"internal-error"),ww(void 0!==e.idToken,"internal-error"),ww(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Vw(e);return ww(t,"internal-error"),ww(void 0!==t.exp,"internal-error"),ww(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return ww(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Dw(e,{},(async()=>{const n=(0,$r.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Lw(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Nw.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Hw;return n&&(ww("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ww("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ww("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hw,this.toJSON())}_performRefresh(){return _w("not implemented")}}function Kw(e,t){ww("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Gw{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=hw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $w(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Bw(this,this.stsTokenManager.getToken(this.auth,e));return ww(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=(0,$r.m9)(e),r=await n.getIdToken(t),i=Vw(r);ww(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Uw(jw(i.auth_time)),issuedAtTime:Uw(jw(i.iat)),expirationTime:Uw(jw(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,$r.m9)(e);await Ww(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ww(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Gw(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){ww(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ww(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Bw(this,async function(e,t){return Aw(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:E}=t;ww(v&&E,e,"internal-error");const S=Hw.fromJSON(this.name,E);ww("string"==typeof v,e,"internal-error"),Kw(c,e.name),Kw(h,e.name),ww("boolean"==typeof b,e,"internal-error"),ww("boolean"==typeof w,e,"internal-error"),Kw(d,e.name),Kw(f,e.name),Kw(p,e.name),Kw(m,e.name),Kw(g,e.name),Kw(y,e.name);const k=new Gw({uid:v,auth:e,email:h,emailVerified:b,displayName:c,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(k.providerData=_.map((e=>Object.assign({},e)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t,n=!1){const r=new Hw;r.updateFromServerResponse(t);const i=new Gw({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Ww(i),i}}class Qw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Qw.type="NONE";const Yw=Qw;function Zw(e,t,n){return`firebase:${e}:${t}:${n}`}class Xw{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Zw(this.userKey,r.apiKey,i),this.fullPersistenceKey=Zw("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gw._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Xw(kw(Yw),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||kw(Yw);const s=Zw(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=Gw._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new Xw(i,e,n)):new Xw(i,e,n)}}function Jw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(r_(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(e_(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(s_(t))return"Blackberry";if(o_(t))return"Webos";if(t_(t))return"Safari";if((t.includes("chrome/")||n_(t))&&!t.includes("edge/"))return"Chrome";if(i_(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function e_(e=(0,$r.z$)()){return/firefox\//i.test(e)}function t_(e=(0,$r.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function n_(e=(0,$r.z$)()){return/crios\//i.test(e)}function r_(e=(0,$r.z$)()){return/iemobile/i.test(e)}function i_(e=(0,$r.z$)()){return/android/i.test(e)}function s_(e=(0,$r.z$)()){return/blackberry/i.test(e)}function o_(e=(0,$r.z$)()){return/webos/i.test(e)}function a_(e=(0,$r.z$)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function l_(e=(0,$r.z$)()){return a_(e)||i_(e)||o_(e)||s_(e)||/windows phone/i.test(e)||r_(e)}function u_(e,t=[]){let n;switch(e){case"Browser":n=Jw((0,$r.z$)());break;case"Worker":n=`${Jw((0,$r.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Or.Jn}/${r}`}class c_{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){var t;if(this.auth.currentUser===e)return;const n=[];try{for(const t of this.queue)await t(e),t.onAbort&&n.push(t.onAbort)}catch(e){n.reverse();for(const e of n)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(t=e)||void 0===t?void 0:t.message})}}}class h_{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f_(this),this.idTokenSubscription=new f_(this),this.beforeStateQueue=new c_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fw,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=kw(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Xw.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ww(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){var t;try{await Ww(e)}catch(e){if("auth/network-request-failed"!==(null===(t=e)||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,$r.m9)(e):null;return t&&ww(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ww(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(kw(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $r.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&kw(e)||this._popupRedirectResolver;ww(t,this,"argument-error"),this.redirectPersistenceManager=await Xw.create(this,[kw(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return ww(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ww(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=u_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());return n&&(t["X-Firebase-Client"]=n),t}}function d_(e){return(0,$r.m9)(e)}class f_{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,$r.ne)((e=>this.observer=e))}get next(){return ww(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class p_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _w("not implemented")}_getIdTokenResponse(e){return _w("not implemented")}_linkToIdToken(e,t){return _w("not implemented")}_getReauthenticationResolver(e){return _w("not implemented")}}class m_ extends p_{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new m_(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new m_(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return Mw(e,"POST","/v1/accounts:signInWithPassword",Ow(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Mw(e,"POST","/v1/accounts:signInWithEmailLink",Ow(e,t))}(e,{email:this._email,oobCode:this._password});default:gw(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return async function(e,t){return Aw(e,"POST","/v1/accounts:update",t)}(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Mw(e,"POST","/v1/accounts:signInWithEmailLink",Ow(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:gw(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function g_(e,t){return Mw(e,"POST","/v1/accounts:signInWithIdp",Ow(e,t))}class y_ extends p_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new y_(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gw("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=hw(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new y_(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return g_(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,g_(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,g_(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,$r.xO)(t)}return e}}const v_={USER_NOT_FOUND:"user-not-found"};class b_ extends p_{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new b_({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new b_({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Mw(e,"POST","/v1/accounts:signInWithPhoneNumber",Ow(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Mw(e,"POST","/v1/accounts:signInWithPhoneNumber",Ow(e,t));if(n.temporaryProof)throw zw(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Mw(e,"POST","/v1/accounts:signInWithPhoneNumber",Ow(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),v_)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new b_({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class w_{constructor(e){var t,n,r,i,s,o;const a=(0,$r.zd)((0,$r.pd)(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ww(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=(0,$r.zd)((0,$r.pd)(e)).link,n=t?(0,$r.zd)((0,$r.pd)(t)).deep_link_id:null,r=(0,$r.zd)((0,$r.pd)(e)).deep_link_id;return(r?(0,$r.zd)((0,$r.pd)(r)).link:null)||r||n||t||e}(e);try{return new w_(t)}catch(e){return null}}}class __{constructor(){this.providerId=__.PROVIDER_ID}static credential(e,t){return m_._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=w_.parseLink(t);return ww(n,"argument-error"),m_._fromEmailAndCode(e,n.code,n.tenantId)}}__.PROVIDER_ID="password",__.EMAIL_PASSWORD_SIGN_IN_METHOD="password",__.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class E_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class S_ extends E_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class k_ extends S_{constructor(){super("facebook.com")}static credential(e){return y_._fromParams({providerId:k_.PROVIDER_ID,signInMethod:k_.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return k_.credentialFromTaggedObject(e)}static credentialFromError(e){return k_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return k_.credential(e.oauthAccessToken)}catch(e){return null}}}k_.FACEBOOK_SIGN_IN_METHOD="facebook.com",k_.PROVIDER_ID="facebook.com";class C_ extends S_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return y_._fromParams({providerId:C_.PROVIDER_ID,signInMethod:C_.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return C_.credentialFromTaggedObject(e)}static credentialFromError(e){return C_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return C_.credential(t,n)}catch(e){return null}}}C_.GOOGLE_SIGN_IN_METHOD="google.com",C_.PROVIDER_ID="google.com";class T_ extends S_{constructor(){super("github.com")}static credential(e){return y_._fromParams({providerId:T_.PROVIDER_ID,signInMethod:T_.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return T_.credentialFromTaggedObject(e)}static credentialFromError(e){return T_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return T_.credential(e.oauthAccessToken)}catch(e){return null}}}T_.GITHUB_SIGN_IN_METHOD="github.com",T_.PROVIDER_ID="github.com";class I_ extends S_{constructor(){super("twitter.com")}static credential(e,t){return y_._fromParams({providerId:I_.PROVIDER_ID,signInMethod:I_.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return I_.credentialFromTaggedObject(e)}static credentialFromError(e){return I_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return I_.credential(t,n)}catch(e){return null}}}I_.TWITTER_SIGN_IN_METHOD="twitter.com",I_.PROVIDER_ID="twitter.com";class x_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Gw._fromIdTokenResponse(e,n,r),s=N_(n);return new x_({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=N_(n);return new x_({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function N_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class P_ extends $r.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,P_.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new P_(e,t,n,r)}}function R_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw P_._fromErrorAndOperation(e,n,t,r);throw n}))}async function O_(e,t,n=!1){const r="signIn",i=await R_(e,r,t),s=await x_._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function A_(e,t,n){const r=(0,$r.m9)(e),i={requestType:"PASSWORD_RESET",email:t};n&&function(e,t,n){var r;ww((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ww(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ww(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ww(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}(r,i,n),await async function(e,t){return async function(e,t){return Aw(e,"POST","/v1/accounts:sendOobCode",Ow(e,t))}(e,t)}(r,i)}new WeakMap;const D_="__sak";class M_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(D_,"1"),this.storage.removeItem(D_),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class L_ extends M_{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,$r.z$)();return t_(e)||a_(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=l_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,$r.w1)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}L_.type="LOCAL";const F_=L_;class z_ extends M_{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}z_.type="SESSION";const U_=z_;class j_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new j_(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function V_(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}j_.receivers=[];class B_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=V_("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function q_(){return window}function $_(){return void 0!==q_().WorkerGlobalScope&&"function"==typeof q_().importScripts}const W_="firebaseLocalStorageDb",H_="firebaseLocalStorage",K_="fbase_key";class G_{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Q_(e,t){return e.transaction([H_],t?"readwrite":"readonly").objectStore(H_)}function Y_(){const e=indexedDB.open(W_,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(H_,{keyPath:K_})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(H_)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(W_);return new G_(e).toPromise()}(),t(await Y_()))}))}))}async function Z_(e,t,n){const r=Q_(e,!0).put({[K_]:t,value:n});return new G_(r).toPromise()}function X_(e,t){const n=Q_(e,!0).delete(t);return new G_(n).toPromise()}class J_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Y_()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=j_._getInstance($_()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new B_(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Y_();return await Z_(e,D_,"1"),await X_(e,D_),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Z_(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Q_(e,!1).get(t),r=await new G_(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>X_(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Q_(e,!1).getAll();return new G_(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}J_.type="LOCAL";const eE=J_;function tE(e){return`__${e}${Math.floor(1e6*Math.random())}`}tE("rcb"),new Iw(3e4,6e4);class nE{constructor(e){this.providerId=nE.PROVIDER_ID,this.auth=d_(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var r;const i=await n.verify();try{let s;if(ww("string"==typeof i,e,"argument-error"),ww("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ww("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Aw(e,"POST","/v2/accounts/mfaEnrollment:start",Ow(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ww("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ww(n,e,"missing-multi-factor-info");const o=await function(e,t){return Aw(e,"POST","/v2/accounts/mfaSignIn:start",Ow(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Aw(e,"POST","/v1/accounts:sendVerificationCode",Ow(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}(this.auth,e,(0,$r.m9)(t))}static credential(e,t){return b_._fromVerification(e,t)}static credentialFromResult(e){const t=e;return nE.credentialFromTaggedObject(t)}static credentialFromError(e){return nE.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?b_._fromTokenResponse(t,n):null}}function rE(e,t){return t?kw(t):(ww(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}nE.PROVIDER_ID="phone",nE.PHONE_SIGN_IN_METHOD="phone";class iE extends p_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return g_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return g_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return g_(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function sE(e){return O_(e.auth,new iE(e),e.bypassAuthState)}function oE(e){const{auth:t,user:n}=e;return ww(n,t,"internal-error"),async function(e,t,n=!1){var r;const{auth:i}=e,s="reauthenticate";try{const r=await Bw(e,R_(i,s,t,e),n);ww(r.idToken,i,"internal-error");const o=Vw(r.idToken);ww(o,i,"internal-error");const{sub:a}=o;return ww(e.uid===a,i,"user-mismatch"),x_._forOperation(e,s,r)}catch(e){throw"auth/user-not-found"===(null===(r=e)||void 0===r?void 0:r.code)&&gw(i,"user-mismatch"),e}}(n,new iE(e),e.bypassAuthState)}async function aE(e){const{auth:t,user:n}=e;return ww(n,t,"internal-error"),async function(e,t,n=!1){const r=await Bw(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return x_._forOperation(e,"link",r)}(n,new iE(e),e.bypassAuthState)}class lE{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sE;case"linkViaPopup":case"linkViaRedirect":return aE;case"reauthViaPopup":case"reauthViaRedirect":return oE;default:gw(this.auth,"internal-error")}}resolve(e){Ew(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ew(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const uE=new Iw(2e3,1e4);async function cE(e,t,n){const r=d_(e);!function(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&gw(e,"argument-error"),vw(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,E_);const i=rE(r,n);return new hE(r,"signInViaPopup",t,i).executeNotNull()}class hE extends lE{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,hE.currentPopupAction&&hE.currentPopupAction.cancel(),hE.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ww(e,this.auth,"internal-error"),e}async onExecution(){Ew(1===this.filter.length,"Popup operations only handle one event");const e=V_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(yw(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(yw(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hE.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(yw(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,uE.get())};e()}}hE.currentPopupAction=null;const dE=new Map;class fE extends lE{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=dE.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Zw("pendingRedirect",e.config.apiKey,e.name)}(t),r=function(e){return kw(e._redirectPersistence)}(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}dE.set(this.auth._key(),e)}return this.bypassAuthState||dE.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function pE(e,t){dE.set(e._key(),t)}async function mE(e,t,n=!1){const r=d_(e),i=rE(r,t),s=new fE(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class gE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vE(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!vE(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(yw(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yE(e))}saveEventToCache(e){this.cachedEventUids.add(yE(e)),this.lastProcessedEventTime=Date.now()}}function yE(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function vE({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const bE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wE=/^https?/;function _E(e){const t=Cw(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!wE.test(n))return!1;if(bE.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const EE=new Iw(3e4,6e4);function SE(){const e=q_().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let kE=null;function CE(e){return kE=kE||function(e){return new Promise(((t,n)=>{var r,i,s,o;function a(){SE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{SE(),n(yw(e,"network-request-failed"))},timeout:EE.get()})}if(null===(i=null===(r=q_().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=q_().gapi)||void 0===s?void 0:s.load)){const t=tE("iframefcb");return q_()[t]=()=>{gapi.load?a():n(yw(e,"network-request-failed"))},(o=`https://apis.google.com/js/api.js?onload=${t}`,new Promise(((e,t)=>{const n=document.createElement("script");n.setAttribute("src",o),n.onload=e,n.onerror=e=>{const n=yw("internal-error");n.customData=e,t(n)},n.type="text/javascript",n.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(n)}))).catch((e=>n(e)))}a()}})).catch((e=>{throw kE=null,e}))}(e),kE}const TE=new Iw(5e3,15e3),IE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NE(e){const t=e.config;ww(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?xw(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Or.Jn},i=xE.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${(0,$r.xO)(r).slice(1)}`}const PE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class RE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function OE(e,t,n,r,i,s){ww(e.config.authDomain,e,"auth-domain-config-required"),ww(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Or.Jn,eventId:i};if(t instanceof E_){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",(0,$r.xb)(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof S_){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];return`${function({config:e}){return e.emulator?xw(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,$r.xO)(a).slice(1)}`}const AE="webStorageSupport",DE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=U_,this._completeRedirectFn=mE,this._overrideRedirectResult=pE}async _openPopup(e,t,n,r){var i;return Ew(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},PE),{width:r.toString(),height:i.toString(),top:s,left:o}),u=(0,$r.z$)().toLowerCase();n&&(a=n_(u)?"_blank":n),e_(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=(0,$r.z$)()){var t;return a_(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new RE(null);const h=window.open(t||"",a,c);ww(h,e,"popup-blocked");try{h.focus()}catch(e){}return new RE(h)}(e,OE(e,t,n,Cw(),r),V_())}async _openRedirect(e,t,n,r){var i;return await this._originValidation(e),i=OE(e,t,n,Cw(),r),q_().location.href=i,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ew(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await CE(e),n=q_().gapi;return ww(n,e,"internal-error"),t.open({where:document.body,url:NE(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IE,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=yw(e,"network-request-failed"),s=q_().setTimeout((()=>{r(i)}),TE.get());function o(){q_().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new gE(e);return t.register("authEvent",(t=>(ww(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(AE,{type:AE},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),gw(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Aw(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(_E(e))return}catch(e){}gw(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return l_()||t_()||a_()}};var ME,LE="@firebase/auth",FE="0.20.5";class zE{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ww(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function UE(e=(0,Or.Mq)()){const t=(0,Or.qX)(e,"auth");return t.isInitialized()?t.getImmediate():function(e,t){const n=(0,Or.qX)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,$r.vZ)(r,null!=t?t:{}))return e;gw(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:DE,persistence:[eE,F_,U_]})}ME="Browser",(0,Or.Xd)(new Br.wA("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:i,authDomain:s}=n.options;return((e,n)=>{ww(i&&!i.includes(":"),"invalid-api-key",{appName:e.name}),ww(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});const r={apiKey:i,authDomain:s,clientPlatform:ME,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:u_(ME)},o=new h_(e,n,r);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(kw);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(o,t),o})(n,r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,Or.Xd)(new Br.wA("auth-internal",(e=>(e=>new zE(e))(d_(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Or.KN)(LE,FE,void 0),(0,Or.KN)(LE,FE,"esm2017");var jE=function(){return jE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},jE.apply(this,arguments)},VE=function(e){return{loading:null==e,value:e}},BE=function(t,n){var r=function(t){var n=t?t():void 0,r=(0,e.useReducer)((function(e,t){switch(t.type){case"error":return jE(jE({},e),{error:t.error,loading:!1,value:void 0});case"reset":return VE(t.defaultValue);case"value":return jE(jE({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),VE(n)),i=r[0],s=r[1],o=function(){var e=t?t():void 0;s({type:"reset",defaultValue:e})},a=function(e){s({type:"error",error:e})},l=function(e){s({type:"value",value:e})};return(0,e.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:a,setValue:l,value:i.value}}),[i.error,i.loading,o,a,l,i.value])}((function(){return t.currentUser})),i=r.error,s=r.loading,o=r.setError,a=r.setValue,l=r.value;(0,e.useEffect)((function(){var e=function(e,t,r,i){return(0,$r.m9)(e).onAuthStateChanged((function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var t;return function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(r){switch(r.label){case 0:if(!(null==n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return a(e),[2]}}))}))}),r,void 0)}(t,0,o);return function(){e()}}),[t]);var u=[l,s,i];return(0,e.useMemo)((function(){return u}),u)},qE=cw.getInstance();const $E=function(t){var n=UE(Fr),r=wr(BE(n),3),i=(r[0],r[1],r[2],t.id);function s(){return(s=Tr(xr().mark((function e(){return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cw.getInstance().setBase(i);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return e.createElement("button",{className:"node "+(qE.recentNodes[0]==i?"base":""),onClick:function(){return s.apply(this,arguments)}},qE.getName(i))},WE=function(t){var n=t.ids;return e.createElement("div",{className:"shelf"},n.map((function(t,n){return e.createElement($E,{id:t,key:n})})))};var HE=n(4054),KE={};KE.styleTagTransform=S(),KE.setAttributes=b(),KE.insert=y().bind(null,"head"),KE.domAPI=m(),KE.insertStyleElement=_(),f()(HE.Z,KE),HE.Z&&HE.Z.locals&&HE.Z.locals;var GE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},QE=e.createContext&&e.createContext(GE),YE=function(){return YE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},YE.apply(this,arguments)};function ZE(t){return t&&t.map((function(t,n){return e.createElement(t.tag,YE({key:n},t.attr),ZE(t.child))}))}function XE(t){return function(n){return e.createElement(JE,YE({attr:YE({},t.attr)},n),ZE(t.child))}}function JE(t){var n=function(n){var r,i=t.attr,s=t.size,o=t.title,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["attr","size","title"]),l=s||n.size||"1em";return n.className&&(r=n.className),t.className&&(r=(r?r+" ":"")+t.className),e.createElement("svg",YE({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:r,style:YE(YE({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&e.createElement("title",null,o),t.children)};return void 0!==QE?e.createElement(QE.Consumer,null,(function(e){return n(e)})):n(GE)}function eS(e){return XE({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}}]})(e)}function tS(e){return XE({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 3c-4.963 0-9 4.038-9 9s4.037 9 9 9 9-4.038 9-9-4.037-9-9-9zm0 16c-3.859 0-7-3.14-7-7s3.141-7 7-7 7 3.14 7 7-3.141 7-7 7zM12.707 12l2.646-2.646c.194-.194.194-.512 0-.707-.195-.194-.513-.194-.707 0l-2.646 2.646-2.646-2.647c-.195-.194-.513-.194-.707 0-.195.195-.195.513 0 .707l2.646 2.647-2.646 2.646c-.195.195-.195.513 0 .707.097.098.225.147.353.147s.256-.049.354-.146l2.646-2.647 2.646 2.646c.098.098.226.147.354.147s.256-.049.354-.146c.194-.194.194-.512 0-.707l-2.647-2.647z"}}]})(e)}function nS(e){return XE({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"}}]})(e)}const rS=function(t){return e.createElement("div",{className:"editTree"},e.createElement("div",{className:"editTree-button",onClick:function(){t.setAddNode(!0)}},e.createElement(eS,null)),e.createElement("div",{className:"editTree-button",onClick:function(){t.setDeleteNode(!0)}},e.createElement(tS,null)),e.createElement("div",{className:"editTree-button",onClick:function(){t.setSearch(!0)}},e.createElement(nS,null)))};var iS=n(957),sS={};sS.styleTagTransform=S(),sS.setAttributes=b(),sS.insert=y().bind(null,"head"),sS.domAPI=m(),sS.insertStyleElement=_(),f()(iS.Z,sS),iS.Z&&iS.Z.locals&&iS.Z.locals;const oS=function(t){var n=wr((0,e.useState)(""),2),r=n[0],i=n[1],s=cw.getInstance(),o=s.recentNodes[0],a=s.getName(o),l=ye((function(e){return e.profileReducer.userName})),u=UE(),c=wr(BE(u),1)[0];return e.createElement("div",{className:"addNode"},e.createElement("div",{className:"addNodeCloseButton",onClick:function(){t.setAddNode(!1)}}),e.createElement("div",{className:"addNodeWindow"},e.createElement("div",{className:"addNodeWindowExplanation"},"Add a child node to [",a,"]"),e.createElement("input",{type:"text",placeholder:"new name",onChange:function(e){return i(e.target.value)}}),e.createElement("div",{className:"addNodeControlButtons"},e.createElement("div",{className:"addNodeCancelButton addNodeControlButton",onClick:function(){t.setAddNode(!1)}},"cancel"),e.createElement("div",{className:"addNodeSaveButton addNodeControlButton",onClick:function(){0!=r.length&&(s.newChild(c.uid,l,r),t.setAddNode(!1))}},"save"))))};var aS=n(7541),lS={};lS.styleTagTransform=S(),lS.setAttributes=b(),lS.insert=y().bind(null,"head"),lS.domAPI=m(),lS.insertStyleElement=_(),f()(aS.Z,lS),aS.Z&&aS.Z.locals&&aS.Z.locals;const uS=function(t){var n=wr((0,e.useState)(""),2),r=n[0],i=n[1],s=cw.getInstance(),o=s.getName(s.recentNodes[0]);return e.createElement("div",{className:"deleteNode"},e.createElement("div",{className:"deleteNodeCloseButton",onClick:function(){t.setDeleteNode(!1)}}),e.createElement("div",{className:"deleteNodeWindow"},e.createElement("div",{className:"deleteNodeWindowExplanation"},"To delete type name [",o,"]"),e.createElement("input",{type:"text",placeholder:"name",onChange:function(e){return i(e.target.value)}}),e.createElement("div",{className:"deleteNodeControlButtons"},e.createElement("div",{className:"deleteNodeCancelButton deleteNodeControlButton",onClick:function(){t.setDeleteNode(!1)}},"cancel"),e.createElement("div",{className:"deleteNodeDeleteButton deleteNodeControlButton",onClick:function(){r==o&&(s.deleteBase(),t.setDeleteNode(!1))}},"delete"))))};var cS=n(8971),hS={};hS.styleTagTransform=S(),hS.setAttributes=b(),hS.insert=y().bind(null,"head"),hS.domAPI=m(),hS.insertStyleElement=_(),f()(cS.Z,hS),cS.Z&&cS.Z.locals&&cS.Z.locals;var dS=n(4513),fS={};fS.styleTagTransform=S(),fS.setAttributes=b(),fS.insert=y().bind(null,"head"),fS.domAPI=m(),fS.insertStyleElement=_(),f()(dS.Z,fS),dS.Z&&dS.Z.locals&&dS.Z.locals;const pS=function(t){var n=cw.getInstance(),r=t.ids.slice(0,3),i=r.slice(1);return e.createElement("div",{className:"searchResult"},e.createElement("div",{className:"focusNode searchNode",onClick:function(){n.setBase(r[0]),t.closeSearch()}},n.searchNames.get(r[0])),e.createElement("div",{className:"parentNodes"},i.map((function(r,i){return e.createElement("div",{key:i,className:"searchNode",onClick:function(){n.setBase(r),t.closeSearch()}},n.searchNames.get(r))}))))},mS=function(t){var n=wr((0,e.useState)(""),2),r=n[0],i=n[1],s=cw.getInstance(),o=ye((function(e){return e.treeReducer.searchResults})),a=function(){t.setSearch(!1),s.clearSearchNames()};return e.createElement("div",{className:"search"},e.createElement("div",{className:"searchCloseButton",onClick:a}),e.createElement("div",{className:"searchWindow"},e.createElement("div",{className:"searchInput"},e.createElement("input",{type:"text",placeholder:"name",onChange:function(e){return i(e.target.value)}}),e.createElement("div",{className:"searchControlButton",onClick:function(){s.setSearchName(r)}},"find")),e.createElement("div",{className:"searchOutput"},o.map((function(t,n){return e.createElement(pS,{key:n,ids:t,closeSearch:a})})))))},gS=function(){var t=wr((0,e.useState)(!1),2),n=t[0],r=t[1],i=wr((0,e.useState)(!1),2),s=i[0],o=i[1],a=wr((0,e.useState)(!1),2),l=a[0],u=a[1],c=ye((function(e){return e.treeReducer.shelves}));return e.createElement("div",{className:"navigation"},e.createElement("div",{className:"navigation-shelves"},c.map((function(t,n){return e.createElement(WE,{ids:t,key:n})}))),e.createElement("div",{className:"navigation-editTree"},e.createElement(rS,{setAddNode:r,setDeleteNode:o,setSearch:u})),n?e.createElement(oS,{setAddNode:r}):null,s?e.createElement(uS,{setDeleteNode:o}):null,l?e.createElement(mS,{setSearch:u}):null)};var yS=n(1441),vS={};function bS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach((function(t){kt(e,t,n[t])}))}return e}vS.styleTagTransform=S(),vS.setAttributes=b(),vS.insert=y().bind(null,"head"),vS.domAPI=m(),vS.insertStyleElement=_(),f()(yS.Z,vS),yS.Z&&yS.Z.locals&&yS.Z.locals;class wS{static isBrowser(){return"undefined"!=typeof window}static isOpera(){return wS.isBrowser()&&(!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0)}static isFirefox(){return wS.isBrowser()&&"undefined"!=typeof InstallTrigger}static isSafari(){return!!wS.isBrowser()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}static isIE(){return wS.isBrowser()&&!!document.documentMode}static isEdge(){return wS.isBrowser()&&!wS.isIE()&&!!window.StyleMedia}static isChrome(){return wS.isBrowser()&&!!window.chrome&&!!window.chrome.webstore}static isBlink(){return wS.isBrowser()&&(wS.isChrome()||wS.isOpera())&&!!window.CSS}static getUserAgent(){return"undefined"==typeof navigator?"":navigator.userAgent}static isAndroid(){return wS.isBrowser()&&wS.getUserAgent().match(/Android/i)}static isBlackBerry(){return wS.isBrowser()&&wS.getUserAgent().match(/BlackBerry/i)}static isIOS(){return wS.isBrowser()&&wS.getUserAgent().match(/iPhone|iPad|iPod/i)}static isOpera(){return wS.isBrowser()&&wS.getUserAgent().match(/Opera Mini/i)}static isWindows(){return wS.isBrowser()&&wS.isWindowsDesktop()||wS.isWindowsMobile()}static isWindowsMobile(){return wS.isBrowser()&&wS.getUserAgent().match(/IEMobile/i)}static isWindowsDesktop(){return wS.isBrowser()&&wS.getUserAgent().match(/WPDesktop/i)}static isMobile(){return wS.isBrowser()&&(wS.isWindowsMobile()||wS.isBlackBerry()||wS.isAndroid()||wS.isIOS())}}const _S=e=>Object.keys(e).reduce(((t,n)=>"data-"===n.substr(0,5)?bS({},t,{[n]:e[n]}):t),{});var ES=n(5697),SS=n.n(ES);class kS extends e.Component{static isA(e){return!!e&&e.type===kS}constructor(t){super(t),kt(this,"ref",e.createRef()),kt(this,"onMouseMove",(e=>{if(this.state.active){const t=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:t,event:e}),this.props.onResize&&this.props.onResize({component:this,domElement:t}),e.stopPropagation(),e.preventDefault()}})),kt(this,"onMouseDown",(e=>{this.setState({active:!0}),this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this})||this.props.events.emit("startResize",{index:this.props.index,event:e})})),kt(this,"onMouseUp",(e=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:e}))})),this.state={active:!1},this.document=t.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const t=[wS.isMobile()?"reflex-thin":"",...this.props.className.split(" "),this.state.active?"active":"","reflex-splitter"].join(" ").trim();return e.createElement("div",T({},_S(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:t,id:this.props.id,ref:this.ref}),this.props.children)}}kt(kS,"propTypes",{children:SS().oneOfType([SS().arrayOf(SS().node),SS().node]),onStartResize:SS().func,onStopResize:SS().func,className:SS().string,propagate:SS().bool,onResize:SS().func,style:SS().object}),kt(kS,"defaultProps",{document:"undefined"!=typeof document?document:null,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});n(4727);class CS extends e.Component{constructor(t){super(t),kt(this,"onWindowResize",(()=>{this.setState({flexData:this.computeFlexData()})})),kt(this,"onStartResize",(e=>{const t=e.event.changedTouches?e.event.changedTouches[0]:e.event;"horizontal"===this.props.orientation?(document.body.classList.add("reflex-row-resize"),this.previousPos=t.clientY):(document.body.classList.add("reflex-col-resize"),this.previousPos=t.clientX),this.elements=[this.children[e.index-1],this.children[e.index+1]],this.emitElementsEvent(this.elements,"onStartResize")})),kt(this,"onResize",(e=>{const t=e.event.changedTouches?e.event.changedTouches[0]:e.event,n=this.getOffset(t,e.domElement);if("horizontal"===this.props.orientation?this.previousPos=t.clientY:this.previousPos=t.clientX,n){const t=this.computeAvailableOffset(e.index,n);t&&(this.elements=this.dispatchOffset(e.index,t),this.adjustFlex(this.elements),this.setState({resizing:!0},(()=>{this.emitElementsEvent(this.elements,"onResize")})))}})),kt(this,"onStopResize",(e=>{document.body.classList.remove("reflex-row-resize"),document.body.classList.remove("reflex-col-resize");const t=this.elements?this.elements.map((e=>e.ref)):[],n=this.children.filter((e=>!kS.isA(e)&&t.includes(e.ref)));this.emitElementsEvent(n,"onStopResize"),this.setState({resizing:!1})})),kt(this,"onElementSize",(e=>new Promise((t=>{try{const n=e.index,r=this.getSize(this.children[n]),i=e.size-r,s=e.direction,o=n+s,a=this.computeAvailableOffset(o,s*i);this.elements=null,a&&(this.elements=this.dispatchOffset(o,a),this.adjustFlex(this.elements)),this.setState(this.state,(()=>{this.emitElementsEvent(this.elements,"onResize"),t()}))}catch(e){console.log(e)}})))),this.events=new class{constructor(){this._events={}}on(e,t){return e.split(" ").forEach((e=>{this._events[e]=this._events[e]||[],this._events[e].push(t)})),this}off(e,t){if(null!=e)return e.split(" ").forEach((e=>{e in this._events!=0&&(t?this._events[e].splice(this._events[e].indexOf(t),1):this._events[e]=[])})),this;this._events={}}emit(e){if(void 0!==this._events[e])for(var t=this._events[e].slice(),n=0;n<t.length;++n){var r=t[n].apply(this,Array.prototype.slice.call(arguments,1));if(void 0!==r)return r}}},this.children=[],this.state={flexData:[]},this.ref=e.createRef()}componentDidMount(){const e=this.computeFlexData(),{windowResizeAware:t}=this.props;t&&window.addEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:t,flexData:e}),this.events.on("element.size",this.onElementSize),this.events.on("startResize",this.onStartResize),this.events.on("stopResize",this.onStopResize),this.events.on("resize",this.onResize)}componentWillUnmount(){this.events.off(),window.removeEventListener("resize",this.onWindowResize)}getValidChildren(e=this.props){return this.toArray(e.children).filter((e=>!!e))}componentDidUpdate(e,t){const n=this.getValidChildren(this.props);if(n.length!==this.state.flexData.length||e.orientation!==this.props.orientation||this.flexHasChanged(e)){const e=this.computeFlexData(n,this.props);this.setState({flexData:e})}this.props.windowResizeAware!==this.state.windowResizeAware&&(this.props.windowResizeAware?window.addEventListener("resize",this.onWindowResize):window.removeEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:this.props.windowResizeAware}))}flexHasChanged(e){const t=this.getValidChildren(e).map((e=>e.props.flex||0)),n=this.getValidChildren().map((e=>e.props.flex||0));return!n.every(((e,n)=>e===t[n]))}getSize(e){const t=e.ref.current;return"horizontal"===this.props.orientation?t.offsetHeight:t.offsetWidth}getOffset(e,t){const{top:n,bottom:r,left:i,right:s}=t.getBoundingClientRect();switch(this.props.orientation){case"horizontal":{const t=e.clientY-this.previousPos;if(t>0){if(e.clientY>=n)return t}else if(e.clientY<=r)return t;break}default:{const t=e.clientX-this.previousPos;if(t>0){if(e.clientX>i)return t}else if(e.clientX<s)return t}}return 0}adjustFlex(e){const t=e.reduce(((t,n)=>{const r=n.props.index;return t+(n.props.flex-this.state.flexData[r].flex)/e.length}),0);e.forEach((e=>{this.state.flexData[e.props.index].flex+=t}))}computeAvailableOffset(e,t){const n=this.computeAvailableStretch(e,t),r=this.computeAvailableShrink(e,t);return Math.min(n,r)*Math.sign(t)}checkPropagate(e,t){if(t>0){if(e<this.children.length-2){const t=this.children[e+2];return kS.isA(t)&&t.props.propagate}}else if(e>2){const t=this.children[e-2];return kS.isA(t)&&t.props.propagate}return!1}computeAvailableStretch(e,t){const n=t<0?e+1:e-1,r=this.children[n],i=this.getSize(r),s=r.props.maxSize-i;if(s<Math.abs(t)&&this.checkPropagate(e,-1*t)){const n=Math.sign(t)*(Math.abs(t)-s);return s+this.computeAvailableStretch(t<0?e+2:e-2,n)}return Math.min(s,Math.abs(t))}computeAvailableShrink(e,t){const n=t>0?e+1:e-1,r=this.children[n],i=this.getSize(r)-Math.max(r.props.minSize,0);if(i<Math.abs(t)&&this.checkPropagate(e,t)){const n=Math.sign(t)*(Math.abs(t)-i);return i+this.computeAvailableShrink(t>0?e+2:e-2,n)}return Math.min(i,Math.abs(t))}computePixelFlex(e=this.props.orientation){return this.ref.current?"horizontal"===e?0===this.ref.current.offsetHeight?(console.warn("Found ReflexContainer with height=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetHeight:0===this.ref.current.offsetWidth?(console.warn("Found ReflexContainer with width=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetWidth:(console.warn("Unable to locate ReflexContainer dom node"),0)}addOffset(e,t){const n=this.getSize(e),r=e.props.index,i=Math.max(n+t,0),s=this.state.flexData[r].flex,o=s>0?s*i/n:this.computePixelFlex()*i;this.state.flexData[r].flex=!isFinite(o)||isNaN(o)?0:o}dispatchStretch(e,t){const n=t<0?e+1:e-1;if(n<0||n>this.children.length-1)return[];const r=this.children[n],i=this.getSize(r),s=Math.min(r.props.maxSize,i+Math.abs(t))-i;if(this.addOffset(r,s),s<Math.abs(t)){const n=e-2*Math.sign(t),i=Math.sign(t)*(Math.abs(t)-s);return[r,...this.dispatchStretch(n,i)]}return[r]}dispatchShrink(e,t){const n=t>0?e+1:e-1;if(n<0||n>this.children.length-1)return[];const r=this.children[n],i=this.getSize(r),s=Math.max(r.props.minSize,i-Math.abs(t))-i;if(this.addOffset(r,s),Math.abs(s)<Math.abs(t)){const n=e+2*Math.sign(t),i=Math.sign(t)*(Math.abs(t)+s);return[r,...this.dispatchShrink(n,i)]}return[r]}dispatchOffset(e,t){return[...this.dispatchStretch(e,t),...this.dispatchShrink(e,t)]}emitElementsEvent(e,t){this.toArray(e).forEach((e=>{e.props[t]&&e.props[t]({domElement:e.ref.current,component:e})}))}computeFlexData(t=this.getValidChildren(),n=this.props){const r=this.computePixelFlex(n.orientation),i=t.map((e=>{const t=e.props;return{maxFlex:(t.maxSize||Number.MAX_VALUE)*r,sizeFlex:(t.size||Number.MAX_VALUE)*r,minFlex:(t.minSize||1)*r,constrained:void 0!==t.flex,flex:t.flex||0,type:e.type}})),s=(e,t=0)=>{let n=!1;const r=e.reduce(((e,t)=>kS.isA(t)||t.constrained?e:e+1),0),i=(e=>e.reduce(((e,t)=>!kS.isA(t)&&t.constrained?e-t.flex:e),1))(e),o=e.map((e=>{if(kS.isA(e))return e;const t=e.constrained?e.flex:i/r,s=Math.min(e.sizeFlex,Math.min(e.maxFlex,Math.max(e.minFlex,t))),o=e.constrained||s!==t;return n=n||o,bS({},e,{flex:s,constrained:o})}));return n&&t<this.props.maxRecDepth?s(o,t+1):o};return s(i).map((t=>({flex:kS.isA(t)?0:t.flex,ref:e.createRef()})))}toArray(e){return e?Array.isArray(e)?e:[e]:[]}render(){const t=[this.state.resizing?"reflex-resizing":"",...this.props.className.split(" "),this.props.orientation,"reflex-container"].join(" ").trim();return this.children=e.Children.map(this.getValidChildren(),((t,n)=>{if(n>this.state.flexData.length-1)return e.createElement("div",null);const r=this.state.flexData[n],i=bS({},t.props,{maxSize:t.props.maxSize||Number.MAX_VALUE,orientation:this.props.orientation,minSize:t.props.minSize||1,events:this.events,flex:r.flex,ref:r.ref,index:n});return e.cloneElement(t,i)})),e.createElement("div",T({},_S(this.props),{style:this.props.style,className:t,ref:this.ref}),this.children)}}kt(CS,"propTypes",{windowResizeAware:SS().bool,orientation:SS().oneOf(["horizontal","vertical"]),maxRecDepth:SS().number,className:SS().string,style:SS().object}),kt(CS,"defaultProps",{orientation:"horizontal",windowResizeAware:!1,maxRecDepth:100,className:"",style:{}});class TS extends e.Component{static isA(e){return!!e&&e.type===TS}constructor(t){super(t),kt(this,"ref",e.createRef()),kt(this,"onMouseMove",(e=>{if(this.state.active){const t=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:t,event:e}),this.props.onResize&&this.props.onResize({component:this,domElement:t}),e.stopPropagation(),e.preventDefault()}})),kt(this,"onMouseDown",(e=>{this.setState({active:!0}),this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this})||this.props.events.emit("startResize",{index:this.props.index,event:e})})),kt(this,"onMouseUp",(e=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:e}))})),this.state={active:!1},this.document=t.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const t=[...this.props.className.split(" "),this.state.active?"active":"","reflex-handle"].join(" ").trim();return e.createElement("div",T({},_S(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:t,id:this.props.id,ref:this.ref}),this.props.children)}}kt(TS,"propTypes",{children:SS().oneOfType([SS().arrayOf(SS().node),SS().node]),onStartResize:SS().func,onStopResize:SS().func,className:SS().string,propagate:SS().bool,onResize:SS().func,style:SS().object}),kt(TS,"defaultProps",{document:"undefined"==typeof document?null:document,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});var IS=n(3096),xS=n.n(IS),NS=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),PS="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,RS=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),OS="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(RS):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},AS=["top","right","bottom","left","width","height","size","weight"],DS="undefined"!=typeof MutationObserver,MS=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function s(){n&&(n=!1,e()),r&&a()}function o(){OS(s)}function a(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(o,20);i=e}return a}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){PS&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),DS?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){PS&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;AS.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),LS=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},FS=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||RS},zS=qS(0,0,0,0);function US(e){return parseFloat(e)||0}function jS(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+US(e["border-"+n+"-width"])}),0)}var VS="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof FS(e).SVGGraphicsElement}:function(e){return e instanceof FS(e).SVGElement&&"function"==typeof e.getBBox};function BS(e){return PS?VS(e)?function(e){var t=e.getBBox();return qS(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return zS;var r=FS(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],s=e["padding-"+i];t[i]=US(s)}return t}(r),s=i.left+i.right,o=i.top+i.bottom,a=US(r.width),l=US(r.height);if("border-box"===r.boxSizing&&(Math.round(a+s)!==t&&(a-=jS(r,"left","right")+s),Math.round(l+o)!==n&&(l-=jS(r,"top","bottom")+o)),!function(e){return e===FS(e).document.documentElement}(e)){var u=Math.round(a+s)-t,c=Math.round(l+o)-n;1!==Math.abs(u)&&(a-=u),1!==Math.abs(c)&&(l-=c)}return qS(i.left,i.top,a,l)}(e):zS}function qS(e,t,n,r){return{x:e,y:t,width:n,height:r}}var $S=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=qS(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=BS(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),WS=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(s.prototype);return LS(o,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),o}(t);LS(this,{target:e,contentRect:n})},HS=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new NS,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof FS(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new $S(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof FS(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new WS(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),KS="undefined"!=typeof WeakMap?new WeakMap:new NS,GS=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=MS.getInstance(),r=new HS(t,n,this);KS.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){GS.prototype[e]=function(){var t;return(t=KS.get(this))[e].apply(t,arguments)}}));const QS=void 0!==RS.ResizeObserver?RS.ResizeObserver:GS;var YS=["client","offset","scroll","bounds","margin"];function ZS(e){var t=[];return YS.forEach((function(n){e[n]&&t.push(n)})),t}function XS(e,t){var n={};if(t.indexOf("client")>-1&&(n.client={top:e.clientTop,left:e.clientLeft,width:e.clientWidth,height:e.clientHeight}),t.indexOf("offset")>-1&&(n.offset={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}),t.indexOf("scroll")>-1&&(n.scroll={top:e.scrollTop,left:e.scrollLeft,width:e.scrollWidth,height:e.scrollHeight}),t.indexOf("bounds")>-1){var r=e.getBoundingClientRect();n.bounds={top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:r.width,height:r.height}}if(t.indexOf("margin")>-1){var i=getComputedStyle(e);n.margin={top:i?parseInt(i.marginTop):0,right:i?parseInt(i.marginRight):0,bottom:i?parseInt(i.marginBottom):0,left:i?parseInt(i.marginLeft):0}}return n}function JS(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||window}var ek=function(t){var n,r;return r=n=function(n){var r,i;function s(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))||this).state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},e._animationFrameID=null,e._resizeObserver=null,e._node=null,e._window=null,e.measure=function(t){var n=XS(e._node,ZS(e.props));t&&(n.entry=t[0].contentRect),e._animationFrameID=e._window.requestAnimationFrame((function(){null!==e._resizeObserver&&(e.setState({contentRect:n}),"function"==typeof e.props.onResize&&e.props.onResize(n))}))},e._handleRef=function(t){null!==e._resizeObserver&&null!==e._node&&e._resizeObserver.unobserve(e._node),e._node=t,e._window=JS(e._node);var n=e.props.innerRef;n&&("function"==typeof n?n(e._node):n.current=e._node),null!==e._resizeObserver&&null!==e._node&&e._resizeObserver.observe(e._node)},e}i=n,(r=s).prototype=Object.create(i.prototype),r.prototype.constructor=r,a(r,i);var o=s.prototype;return o.componentDidMount=function(){this._resizeObserver=null!==this._window&&this._window.ResizeObserver?new this._window.ResizeObserver(this.measure):new QS(this.measure),null!==this._node&&(this._resizeObserver.observe(this._node),"function"==typeof this.props.onResize&&this.props.onResize(XS(this._node,ZS(this.props))))},o.componentWillUnmount=function(){null!==this._window&&this._window.cancelAnimationFrame(this._animationFrameID),null!==this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)},o.render=function(){var n=this.props,r=(n.innerRef,n.onResize,function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["innerRef","onResize"]));return(0,e.createElement)(t,T({},r,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},s}(e.Component),n.propTypes={client:SS().bool,offset:SS().bool,scroll:SS().bool,bounds:SS().bool,margin:SS().bool,innerRef:SS().oneOfType([SS().object,SS().func]),onResize:SS().func},r}((function(e){var t=e.measure,n=e.measureRef,r=e.contentRect;return(0,e.children)({measure:t,measureRef:n,contentRect:r})}));ek.displayName="Measure",ek.propTypes.children=SS().func;const tk=ek,nk=e=>e?Array.isArray(e)?e:[e]:[];class rk extends e.Component{constructor(e){super(e),kt(this,"onResize",(e=>{const{resizeHeight:t,resizeWidth:n}=this.props,{height:r,width:i}=e.bounds;this.setDimensions(bS({},t&&{height:r},n&&{width:i}))})),this.setDimensions=xS()((e=>{this.setState(e)}),this.props.propagateDimensionsRate/1e3),this.state={height:"100%",width:"100%"}}renderChildren(){const{propagateDimensions:t}=this.props,n=nk(this.props.children).filter((e=>!!e));return e.Children.map(n,(n=>this.props.withHandle||TS.isA(n)?e.cloneElement(n,bS({dimensions:t&&this.state},n.props,{index:this.props.index-1,events:this.props.events})):t?e.cloneElement(n,bS({},n.props,{dimensions:this.state})):n))}render(){return e.createElement(tk,{bounds:!0,onResize:this.onResize},(({measureRef:t})=>e.createElement("div",{ref:t,className:"reflex-size-aware"},e.createElement("div",{style:this.state},this.renderChildren()))))}}class ik extends e.Component{constructor(e){super(e),this.state={size:e.size}}static getDerivedStateFromProps(e,t){return e.size!==t.size?bS({},t,{size:e.size}):null}async componentDidUpdate(e,t,n){if(t.size!==this.state.size){const e=nk(this.props.direction);for(let t of e)await this.props.events.emit("element.size",{index:this.props.index,size:this.props.size,direction:t})}}renderChildren(){const t=nk(this.props.children).filter((e=>!!e));return e.Children.map(t,(t=>this.props.withHandle||TS.isA(t)?e.cloneElement(t,bS({},t.props,{index:this.props.index-1,events:this.props.events})):t))}render(){const t=[...this.props.className.split(" "),this.props.orientation,"reflex-element"].join(" ").trim(),n=bS({},this.props.style,{flexGrow:this.props.flex,flexShrink:1,flexBasis:"0%"});return e.createElement("div",T({},_S(this.props),{ref:this.props.innerRef,className:t,style:n}),this.props.propagateDimensions?e.createElement(rk,this.props):this.renderChildren())}}kt(ik,"propTypes",{propagateDimensions:SS().bool,resizeHeight:SS().bool,resizeWidth:SS().bool,className:SS().string,size:SS().number}),kt(ik,"defaultProps",{propagateDimensionsRate:100,propagateDimensions:!1,resizeHeight:!0,resizeWidth:!0,direction:[1],className:""});const sk=e.forwardRef(((t,n)=>e.createElement(ik,T({innerRef:n},t))));var ok=n(8906),ak={};ak.styleTagTransform=S(),ak.setAttributes=b(),ak.insert=y().bind(null,"head"),ak.domAPI=m(),ak.insertStyleElement=_(),f()(ok.Z,ak),ok.Z&&ok.Z.locals&&ok.Z.locals;const lk=function(){return e.createElement("div",{className:"interactionBar"},"interaction bar")};var uk=n(2168),ck={};ck.styleTagTransform=S(),ck.setAttributes=b(),ck.insert=y().bind(null,"head"),ck.domAPI=m(),ck.insertStyleElement=_(),f()(uk.Z,ck),uk.Z&&uk.Z.locals&&uk.Z.locals;const hk=function(){return e.createElement("div",{className:"file"},"file")};var dk=n(439),fk={};fk.styleTagTransform=S(),fk.setAttributes=b(),fk.insert=y().bind(null,"head"),fk.domAPI=m(),fk.insertStyleElement=_(),f()(dk.Z,fk),dk.Z&&dk.Z.locals&&dk.Z.locals;var pk=n(288),mk={};mk.styleTagTransform=S(),mk.setAttributes=b(),mk.insert=y().bind(null,"head"),mk.domAPI=m(),mk.insertStyleElement=_(),f()(pk.Z,mk),pk.Z&&pk.Z.locals&&pk.Z.locals;const gk=function(t){var n=t.comment,r=new Date(n.date);return e.createElement("div",{className:"comment"},e.createElement("div",{className:"commentDate"},(r.getHours()<10?"0":"")+r.getHours()+":"+(r.getMinutes()<10?"0":"")+r.getMinutes()),e.createElement("div",{className:"commentAuthor"},n.uName),e.createElement("div",{className:"commentText"},n.text))},yk=function(){var t=ye((function(e){return e.treeReducer.comments})),n=wr((0,e.useState)(""),2),r=n[0],i=n[1],s=lw.getInstance(),o=function(){i(""),s.addComment(r)};return e.createElement("div",{className:"comments"},e.createElement("div",{className:"commentsInput"},e.createElement("input",{type:"text",value:r,onKeyDown:function(e){"Enter"===e.key&&o()},onChange:function(e){i(e.target.value)}}),e.createElement("div",{className:"sendComment",onClick:o},"send")),e.createElement("div",{className:"commentsOutput"},t.map((function(t,n){return e.createElement(gk,{key:n,comment:t})}))))},vk=function(){return e.createElement("div",{className:"interaction"},e.createElement(lk,null),e.createElement(CS,{orientation:"horizontal"},e.createElement(sk,null,e.createElement(hk,null)),e.createElement(kS,{className:"interaction-splitter"}),e.createElement(sk,{size:800,minSize:120},e.createElement(yk,null))))};var bk=n(3202),wk={};wk.styleTagTransform=S(),wk.setAttributes=b(),wk.insert=y().bind(null,"head"),wk.domAPI=m(),wk.insertStyleElement=_(),f()(bk.Z,wk),bk.Z&&bk.Z.locals&&bk.Z.locals;const _k=function(){var t=cw.getInstance();return 0==t.recentNodes.length&&t.setBase("history"),e.createElement("div",{className:"tree"},e.createElement(CS,{orientation:"horizontal"},e.createElement(sk,null,e.createElement(vk,null)),e.createElement(kS,{className:"tree-splitter"}),e.createElement(sk,{size:121,minSize:121},e.createElement(gS,null))))};var Ek=n(5727),Sk={};Sk.styleTagTransform=S(),Sk.setAttributes=b(),Sk.insert=y().bind(null,"head"),Sk.domAPI=m(),Sk.insertStyleElement=_(),f()(Ek.Z,Sk),Ek.Z&&Ek.Z.locals&&Ek.Z.locals;const kk=function(){return e.createElement("div",{className:"navbar"},e.createElement("div",{className:"container"},e.createElement("div",{className:"navbarContent"},e.createElement(oe,{to:"/profile"},"profile"),e.createElement(oe,{to:"/"},"guide"),e.createElement(oe,{to:"/tree"},"tree"))))};var Ck=n(5232),Tk={};Tk.styleTagTransform=S(),Tk.setAttributes=b(),Tk.insert=y().bind(null,"head"),Tk.domAPI=m(),Tk.insertStyleElement=_(),f()(Ck.Z,Tk),Ck.Z&&Ck.Z.locals&&Ck.Z.locals;const Ik=function(){return e.createElement("div",{className:"info"},e.createElement("div",{className:"explanation"},"You will have limited number of node loads as a guest. ",e.createElement("br",null),"But if you register you can have as many as you want. ",e.createElement("br",null),"In tree navigation is at the bottom. ",e.createElement("br",null),"And I hope ui is simple to understand. ",e.createElement("br",null)))};var xk=n(5843),Nk={};Nk.styleTagTransform=S(),Nk.setAttributes=b(),Nk.insert=y().bind(null,"head"),Nk.domAPI=m(),Nk.insertStyleElement=_(),f()(xk.Z,Nk),xk.Z&&xk.Z.locals&&xk.Z.locals;var Pk=n(1659),Rk={};Rk.styleTagTransform=S(),Rk.setAttributes=b(),Rk.insert=y().bind(null,"head"),Rk.domAPI=m(),Rk.insertStyleElement=_(),f()(Pk.Z,Rk),Pk.Z&&Pk.Z.locals&&Pk.Z.locals;var Ok=n(6599),Ak={};Ak.styleTagTransform=S(),Ak.setAttributes=b(),Ak.insert=y().bind(null,"head"),Ak.domAPI=m(),Ak.insertStyleElement=_(),f()(Ok.Z,Ak),Ok.Z&&Ok.Z.locals&&Ok.Z.locals;var Dk=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1.0.1",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"000 000-0000";if(r(this,e),!e.isValidUserId(t))throw new Error("Bad user id!");if(!e.isValidEmail(n))throw new Error("Bad email!");if(!e.isValidVersion(i))throw new Error("Bad version!");this.version=i,this.userId=t,this.email=n,this.phone=s}return s(e,null,[{key:"isValidVersion",value:function(e){return""!==e}},{key:"isValidUserId",value:function(e){return""!==e}},{key:"isValidEmail",value:function(e){return!!e.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)}},{key:"isValidPhone",value:function(e){return!!e.match(/^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]\d{3}[\s.-]\d{4}$/)}}]),e}(),Mk=UE(Fr);up(Fr);const Lk=function(t){var n=function(){t.setLogin(!1)},r=wr((0,e.useState)(new Set),2),i=r[0],s=r[1],o=wr((0,e.useState)(new Set),2),a=o[0],l=o[1],u=wr((0,e.useState)(""),2),c=u[0],h=u[1],d=wr((0,e.useState)(""),2),f=d[0],p=d[1],m=wr((0,e.useState)(""),2),g=m[0],y=m[1],v=wr((0,e.useState)(""),2),b=v[0],w=v[1],_=wr((0,e.useState)(""),2),E=_[0],S=_[1],k=wr((0,e.useState)(""),2),C=k[0],T=k[1];(0,e.useEffect)((function(){0==f.length?h("your account email"):Dk.isValidEmail(f)?i.has(f)?(h("no account with that email"),y("solid orange 2px")):(h("excellent email"),y("solid green 2px")):(h("not proper email format"),y("solid red 2px"))})),(0,e.useEffect)((function(){0==E.length?w("your password"):E.length<6?(w("length at least 6 characters"),T("solid red 2px")):a.has(E)?(w("wrong password"),T("solid orange 2px")):(w("press login"),T("solid green 2px"))}));var I=function(){var e=Tr(xr().mark((function e(){var t,n,r,i,s;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new C_,n=UE(Fr),r=up(Fr),e.next=5,cE(n,t);case 5:i=e.sent,s=i.user,Qp(Vp(ip(r,"usersAuth"),qp("email","==",s.email),qp("active","==",!0))).then((function(e){if(e.docs.length>0);else{var t=Date.now();Xp(ip(r,"usersAuth"),{dataClassVersion:"1.0.1",active:!0,registrationDateTime:t,deactivationDateTime:null,userId:s.uid,email:s.email,phone:"",authProvider:"google"})}})).catch((function(e){console.log(e),alert(e.message)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e.createElement("div",{className:"login"},e.createElement("button",{className:"closeLoginButton",onClick:n}),e.createElement("div",{className:"loginContent"},e.createElement("div",{className:"header"},"Login"),c,e.createElement("input",{type:"email",placeholder:"email",style:{border:g},onChange:function(e){return p(e.target.value)}}),b,e.createElement("input",{type:"password",placeholder:"password",style:{border:C},onChange:function(e){return S(e.target.value)}}),e.createElement("button",{className:"loginButton loginEmail",onClick:function(){"excellent email"!=c||"press login"!=b||function(e,t,n){return async function(e,t){return O_(d_(e),t)}((0,$r.m9)(e),__.credential(t,n))}(Mk,f,E).then((function(e){n()})).catch((function(e){"auth/wrong-password"==e.code?l((function(e){return new Set(e.add(E))})):"auth/user-not-found"==e.code?s((function(e){return new Set(e.add(f))})):console.log(e.message)}))}},"Login"),e.createElement("button",{className:"loginButton loginGoogle",onClick:I},"Login with Google")))};var Fk=n(653),zk={};zk.styleTagTransform=S(),zk.setAttributes=b(),zk.insert=y().bind(null,"head"),zk.domAPI=m(),zk.insertStyleElement=_(),f()(Fk.Z,zk),Fk.Z&&Fk.Z.locals&&Fk.Z.locals;var Uk=UE(Fr),jk=up(Fr);const Vk=function(t){var n=function(){t.setRegister(!1)},r=wr((0,e.useState)(new Set),2),i=r[0],s=r[1],o=wr((0,e.useState)(""),2),a=o[0],l=o[1],u=wr((0,e.useState)(""),2),c=u[0],h=u[1],d=wr((0,e.useState)(""),2),f=d[0],p=d[1],m=wr((0,e.useState)(""),2),g=m[0],y=m[1],v=wr((0,e.useState)(""),2),b=v[0],w=v[1],_=wr((0,e.useState)(""),2),E=_[0],S=_[1],k=wr((0,e.useState)(""),2),C=k[0],T=k[1],I=wr((0,e.useState)(""),2),x=I[0],N=I[1],P=wr((0,e.useState)(""),2),R=P[0],O=P[1],A=wr((0,e.useState)(""),2),D=A[0],M=A[1];(0,e.useEffect)((function(){0==c.length?(l("email"),p("")):Dk.isValidEmail(c)?i.has(c)?(l("email is already in use"),p("solid orange 2px")):(p("solid green 2px"),l("excellent email")):(l("not proper email format"),p("solid red 2px"))})),(0,e.useEffect)((function(){0==x.length||0==R.length?T("repeat password"):x.length<6||R.length<6?(T("length at least 6 characters"),M("solid red 2px")):x!=R?(T("passwords don't match"),M("solid red 2px")):(T("great password"),M("solid green 2px"))})),(0,e.useEffect)((function(){0==b.length?(y("phone number optional*"),S("")):Dk.isValidPhone(b)?(y("perfect"),S("solid green 2px")):(y("improper format 333 333 4444"),S("solid red 2px"))}));var L=function(){var e=Tr(xr().mark((function e(){var t,n,r,i,s;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new C_,n=UE(Fr),r=up(Fr),e.next=5,cE(n,t);case 5:i=e.sent,s=i.user,Qp(Vp(ip(r,"usersAuth"),qp("email","==",s.email),qp("active","==",!0))).then((function(e){if(e.docs.length>0);else{var t=Date.now();Xp(ip(r,"usersAuth"),{dataClassVersion:"1.0.1",active:!0,registrationDateTime:t,deactivationDateTime:null,userId:s.uid,email:s.email,phone:"",authProvider:"google"})}})).catch((function(e){console.log(e),alert(e.message)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e.createElement("div",{className:"register"},e.createElement("button",{className:"closeRegisterButton",onClick:n}),e.createElement("div",{className:"registerContent"},e.createElement("div",{className:"header"},"Register"),a,e.createElement("input",{type:"email",placeholder:"example@treex.ai",style:{border:f},onChange:function(e){return h(e.target.value)}}),C,e.createElement("input",{type:"password",style:{border:D},onChange:function(e){return N(e.target.value)}}),C,e.createElement("input",{type:"password",style:{border:D},onChange:function(e){return O(e.target.value)}}),g,e.createElement("input",{type:"phone",placeholder:"123-456-7890",style:{border:E},onChange:function(e){return w(e.target.value)}}),e.createElement("button",{className:"registerButton registerEmail",onClick:function(){if("excellent email"!=a||"great password"!=C||"improper format"==g);else{var e=Date.now();(async function(e,t,n){const r=d_(e),i=await async function(e,t){return Mw(e,"POST","/v1/accounts:signUp",Ow(e,t))}(r,{returnSecureToken:!0,email:t,password:n}),s=await x_._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s})(Uk,c,x).then((function(t){var r=t.user;Xp(ip(jk,"usersAuth"),{dataClassVersion:"1.0.1",active:!0,registrationDateTime:e,deactivationDateTime:null,userId:r.uid,email:c,phone:b,authProvider:"password"}).then((function(e){})).catch((function(e){console.log("error while adding new user",e),alert(e.message)})),n()})).catch((function(e){"auth/email-already-in-use"===e.code?s((function(e){return new Set(e.add(c))})):console.log(e.message)}))}}},"Register"),e.createElement("button",{className:"registerButton registerGoogle",onClick:L},"Register with Google")))};var Bk=n(4586),qk={};qk.styleTagTransform=S(),qk.setAttributes=b(),qk.insert=y().bind(null,"head"),qk.domAPI=m(),qk.insertStyleElement=_(),f()(Bk.Z,qk),Bk.Z&&Bk.Z.locals&&Bk.Z.locals;var $k=UE(Fr);const Wk=function(t){var n=function(){t.setResetPassword(!1)},r=wr((0,e.useState)(""),2),i=r[0],s=r[1],o=wr((0,e.useState)(""),2),a=o[0],l=o[1],u=wr((0,e.useState)(""),2),c=u[0],h=u[1];return(0,e.useEffect)((function(){0==i.length?(l("email"),h("")):Dk.isValidEmail(i)?(l("ok"),h("solid green 2px")):(l("not proper email format"),h("solid red 2px"))})),e.createElement("div",{className:"resetPassword"},e.createElement("button",{className:"closeResetPasswordButton",onClick:n}),e.createElement("div",{className:"resetPasswordContent"},e.createElement("div",{className:"header"},"Reset password"),a,e.createElement("input",{type:"email",placeholder:"example@treex.ai",style:{border:c},onChange:function(e){return s(e.target.value)}}),e.createElement("button",{className:"resetPasswordButton",onClick:function(){A_($k,i).then((function(e){n()})).catch((function(e){console.log(e),alert(e.message)}))}},"Send reset password link")))},Hk=function(){var t=UE(Fr),n=(wr(BE(t),1)[0],wr((0,e.useState)(!1),2)),r=n[0],i=n[1],s=wr((0,e.useState)(!1),2),o=s[0],a=s[1],l=wr((0,e.useState)(!1),2),u=l[0],c=l[1];return e.createElement("div",{className:"guest"},e.createElement("div",{className:"navigation"},e.createElement("div",{className:"heading"},"Looks like you're a guest!"),e.createElement("button",{className:"userStatusButton",onClick:function(){i(!0)}},"login"),e.createElement("button",{className:"userStatusButton",onClick:function(){a(!0)}},"register"),e.createElement("button",{className:"userStatusButton",onClick:function(){c(!0)}},"reset password")),r?e.createElement(Lk,{setLogin:i}):null,o?e.createElement(Vk,{setRegister:a}):null,u?e.createElement(Wk,{setResetPassword:c}):null)};var Kk=n(3473),Gk={};Gk.styleTagTransform=S(),Gk.setAttributes=b(),Gk.insert=y().bind(null,"head"),Gk.domAPI=m(),Gk.insertStyleElement=_(),f()(Kk.Z,Gk),Kk.Z&&Kk.Z.locals&&Kk.Z.locals;var Qk=n(8),Yk={};function Zk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zk(Object(n),!0).forEach((function(t){kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Yk.styleTagTransform=S(),Yk.setAttributes=b(),Yk.insert=y().bind(null,"head"),Yk.domAPI=m(),Yk.insertStyleElement=_(),f()(Qk.Z,Yk),Qk.Z&&Qk.Z.locals&&Qk.Z.locals;var Jk=UE(Fr),eC=up(Fr);const tC=function(t){var n=wr(BE(Jk),3),r=n[0],i=(n[1],n[2],function(){t.setDeleteAccount(!1)}),s=wr((0,e.useState)(""),2),o=s[0],a=s[1],l=wr((0,e.useState)(""),2),u=l[0],c=l[1],h=wr((0,e.useState)(""),2),d=h[0],f=h[1];return(0,e.useEffect)((function(){0==o.length?(c("repeat your email"),f("")):o!=r.email?(c("wrong email for this account"),f("solid red 2px")):(c("click delete to proceed"),f("solid green 2px"))})),e.createElement("div",{className:"deleteAccount"},e.createElement("button",{className:"closeDeleteAccountButton",onClick:i}),e.createElement("div",{className:"deleteAccountContent"},e.createElement("div",{className:"header"},"Delete Account"),u,e.createElement("input",{type:"email",placeholder:"example@treex.ai",style:{border:d},onChange:function(e){return a(e.target.value)}}),e.createElement("button",{className:"deleteAccountButton",onClick:function(){"click delete to proceed"!=u||(Qp(Vp(ip(eC,"usersAuth"),qp("active","==",!0),qp("userId","==",r.uid))).then((function(e){1!==e.docs.length?console.log("should be only one active user"):e.forEach((function(e){var t=Date.now();Yp(sp(eC,"usersAuth",e.id),Xk(Xk({},e.data()),{},{active:!1,deactivationDateTime:t}))})),async function(e){return(0,$r.m9)(e).delete()}(r).then((function(){i()})).catch((function(e){console.log(e),alert(e.message)}))})).catch((function(e){console.log(e),alert(e.message)})),i())}},"delete")))};var nC=n(3869),rC={};rC.styleTagTransform=S(),rC.setAttributes=b(),rC.insert=y().bind(null,"head"),rC.domAPI=m(),rC.insertStyleElement=_(),f()(nC.Z,rC),nC.Z&&nC.Z.locals&&nC.Z.locals;var iC=n(6584),sC={};sC.styleTagTransform=S(),sC.setAttributes=b(),sC.insert=y().bind(null,"head"),sC.domAPI=m(),sC.insertStyleElement=_(),f()(iC.Z,sC),iC.Z&&iC.Z.locals&&iC.Z.locals;var oC=function(){function e(){r(this,e),this.db=up(Fr)}var t,n;return s(e,[{key:"getName",value:(n=Tr(xr().mark((function e(t){var n;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=cw.getInstance()).names.has(t)){e.next=5;break}return e.abrupt("return",n.names.get(t));case 5:return e.next=7,this.getNameWeb(t);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getNameWeb",value:(t=Tr(xr().mark((function e(t){var n;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sp(this.db,"nameAndParents",t).withConverter(rm),e.next=3,Kp(n).then((function(e){var n=e.data();return n?n.name:(console.log("id",t),console.log(n),console.log("ProfileManager.getNameWeb(): error while downloading name"),"error")})).catch((function(e){return console.log(e),"error"}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"generate",value:function(){this.lastUnsub&&this.lastUnsub();var e=or.getState().profileReducer.currentId,t=sp(this.db,"usersProfile",e);this.lastUnsub=Jp(t,(function(e){var t=e.data();t&&(or.dispatch(Bn(t.firstName)),or.dispatch(qn(t.lastName)),or.dispatch($n(t.userName)))}))}},{key:"upload",value:function(e,t,n){var r=or.getState().profileReducer.userId,i=sp(this.db,"usersProfile",r),s={firstName:e,lastName:t,userName:n};or.dispatch(Bn(e)),or.dispatch(qn(t)),or.dispatch($n(n)),Yp(i,s).then((function(e){})).catch((function(e){console.log(e),alert(e.message)}))}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();const aC=function(t){var n=oC.getInstance(),r=wr((0,e.useState)(""),2),i=r[0],s=r[1],o=function(){var r=Tr(xr().mark((function r(){var i;return xr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.getName(t.id);case 2:if("error"!=(i=r.sent)){r.next=5;break}return r.abrupt("return",e.createElement("div",null));case 5:s(i);case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();(0,e.useEffect)((function(){o()}),[]);var a=Z();return e.createElement("div",{className:"recentNode",onClick:function(){cw.getInstance().setBase(t.id),a("/tree")}},i)},lC=function(){var t=ye((function(e){return e.treeReducer.history})),n=Rr(new Set(t));return e.createElement("div",{className:"recentNodes"},"recent nodes",e.createElement("div",{className:"recentNodes-Nodes"},n.map((function(t,n){return e.createElement(aC,{id:t,key:n})}))))};var uC=n(1933),cC={};cC.styleTagTransform=S(),cC.setAttributes=b(),cC.insert=y().bind(null,"head"),cC.domAPI=m(),cC.insertStyleElement=_(),f()(uC.Z,cC),uC.Z&&uC.Z.locals&&uC.Z.locals;const hC=function(t){var n=function(){t.setEditDashboard(!1)},r=wr((0,e.useState)(ye((function(e){return e.profileReducer.firstName}))),2),i=r[0],s=r[1],o=wr((0,e.useState)(ye((function(e){return e.profileReducer.lastName}))),2),a=o[0],l=o[1],u=wr((0,e.useState)(ye((function(e){return e.profileReducer.userName}))),2),c=u[0],h=u[1];return e.createElement("div",{className:"editDashboard"},e.createElement("button",{className:"closeEditDashboardButton",onClick:n}),e.createElement("div",{className:"editDashboardContent"},e.createElement("div",{className:"header"},"Edit Profile"),e.createElement("input",{type:"text",placeholder:i,onChange:function(e){return s(e.target.value)}}),e.createElement("input",{type:"text",placeholder:a,onChange:function(e){return l(e.target.value)}}),e.createElement("input",{type:"text",placeholder:c,onChange:function(e){return h(e.target.value)}}),e.createElement("button",{className:"saveChangesButton",onClick:function(){oC.getInstance().upload(i,a,c),n()}},"save")))},dC=function(){var t=UE(Fr),n=wr(BE(t),1)[0],r=Ce(),i=ye((function(e){return e.profileReducer.userId})),s=ye((function(e){return e.profileReducer.currentId})),o=oC.getInstance();i!=n.uid&&r(function(e){return{type:Fn,payload:e}}(n.uid)),o.generate();var a=wr((0,e.useState)(!1),2),l=a[0],u=a[1],c=wr((0,e.useState)(!1),2),h=c[0],d=c[1],f=ye((function(e){return e.profileReducer.firstName})),p=ye((function(e){return e.profileReducer.lastName})),m=ye((function(e){return e.profileReducer.userName}));return e.createElement("div",{className:"dashboard"},e.createElement("div",{className:"userStatusButtons"},i==s?e.createElement("div",{className:"userStatusButton",onClick:function(){u(!0)}},"delete account"):null,i==s?e.createElement("div",{className:"userStatusButton",onClick:function(){(function(e){return(0,$r.m9)(e).signOut()})(UE()).then((function(){})).catch((function(e){console.log(e.messgae)}))}},"logout"):null,i==s?null:e.createElement("div",{className:"userStatusButton",onClick:function(){r(function(e){return{type:zn,payload:e}}(i))}},"my account")),l?e.createElement(tC,{setDeleteAccount:u}):null,h?e.createElement(hC,{setEditDashboard:d}):null,e.createElement("div",{className:"userInfo"},e.createElement("div",{className:"name"},f+" "+p,s==i?e.createElement("button",{className:"editDashboardButton",onClick:function(){d(!0)}},"edit"):null),e.createElement("div",{className:"userName"},m+" ")),e.createElement("div",{className:"activityInfo"},e.createElement(lC,null)))},fC=function(){var t=UE(Fr),n=wr(BE(t),1)[0];return e.createElement("div",{className:"profile"},e.createElement("div",{className:"container"},e.createElement("div",{className:"profileContent"},n?null:e.createElement(Hk,null),n?e.createElement(dC,null):null)))};var pC=function(e,t,n){var r=!1,i=Ot(En,_n,void 0),s=function(e){i.dispatch({type:sn,key:e})},o=function(t,n,s){var o={type:en,payload:n,err:s,key:t};e.dispatch(o),i.dispatch(o),r&&a.getState().bootstrapped&&(r(),r=!1)},a=bn({},i,{purge:function(){var t=[];return e.dispatch({type:rn,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return e.dispatch({type:Jt,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){e.dispatch({type:tn})},persist:function(){e.dispatch({type:nn,register:s,rehydrate:o})}});return a.persist(),a}(or),mC=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(h,t);var n,i,l=(n=h,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(n);if(i){var r=c(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return u(this,e)});function h(e){var t;return r(this,h),(t=l.call(this,e)).state={light:!1},t.changeTheme=t.changeTheme.bind(o(t)),t}return s(h,[{key:"changeTheme",value:function(){this.setState({light:!this.state.light})}},{key:"render",value:function(){return e.createElement(_e,{store:or},e.createElement(mr,{persistor:pC},e.createElement("div",{id:"App"},e.createElement("div",{className:this.state.light?"theme--light":"theme--default"},e.createElement(se,{basename:"/"},e.createElement(kk,null),e.createElement(te,null,e.createElement(J,{path:"/",element:e.createElement(Ik,null)}),e.createElement(J,{path:"/tree",element:e.createElement(_k,null)}),e.createElement(J,{path:"/profile",element:e.createElement(fC,null)})))))))}}]),h}(e.Component);const gC=mC;t.createRoot(document.getElementById("root")).render(e.createElement(e.StrictMode,null,e.createElement(gC,null)))})()})();